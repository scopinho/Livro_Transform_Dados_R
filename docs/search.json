[
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "",
    "text": "A seguir temos vários exemplos de importação de dados utilizando o pacote TIDYVERSE do R. O pacote tidyverse possui vários pacotes de importação de dados, aqui iremos cobrir três deles (readr, readxl e googlesheets4). Para saber mais sobre estes pacotes, acesse:\nhttps://cran.r-project.org/package=tidyverse.\nhttps://cran.r-project.org/package=readr.\nhttps://cran.r-project.org/package=readxl.\nhttps://cran.r-project.org/package=googlesheets4.\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\nCaso você precise trabalhar com outras formatos de arquivos que não sejam os vistos neste documento, pode buscar maiores informações sobre os pacotes a seguir:\n\n\n\nPacote\nFormato\n\n\n\n\nhaven\nArquivos SPSS, Stata e SAS\n\n\nDBI\nBancos de Dados\n\n\njsonlite\nJSON\n\n\nxml2\nXML\n\n\nhttr\nWeb APIs\n\n\nrvest\nHTML (Web scraping)\n\n\nreadr::read_lines()\ndados texto\n\n\n\nPara os exemplos, iremos carregar os seguintes pacotes:\n\ntidyverse\nreadxl\ngooglesheets4\ngt\nopenxlsx\n\n\nlibrary (tidyverse)\nlibrary (readxl)\nlibrary (googlesheets4)\nlibrary (gt)\nlibrary (openxlsx)\n\n\n\nA maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na Folha de Referência de importação de dados com tidyverse disponível no site do RStudio.\n\n\n\n\n\n\nNota\n\n\n\nEm geral, ao final de cada comando, você verá a chamada à função gt(). Isto é apenas para a formatação da tabela de saída e não é necessário para que você entenda os comandos precedentes. Em alguns casos, onde o volume de dados de saída pode ser extenso, usamos também a função head() para mostrar apenas as linhas iniciais. Quando o exemplo possui muitas colunas de saída, eventualmente utilizamos a função select() para selecionar apenas algumas colunas.\n\n\n\n\n\nPara a maioria dos exemplos utilizaremos os seguintes arquivos de dados:\nAlguns desses arquivos são baseados nas tabelas mtcars, storms e starwars provenientes do pacote datasets e dplyr e também algumas tabelas (Table1, 2, 3, 4a, 4b e 5) que vem com o pacote tidyr.\n\nARQUIVOS TABULADOS: (TXT, CSV, TSV e FWF):\nIremos criar os arquivos tabulados para que possamos usá-los posteriormente. Para isso, execute o código abaixo:\n\nwrite_file(\"A|B|C\\n1|2|3\\n4|5|NA\", file = \"file.txt\")\nwrite_file(\"A,B,C\\n1,2,3\\n4,5,NA\", file = \"file.csv\")\nwrite_file(\"A;B;C\\n1,5;2;3\\n4,5;5;NA\", file = \"file2.csv\")\nwrite_file(\"A\\tB\\tC\\n1\\t2\\t3\\n4\\t5\\tNA\\n\", file = \"file.tsv\")\n\n\nEXCEL_FILE.XLSX:\nA seguir, você tem um link para o arquivo Excel utilizado nos exemplos.\nÉ um arquivo com três planilhas (S1, S2 e S3) e em cada uma delas um pequeno conjunto de dados.\n\nE a primeira planilha (S1) possui algo como:\n\n\nGOOGLE_SHEET: TBD"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-dados-tabulados-com-readr",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-dados-tabulados-com-readr",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "4.1 Ler dados tabulados com readr",
    "text": "4.1 Ler dados tabulados com readr\n\n4.1.0.1 read_delim\nUse para ler um arquivo tabulado com qualquer delimitador. Se nenhum delimitador é especificado, a função tentará advinhar automaticamente.\nPor exemplo, para ler um arquivo .TXT tabulado com o caractere “|” como delimitador, fazemos:\n\nread_delim(\"file.txt\", delim = \"|\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    1\n2\n3\n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nPara armazenar a leitura do arquivo em um objeto no R, podemos usar o operador <-.\n\n\n\nmeu_arquivo_csv <-read_delim(\"file.txt\", delim = \"|\")\ngt(meu_arquivo_csv)\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    1\n2\n3\n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.0.2 read_cvs\nUse para ler um arquivo tabulado separado por vírgula. Esta função entende que casas decimais que usam o ponto (ex 1.00) como separador de casas decimais.\n\nread_csv(\"file.csv\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    1\n2\n3\n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.0.3 read_cvs2\nUse para ler um arquivo tabulado separado por ponto-e-vírgula. Esta função entende que casas decimais que usam a vírgula (ex: 1,00) como separador de casas decimais.\n\nread_csv2(\"file2.csv\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    1.5\n2\n3\n    4.5\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.0.4 read_tsv\nUse para ler um arquivo tabulado separado por tab.\n\nread_tsv(\"file.tsv\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    1\n2\n3\n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.0.5 read_fwf\nUse para ler um arquivo tabulado com tamanhos fixos de colunas.\n\n\n\n\n\n\nNota\n\n\n\nVeja que a largura das colunas deve ser passada como um vetor para a parametro col_positions = usando a função fwf_width().\n\n\n\nread_fwf(\"file.tsv\", fwf_widths(c(2,2,NA))) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      X1\n      X2\n      X3\n    \n  \n  \n    A\nB\nC\n    1\n2\n3\n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.1 Parâmetros Úteis\nAlguns parametros das funções read_*() são muito úteis durante o processo de leitura pois permitem controlar melhor o que iremos obter como resultado da leitura.\n\n4.1.1.1 Sem cabeçalho\nUse o parâmetro COL_NAMES para não trazer a primeira linha como nome das colunas.\n\nread_csv2(\"file2.csv\", col_names = FALSE) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      X1\n      X2\n      X3\n    \n  \n  \n    A\nB\nC\n    1,5\n2\n3\n    4,5\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.1.2 Definir cabeçalho\nUse o parâmetro COL_NAMES para definir manualmente os nomes das colunas.\n\nread_csv(\"file.csv\", col_names = c(\"X\", \"Y\", \"Z\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      X\n      Y\n      Z\n    \n  \n  \n    A\nB\nC\n    1\n2\n3\n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.1.3 Ler vários arquivos\nUse o parametro ID para ler multiplos arquivos e armazená-los em uma mesma tabela.\n\nwrite_file(\"A,B,C\\n1,2,3\\n4,5,NA\", file = \"f1.csv\")\nwrite_file(\"A,B,C\\n6,7,8\\n9,10,11\", file = \"f2.csv\")\nread_csv(c(\"f1.csv\", \"f2.csv\"), id = \"arq_origem\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      arq_origem\n      A\n      B\n      C\n    \n  \n  \n    f1.csv\n1\n2\n3\n    f1.csv\n4\n5\nNA\n    f2.csv\n6\n7\n8\n    f2.csv\n9\n10\n11\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nImportante\n\n\n\nObserve que as colunas dos diversos arquivos devem corresponder, ou seja, ter o mesmo nome de colunas.\n\n\n\n\n4.1.1.4 Pular linhas\nUse o prâmetro SKIP para pular as primeiras n linhas.\n\nread_csv(\"file.csv\", skip = 1) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      1\n      2\n      3\n    \n  \n  \n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.1.5 Ler um número máximo de linhas\nUse o prâmetro N_MAX para ler um número máximo de linhas.\n\nread_csv(\"file.csv\", n_max = 1) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    1\n2\n3\n  \n  \n  \n\n\n\n\n\n\n4.1.1.6 Ler valores como NA\nUse o prâmetro NA para definir um ou mais valores como NA.\n\nread_csv(\"file.csv\", na = c(\"1\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    NA\n2\n3\n    4\n5\nNA\n  \n  \n  \n\n\n\n\n\n\n4.1.1.7 Especificar caractere decimal\nUse o prâmetro LOCALE para definir o caractere de casa decimais.\n\nread_delim(\"file2.csv\", locale = locale(decimal_mark = \",\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      A\n      B\n      C\n    \n  \n  \n    1.5\n2\n3\n    4.5\n5\nNA"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#salvar-dados-com-readr",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#salvar-dados-com-readr",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "4.2 Salvar dados com readr",
    "text": "4.2 Salvar dados com readr\nSimilar às funções descritas na seção “Ler dados tabulados com readr” usadas para ler os aqruivos de texto tabulados, temos o conjunto de funções write_*() para gravar os arquivos correspondentes. Estas funções seguem o seguinte padrão:\nwrite_*(x, file, na = “NA”, append, col_names, quote, escape, eol, num_threads, progress)\nAs principais funções são:\n\n4.2.0.1 write_delim\nUse para gravar um arquivo delimitado por algum caractere específico. O parametro delim= permite definir este caractere. O caracteres padrão é o espaço (” “).\nPor exemplo, se quisermos gravar uma tabela (tibble) em um arquivo .txt delimitado por ponto-e-vírgula”;“, podemos usar:\n\nconteudo <- tribble(~col_A, ~col_B,\n                   1, \"A\",\n                   2, \"B\", \n                   3, \"C\")\nwrite_delim(conteudo, file = \"arquivo_exemplo1.txt\", delim=\";\")\n\n\n\n4.2.0.2 write_csv\nUse para gravar uma tabela em uma arquivo delimitado por “vírgula”.\n\n\n\n\n\n\nDica\n\n\n\nPodemos usar o arqumento na = para definirmos qual valor será usando para os valore ausentes, por padrão é utilizado “NA”. No exemplo a seguir, iremos trocar por “NULL”.\n\n\n\nconteudo <- tribble(~col_A, ~col_B,\n                   1, \"A\",\n                   2, \"B\", \n                   3, NA,\n                   4, \"D\")\nwrite_csv(conteudo, file = \"arquivo_exemplo2.csv\", na = \"NULL\")\n\n\n\n4.2.0.3 write_csv2\nUse para gravar uma tabela em um arquivo delimitado por “ponto-e-vírgula”.\n\n\n\n\n\n\nDica\n\n\n\nPode usar o parametro “col_names =” para incluir ou não os nomes das colunas no arquivo de saída. No exemplo a seguir, não iremos incluir os nomes das colunas:\n\n\n\nconteudo <- tribble(~col_A, ~col_B,\n                   1, \"A\",\n                   2, \"B\", \n                   3, \"C\")\nwrite_csv2(conteudo, file = \"arquivo_exemplo3.csv\", col_names = FALSE)\n\n\n\n4.2.0.4 write_tsv\nUse para gravar uma tabela em um arquivo delimitado por “TAB”:\n\nconteudo <- tribble(~col_A, ~col_B,\n                   1, \"A\",\n                   2, \"B\", \n                   3, \"C\")\nwrite_tsv(conteudo, file = \"arquivo_exemplo4.tsv\")"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-colunas-com-readr",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-colunas-com-readr",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "4.3 Especificação de colunas com readr",
    "text": "4.3 Especificação de colunas com readr\nAo importar um arquivo com readr, podemos definir qual o tipo de coluna que determinado dado será importado. Por padrão, o readr irá gerar a especificação de cada coluna quando o arquivo form lido e gerará um resumo na saída.\nPodemos usar o argumento spec() para extrair as especificações das colunas de um arquivo importato para um data frame.\nPor exemplo:\n\narq <- read_csv2(\"file2.csv\") \nspec(arq)\n\ncols(\n  A = col_double(),\n  B = col_double(),\n  C = col_double()\n)\n\n\nObserve que as colunas “A”, “B” e “C” são do formato double.\nHá também uma mensagem de resumo ao importar um arquivo. Observe que ele informa o delimitador utilzado, mas também a especificação das colunas, neste caso, tipo double (dbl) para as colunas A, B e C conforme confirmamos com a função spec().\n\nℹ Using “‘,’” as decimal and “‘.’” as grouping mark. Use read_delim() for more control. Rows: 2 Columns: 3── Column specification ────────────────────────────────────────────────────────────────── Delimiter: “;” dbl (3): A, B, C ℹ Use spec() to retrieve the full column specification for this data. ℹ Specify the column types or set show_col_types = FALSE to quiet this message. # READXL\n\n\n\n\n\n\n\nDica\n\n\n\nSe quisermos omitir as especificações das colunas da mensagem de saída, usamos o parametro show_col_types = FALSE\n\n\n\n4.3.0.1 col_types\nSe utilizarmos o parametro col_types = podemos definir, por exemplo, a coluna “B” como inteiro (integer). Veja:\n\narq <- read_csv2(\"file2.csv\", col_types = \"did\") \nspec(arq)\n\ncols(\n  A = col_double(),\n  B = col_integer(),\n  C = col_double()\n)\n\n\nHá uma letra definida para cada tipo de coluna que quisermos especificar, veja a lista abaixo:\n• col_logical() - “l”\n• col_integer() - “i”\n• col_double() - “d”\n• col_number() - “n”\n• col_character() - “c”\n• col_factor(levels, ordered = FALSE) - “f”\n• col_datetime(format = ““) -”T”\n• col_date(format = ““) -”D”\n• col_time(format = ““) -”t”\n• col_skip() - “-”, “_”\n• col_guess() - “?”\nPor isso, usamos string “did” para definir um double, um inteiro e outro double para as colunas que importamos.\nPodemos também passar a especificação das colunas como uma lista mesclando as funções e os caracteres correspondentes na lista acima.\nPor exemplo:\n\narq <- read_csv2(\"file2.csv\", \n          col_types = list(A = col_double(), B = \"i\", C= \"d\")\n          )\nspec(arq)\n\ncols(\n  A = col_double(),\n  B = col_integer(),\n  C = col_double()\n)\n\n\n\n\n\n\n\n\nDica\n\n\n\nUse “.default =” na lista de especificações para definir o tipo padrão para as colunas, caso as mesmas não sejam explicitamente definidas.\n\n\n\n\n4.3.0.2 col_select\nPara selecionarmos apenas algumas colunas para importar do arquivo, utilzamos o parametro col_select = passanto um vetor com o nomes das colunas.\nPor exemplo, para importar apenas as colunas “A” e “C”, podemos fazer:\n\nread_csv(\"file.csv\", col_select = c(\"A\", \"C\"))\n\n# A tibble: 2 × 2\n      A     C\n  <dbl> <dbl>\n1     1     3\n2     4    NA\n\n\n\n\n4.3.0.3 guess_max\nPara definirmos o número máximo de linhas do arquivo para advinhar o tipo da coluna (guess), utilizamos o parametro guess_max =. O padrão são as primeiras 1000 linhas.\n\nread_csv(\"file.csv\",guess_max = 2)\n\n# A tibble: 2 × 3\n      A     B     C\n  <dbl> <dbl> <dbl>\n1     1     2     3\n2     4     5    NA"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-arquivos-do-excel",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-arquivos-do-excel",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "5.1 Ler arquivos do Excel",
    "text": "5.1 Ler arquivos do Excel\nApesar do pacote readxl ser instalado quando instalamos o pacote tidyverse, ele não é carregado quando carregamos o tidyverse. É por isso, que tivemos o código “library (readxl) na seção Introdução\n\n5.1.0.1 read_excel\nUse para ler um arquivo do Excel (.xls ou .xlsx) baseado na extensão do arquivo.\nSe preferir, pode utilizar as funções read_xls() e read_xlsx() para ler um arquivo com .xls ou .xlsx independente da extensão do arquivo.\n\nread_excel(\"excel_file.xlsx\")\n\n# A tibble: 2 × 5\n  x1       x2 x3       x4    x5\n  <chr> <dbl> <chr> <dbl> <dbl>\n1 x        NA z         8    NA\n2 y         7 <NA>      9    10"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-planilhas",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-planilhas",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "5.2 Ler planilhas",
    "text": "5.2 Ler planilhas\nSabemos que um arquivo Excel (workbook), pode conter uma ou mais planilhas (worksheets). Para definirmos as planilhas que precisamos importar, podemos utilizar o parametros sheet = da função read_excel(). Podemos passar uma string com o nome a planilha (ex: “S1”) ou um índice númerico pela ordem de criação da planilha (ex: 1). Se nada for especificado, padrão é trazer a primeira planilha.\n\nread_excel(\"excel_file.xlsx\", sheet = \"S1\")\n\n# A tibble: 2 × 5\n  x1       x2 x3       x4    x5\n  <chr> <dbl> <chr> <dbl> <dbl>\n1 x        NA z         8    NA\n2 y         7 <NA>      9    10\n\n\nPara obter os nomes das planilhas presentes no arquivo, utilizamos a função excel_sheets()\n\nexcel_sheets(\"excel_file.xlsx\")\n\n[1] \"S1\" \"S2\" \"S3\"\n\n\n\n\n\n\n\n\nDica\n\n\n\nPara lermos múltiplas planilhas podemos obter os nomes das planilhas usando a função excel_sheets(), pois definimos os nomes do vetor iguais aos nomes das planilhas e finalmente utilizamos a função purrr::map_dfr() para importar os arquivos no data frame.\n\n\n\narq <- \"excel_file.xlsx\"\narq |> \n  excel_sheets() |> \n  set_names() |> \n  map_dfr(read_excel, path = arq)\n\n# A tibble: 6 × 15\n  x1       x2 x3       x4    x5 y1       y2 y3       y4    y5 z1       z2 z3   \n  <chr> <dbl> <chr> <dbl> <dbl> <chr> <dbl> <chr> <dbl> <dbl> <chr> <dbl> <chr>\n1 x        NA z         8    NA <NA>     NA <NA>     NA    NA <NA>     NA <NA> \n2 y         7 <NA>      9    10 <NA>     NA <NA>     NA    NA <NA>     NA <NA> \n3 <NA>     NA <NA>     NA    NA x        NA z         8    NA <NA>     NA <NA> \n4 <NA>     NA <NA>     NA    NA y         7 <NA>      9    10 <NA>     NA <NA> \n5 <NA>     NA <NA>     NA    NA <NA>     NA <NA>     NA    NA x        NA z    \n6 <NA>     NA <NA>     NA    NA <NA>     NA <NA>     NA    NA y         7 <NA> \n# … with 2 more variables: z4 <dbl>, z5 <dbl>\n# ℹ Use `colnames()` to see all variable names"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-colunas",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-colunas",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "5.3 Especificação de colunas",
    "text": "5.3 Especificação de colunas\nPara especificar os tipos das colunas no data frame após a importação do arquivo, usamos o parametro col_types =, similar ao que fizemos para arquivos tabulados na seção Especificação de colunas com readr.\nOs tipos de colunas podemos ser:\n“skip”, “guess”, “logical”, “numeric”, “date”, “text” ou “list”.\n\n\n\n\n\n\nDica\n\n\n\nUse uma coluna de lista (list-column) descrita no pacote tidyr para trabalhar com colunas com vários tipos."
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#outros-pacotes",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#outros-pacotes",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "5.4 Outros pacotes",
    "text": "5.4 Outros pacotes\nAlém do pacote readxl, há outros pacotes muito úteis para criar arquivos do MS Excel, tais como:\n\nopenxlsx\nwritexl\n\nPara trabalhar com dados do Excel de forma não tabular, veja o pacote:\n\ntidyxl"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-celulas",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-celulas",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "5.5 Especificação de celulas",
    "text": "5.5 Especificação de celulas\nUse os argumentos range = para a função read_excel() ou googlesheets4::read_sheet() no caso de planilhas do Google para ler um subconjunto de células de uma planilha.\nPor exemplo, se quiser ler apenas o range de células de “A1” até “B3” da planilha “S2” do arquivo excel de exemplo, por fazer:\n\nread_excel(\"excel_file.xlsx\", range = \"S2!A1:B3\")\n\n# A tibble: 2 × 2\n  y1       y2\n  <chr> <dbl>\n1 x        NA\n2 y         7\n\n\nO parametro range = , possui alguns argumentos que ajudam a melhor definir o range a ser importado. Veja ?`cell-specification` para maiores detalhes de como cell_cols(), cell_rows(), cell_limits() e anchored(). Por exemplo, usando cell_cols, podemos definir que iremos importar apenas as celulas que das colunas “B” até “D”:\n\nread_excel(\"excel_file.xlsx\", sheet = \"S1\", \n          range = cell_cols(\"B:D\"))\n\n# A tibble: 2 × 3\n     x2 x3       x4\n  <dbl> <chr> <dbl>\n1    NA z         8\n2     7 <NA>      9"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-planilhas-1",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#ler-planilhas-1",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "6.1 Ler planilhas",
    "text": "6.1 Ler planilhas\n\n6.1.0.1 read_sheet\nUse para ler planilhas do Google a partir de uma URL, um IDde planilha ou um objeto do tipo “dribble” que é retornado pelo pacote googledrive. Esta função é um “apelido” para a função range_read() que é mais utilizada no contexto do pacote googlesheets4.\nDiversos argumtos vistos para as funções read_* são aplicadas aqui também, como col_types = , sheet =, range = , guess_max = . Veja mais detalhes na seção do readr descrita anteriormente.\nNo exemplo a seguir iremos ler uma planilha do Google de exemplo. Para isso, recebemos o seguinte URL. Veja que a partes em negrito corresponde ao ID do arquivo e o ID da planilha respectivamente:\nhttps://docs.google.com/spreadsheets/d/1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8/edit#gid=0\nUsamos então a função read_sheet():\n\ngooglesheets4::read_sheet(\"1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8\", sheet = \"Sheet1\")\n\n# A tibble: 5 × 3\n      A B     C    \n  <dbl> <chr> <chr>\n1     1 A     XX   \n2     2 B     YY   \n3     3 C     ZZ   \n4     4 D     WW   \n5     5 E     AA   \n\n\n\n\n\n\n\n\nCuidado\n\n\n\nA primeira vez que executar este comendo, haverá um processo de autenticação da sua conta do Google e seeão do R. Reponda “Yes” para a pergunta “Is it OK to cache OAuth access credentials in the folder ~/.cache/gargle between R sessions?”\n1: Yes\n2: No\nDepois o navegador será aberto solicitando o acesso aos arquivo do Google. Selecoine o checkbox e click em “Continue”."
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#metadados-das-planilhas",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#metadados-das-planilhas",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "6.2 Metadados das planilhas",
    "text": "6.2 Metadados das planilhas\n\n6.2.0.1 gs4_gets\nUse para obter os metadados do arquivo:\n\ngs4_get(\"1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8\")\n\nSpreadsheet name: tydiverse_sample\n              ID: 1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8\n          Locale: en_US\n       Time zone: America/Sao_Paulo\n     # of sheets: 16\n\n(Sheet name): (Nominal extent in rows x columns)\n      Sheet1: 1000 x 26\n          df: 4 x 2\n      Sheet2: 4 x 2\n      Sheet3: 4 x 2\n      Sheet4: 4 x 2\n      Sheet5: 4 x 2\n      Sheet6: 4 x 2\n      Sheet7: 4 x 2\n      Sheet8: 4 x 2\n      Sheet9: 4 x 2\n     Sheet10: 4 x 2\n     Sheet11: 4 x 2\n     Sheet12: 4 x 2\n     Sheet13: 4 x 2\n     Sheet14: 4 x 2\n     Sheet15: 4 x 2\n\n\n\n\n6.2.0.2 gs4_find\nUse para localizar suas planilhas do Google no drive. Ela retorna um objeto dibble, que é um “tibble” com uma linha por arquivo. E informa o ID dos arquivos.\n\nmy_dribble <- gs4_find(pattern = \"tydiverse_sample\")\nmy_dribble\n\n# A dribble: 1 × 3\n  name             id                                           drive_resource\n  <chr>            <drv_id>                                     <list>        \n1 tydiverse_sample 1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8 <named list>  \n\n\nsheet_properties\nUse para obter uma tabela (tibble) com as propriedades de cada planilha.\n\nsheet_properties(\"1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8\")\n\n# A tibble: 16 × 8\n   name    index         id type  visible grid_rows grid_columns data  \n   <chr>   <int>      <int> <chr> <lgl>       <int>        <int> <list>\n 1 Sheet1      0          0 GRID  TRUE         1000           26 <NULL>\n 2 df          1 1125179472 GRID  TRUE            4            2 <NULL>\n 3 Sheet2      2 1251368119 GRID  TRUE            4            2 <NULL>\n 4 Sheet3      3 1983355079 GRID  TRUE            4            2 <NULL>\n 5 Sheet4      4  801422320 GRID  TRUE            4            2 <NULL>\n 6 Sheet5      5 1405654832 GRID  TRUE            4            2 <NULL>\n 7 Sheet6      6  772870347 GRID  TRUE            4            2 <NULL>\n 8 Sheet7      7 1763203995 GRID  TRUE            4            2 <NULL>\n 9 Sheet8      8  761411920 GRID  TRUE            4            2 <NULL>\n10 Sheet9      9  234486202 GRID  TRUE            4            2 <NULL>\n11 Sheet10    10 1994658720 GRID  TRUE            4            2 <NULL>\n12 Sheet11    11 1963955834 GRID  TRUE            4            2 <NULL>\n13 Sheet12    12 1590324518 GRID  TRUE            4            2 <NULL>\n14 Sheet13    13  419724382 GRID  TRUE            4            2 <NULL>\n15 Sheet14    14  184675437 GRID  TRUE            4            2 <NULL>\n16 Sheet15    15 1606404035 GRID  TRUE            4            2 <NULL>\n\n\n\n\n\n\n\n\nDica\n\n\n\nVocê pode usar a função sheet_names() para obter os nomes da planilha dentro do arquivo."
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#gravar-planilhar",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#gravar-planilhar",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "6.3 Gravar planilhar",
    "text": "6.3 Gravar planilhar\nO pacote googlesheets4 tem várias maneiras de gravar dados em uma planilha.\n\n6.3.0.1 write_sheet\nUse esta função para salvar um data frame em uma planilha no arquivo do Google Sheets. Se a planilha não existir, ele cria uma planilha co mum nome aleatório através da função gs4_create().\n\ndf <- tribble(~x, ~y,\n              1, \"A\",\n              2, \"B\",\n              3, \"C\")\nwrite_sheet(df, \"1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8\")\nread_sheet(\"1_aRR_9UcMytZqjID0BkJ7PW29M1kt1_x2HxhBZOlFN8\", sheet = \"df\")\n\n# A tibble: 3 × 2\n      x y    \n  <dbl> <chr>\n1     1 A    \n2     2 B    \n3     3 C    \n\n\n\n\n6.3.0.2 gs4_create\nUse para criar uma nova planilha do Google. Você pode fornecer o nome, mas caso não o faça o Google irá atribuir um nome aleatorio ao seu arquivo.\n\nminha_planilha <- gs4_create(name = \"meu_novo_arquivo_google_sheet\", sheets = \"Sheet1\")\nsheet_properties(minha_planilha)\n\n# A tibble: 1 × 8\n  name   index        id type  visible grid_rows grid_columns data  \n  <chr>  <int>     <int> <chr> <lgl>       <int>        <int> <list>\n1 Sheet1     0 389065218 GRID  TRUE         1000           26 <NULL>"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-colunas-1",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-colunas-1",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "6.4 Especificação de colunas",
    "text": "6.4 Especificação de colunas\nPara especificar os tipos das colunas no data frame após a importação da planilha do Google, usamos o parametro col_types = como argumento da função read_sheet/range_read(), similar ao que fizemos para arquivos tabulados na seção Especificação de colunas com readr.\nOs tipos de colunas aceitos são:\n• skip - “_” ou “-”\n• guess - “?”\n• logical - “l”\n• integer - “i”\n• double - “d”\n• numeric - “n”\n• date - “D”\n• datetime - “T”\n• character - “c”\n• list-column - “L”\n• cell - “C” Retorna uma lista bruta dos dados das células."
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-celulas-1",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#especificação-de-celulas-1",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "6.5 Especificação de celulas",
    "text": "6.5 Especificação de celulas\nVer seção Especificação de celulas"
  },
  {
    "objectID": "Importacao/Importacao_de_dados_com_tidyverse.html#operadores-de-arquivos",
    "href": "Importacao/Importacao_de_dados_com_tidyverse.html#operadores-de-arquivos",
    "title": "2  Importação de Dados com TIDYVERSE",
    "section": "6.6 Operadores de arquivos",
    "text": "6.6 Operadores de arquivos\nO pacote googlesheets4 oferece várias forma de manipular os aspectos da planilha como congelar linhas, definir largura das colunas, etc. Acesse googlesheets4.tydeverse.org para mais informações.\nPara operções de arquivos (ex: renomear, compartilhar, mover para outra pasta, etc), veja o pacote googledrive no link: googledrive.tidyverse.org."
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html",
    "href": "DataHora/Datas_e_horas_com_lubridate.html",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "",
    "text": "A seguir temos vários exemplos de manipulação de variáveis data e hora utilizando o pacote LUBRIDATE do R. Para saber mais sobre este pacote, acesse:\nhttps://cran.r-project.org/package=lubridate.\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\nPara os exemplos, iremos carregar os seguintes pacotes:\n\ntidyverse\ngt\nlubridate\n\n\nlibrary (tidyverse)\nlibrary (gt)\nlibrary (lubridate)"
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#tipos-de-objetos-de-data-e-hora",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#tipos-de-objetos-de-data-e-hora",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.2 Tipos de objetos de data e hora",
    "text": "6.2 Tipos de objetos de data e hora\n\n6.2.0.1 Datetime\nUma variável do tipo “datetime” (data e hora) representa um ponto na linha do tempo armazenado em um número que representa o número de segundos desde 01-01-1970 00:00:00 (UTC).\n\n\n\n\n\n\nNota\n\n\n\nUniversal Time Coordinated (UTC), é uma escala coordenada de tempo, mantida pelo “Bureau International des Poids et Mesures (BIPM)”. Até 1972, era chamado de (GTM ou Greenwich Mean Time). É também conhecida como “Z time” ou “Zulu Time”.\n\n\n\n\n6.2.0.2 Date\nQuando nos referimos à uma variável “date”(data), significa que ela armazena um número inteiro que representa o número de dias desde 01-01-1970.\n\n\n6.2.0.3 Time\nQuando nos referimos à uma variável “time” (tempo em segundos), ela armazena um número inteiro que representa o número de segundos desde às 00:00:00 (hms).\nPara os vários exemplos a seguir, utilizaremos os seguintes objetos data e hora:\n\ndt <-  as_datetime(1511870400)\nd <- as_date(17498)\nt <-hms::as_hms(85)\ndt; d; t\n\n[1] \"2017-11-28 12:00:00 UTC\"\n\n\n[1] \"2017-11-28\"\n\n\n00:01:25\n\n\n\n\n\n\n\n\nDica\n\n\n\nOs objetos gerados pela maioria das funções do lubridate usam os padrões POSIXct, POSIXlt, Date, Period ou objetos que podem ser convertidos para o POSIXlt. Para maiores informações sobre estas classes, digite:\n?DateTimeClasses\nPOSIXct: armazena segundos desde 01-01-1970 00:00:00 (Unix epoch) POSIXlt: armazena uma lista de dia, mês, ano, hora, min, segundos, etc.\n\n\n\n\n6.2.1 Exemplos da Folha de Referência\nA maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na Folha de Referência do lubridate disponível no site do RStudio.\n\n\n\n\n\n\n\nNota\n\n\n\nEm geral, ao final de cada comando, as vezes você verá a chamada à função gt(). Isto é apenas para a formatação da tabela de saída e não é necessário para que você entenda os comandos precedentes. Em alguns casos, onde o volume de dados de saída pode ser extenso, usamos também a função head() para mostrar apenas as linhas iniciais. Quando o exemplo possui muitas colunas de saída, eventualmente utilizamos a função select() para selecionar apenas algumas colunas.\nEm alguns casos usaremos funções de manipulação de dados do pacote dplyr, como mutate () ou count().\n\n\n\n\n\n\n\n\nNota\n\n\n\nO termo data-frame descrito ao longo deste texto, é utilizado de forma livre para objetos do tipo data.frame, tibble, entre outros. Pense como se fosse uma tabela de um banco de dados e/ou uma planilha do MS Excel, contendo linhas e colunas. Apesar de não ser rigorosamente igual à uma tabela, muitas vezes usaremos estes termos de forma intercambiável para facilitar o entendimento de iniciantes."
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#validando-data-e-hora",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#validando-data-e-hora",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.3 Validando Data e Hora",
    "text": "6.3 Validando Data e Hora\nO pacote lubridate possui uma série de funções para obter e definir os elementos de ano, mês, dia, hora, minuto e segundos de um objeto data e hora.\nUse as funções a seguir servem para identificar estes elementos em seus dados a partir de uma string. Cada uma delas aceita o argumento “tz” para definir o fuso-horário (timezone), se este não for definido, UTC é utilizado.\nEstas funções são nomeadas conforme a tabela abaixo e sua ordem obedece tal nomenclatura:\n\n\n\nElemento\nLetra\n\n\n\n\ny\nano (year)\n\n\nm\nmês (month)\n\n\nd\ndia (day)\n\n\nh\nhora (hour)\n\n\nm\nminuto (minute)\n\n\ns\nsegundos (seconds)\n\n\n\nPor exemplo, para criar um objeto datetime passando a string “2017-11-28T14:02:00”, utilzamos a função ymd_hms(). Isto porque ao montar a string de data e hora, colocamos como ordem o ano, mês, dia, hora, minuto e segundo.\n\nymd_hms(\"2017-11-28T14:02:00\")\n\n[1] \"2017-11-28 14:02:00 UTC\"\n\n\nSe passarmos a string trocando o ano pela dia, devemos usar a função dmy_hms():\n\ndmy_hms(\"28-11-2017T14:02:00\")\n\n[1] \"2017-11-28 14:02:00 UTC\"\n\n\n\n\n\n\n\n\nNota\n\n\n\nVeja que tanto a função ymd_hms() quanto a dmy_hms(), geraram o mesmo objeto datetime. Se quisermos obter o valor inteiro que representa este objeto desde 01-01-1970 00:00:00, podemos usar a função decimal_date()\n\n\nVeja o código abaixo com mais alguns exemplos das funções validando os elementos da string passada para a função:\n\n# ymd_hms(), ymd_hm(), ymd_h().\nymd_hms(\"2017-11-28T14:02:00\") |> print()\n\n[1] \"2017-11-28 14:02:00 UTC\"\n\n# ydm_hms(), ydm_hm(), ydm_h().\nydm_hms(\"2017-22-12 10:00:00\") |>  print()\n\n[1] \"2017-12-22 10:00:00 UTC\"\n\n# mdy_hms(), mdy_hm(), mdy_h(). \nmdy_hms(\"11/28/2017 1:02:03\") |>  print()\n\n[1] \"2017-11-28 01:02:03 UTC\"\n\n# dmy_hms(), dmy_hm(), dmy_h().\ndmy_hms(\"1 Jan 2017 23:59:59\")|>  print()\n\n[1] \"2017-01-01 23:59:59 UTC\"\n\n# ymd(), ydm(). \nymd(20170131)|>  print()\n\n[1] \"2017-01-31\"\n\n# mdy(), myd(). \nmdy(\"July 4th, 2000\")|>  print()\n\n[1] \"2000-07-04\"\n\n# dmy(), dym(). \ndmy(\"4th of July '99\")|>  print()\n\n[1] \"1999-07-04\"\n\n# yq() Q para quartil. \nyq(\"2001: Q3\")|>  print()\n\n[1] \"2001-07-01\"\n\n# my(), ym(). \nmy(\"07-2020\")|>  print()\n\n[1] \"2020-07-01\"\n\n#hms::hms() ou lubridate::hms(), ms() ou hm() para períodos.\nhms::hms(sec = 0, min = 1, hours = 2)\n\n02:01:00\n\n\n\n6.3.1 Outras funções úteis\n\n6.3.1.1 date_decimal\nUse para converter um número decimala para data e hora:\n\ndate_decimal(2017.5)\n\n[1] \"2017-07-02 12:00:00 UTC\"\n\n\n\n\n6.3.1.2 now\nUse para obter um objeto data e hora do instante:\n\nnow(tzone = \"America/Sao_Paulo\")\n\n[1] \"2022-08-24 19:17:38 -03\"\n\n\n\n\n\n\n\n\nImportante\n\n\n\nSe o fuso-horário (tzone =) não for informado, a função utilizará aquele utilzado pelo sitema operacional em execução.\n\n\n\n\n6.3.1.3 today\nUse para obter a data atual.\n\ntoday()\n\n[1] \"2022-08-24\"\n\n\n\n\n6.3.1.4 fast_strptime\nUse para converter vetores de caracteres para objetos data e hora (POSIXlt) de forma rápida.\n\nfast_strptime('9/1/01', '%y/%m/%d')\n\n[1] \"2009-01-01 UTC\"\n\n\n\n\n6.3.1.5 parse_date_time\nUse para converter vetores de caracteres para objetos data e hora (POSIXct) de forma mais simplificada.\n\nparse_date_time(\"19/1/1\", \"ymd\")\n\n[1] \"2019-01-01 UTC\""
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#obtendo-e-definindo-componentes-de-data-e-hora",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#obtendo-e-definindo-componentes-de-data-e-hora",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.4 Obtendo e Definindo Componentes de Data e Hora",
    "text": "6.4 Obtendo e Definindo Componentes de Data e Hora\nUse as funções abaixo para obter um componente de um objeto data e hora.\n\n# Obter o \"DIA\" de um objeto \"datetime\"\nday(dt)\n\n[1] 28\n\n# Obter a \"DATA\"\ndate(dt)\n\n[1] \"2017-11-28\"\n\n# Obter a \"ANO\".\n# Para obter o \"ANO ISO 8610 use isoyear()\n# Para obter o \"ANO Epidemiológico use epiyear()\nyear(dt)\n\n[1] 2017\n\n# Obter o \"MÊS\". \n# Use argumentos label= e addr= para obter o nome ou abreviação do mês.\nmonth(dt)\n\n[1] 11\n\n# Obter o \"DIA DA SEMANA\".\n# Use argumentos label= e addr= para obter o nome ou abreviação do dia.\nwday(dt, label = TRUE) \n\n[1] ter\nLevels: dom < seg < ter < qua < qui < sex < sáb\n\n# Obter o \"DIA DO TRIMESTRE\".\nqday(dt) \n\n[1] 59\n\n# Obter a HORA\". \nhour(dt)\n\n[1] 12\n\n# Obter os \"MINUTOS\". \nminute(dt)\n\n[1] 0\n\n# Obter os \"SEGUNDOS\". \nsecond(dt)\n\n[1] 0\n\n# Obter o \"FUSO-HORÁRIO. \ntz(dt)\n\n[1] \"UTC\"\n\n# Obter a \"SEMANA DO ANO\". \nweek(dt)\n\n[1] 48\n\n# ara obter a \"SEMANA DO ANO\" ISO 8160 use isoyear()\n# Para obter a \"SEMANA DO ANO\" Epidemiológico use epiyear()\n\n# Obter o \"TRIMESTRE\". \nquarter(dt)\n\n[1] 4\n\n# Obter o \"SEMESTRE\". \nsemester(dt)\n\n[1] 2\n\n# Saber se é \"MANHÃ (am). \nam(dt)\n\n[1] FALSE\n\n# Saber se é \"TARDE\" (pm).\npm(dt)\n\n[1] TRUE\n\n# Saber se é \"HORÁRIO DE VERÃO\" \ndst(d)\n\n[1] FALSE\n\n# Saber se é \"ANO BISEXTO\"\nleap_year(d)\n\n[1] FALSE\n\n\nPara definir um componente de um objeto, podemos utilzar as funções acima, porém com o sinal de atribuição.\nPor exemplo, para alterar o dia de “28” do objeto “d”, para dia “1”, podemos fazer:\n\nday(d) |>  print() \n\n[1] 28\n\nday(d) <- 1\nprint(d) \n\n[1] \"2017-11-01\"\n\n\nPodemos também atualizar um componente do objeto data e hora:\n\n# Atualizar um componente do objeto\nupdate(dt, mday = 2, hour = 1)\n\n[1] \"2017-11-02 01:00:00 UTC\"\n\n\nO exemplo acima, altera o dia do mês para 2 e a hora para 01."
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#arredondando-data-e-hora",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#arredondando-data-e-hora",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.5 Arredondando Data e Hora",
    "text": "6.5 Arredondando Data e Hora\nUse as funções a seguir para “arredondar” ou aproximar um objeto data e hora para unidades de ajuste. As unidades válidas são:\n\nsecond, minute, hour, day, week, month, bimonth, quarter, season, halfyear e year.\n\n\n6.5.0.1 floor_date\nUse para “arredondar para baixo” a data e hora para a unidade mais próxima.\nPor exemplo, digamos que temos um objeto data = “2017-11-28” e queremos arredondar para baixo, sendo que a unidade é mês, ou seja, arredondar para o início do mês:\n\nfloor_date(dt, unit=\"month\")\n\n[1] \"2017-11-01 UTC\"\n\n\nround_date\nUse para “arredondar” a data para a unidade mais próxima.\n\nround_date(dt, unit=\"month\")\n\n[1] \"2017-12-01 UTC\"\n\n\nVeja que no exemplo acima, como tínhamos dia 28/11 e pedimos para arredondar na unidade “month”, ele arredondou para o mês 01/12.\nSe o dia fosse 14/11, a função arredondaria para 01/11.\n\n\n6.5.0.2 ceiling_date\nUse para “arredondar para cima” a data e hora para a unidade mais próxima.\n\nceiling_date(dt, unit=\"month\")\n\n[1] \"2017-12-01 UTC\""
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#imprimindo-data-e-hora",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#imprimindo-data-e-hora",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.6 Imprimindo data e hora",
    "text": "6.6 Imprimindo data e hora\nEm alguns casos, desejamos imprimir um objeto data e hora de uma maneira específica e/ou mais amigável. O pacote lubridate tem a capacidade de utilizar “templates” e ainda permite modificá-los para customizar como a impressão do objeto será feita.\n\n6.6.0.1 stamp\nUse para criar um “template” mais amigável à partir de uma string de exemplo. Veja também as função stamp_date() e stamp_time() que são funções específicas para lidar com datas e horas respectivamente.\nEm geral criamos uma função que utiliza a função stamp() e depois a utilizamos em nosso script passando o objeto data e hora. Veja este exemplo:\n\nsf <- stamp(\"Criado terça-feira, 17 de janeiro de 2022 às 3:34\") \nsf(ymd(\"2020-04-05\"))\n\n[1] \"Criado domingo-feira, 05 de abril de 2020 às 00:00\"\n\n\n\n\n\n\n\n\nDica\n\n\n\nProcure usar o dia maior que 12 na hora de criar o template. Isto facilita para função distinguir que parte do template é o mês e qual parte é o dia."
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#fuso-horários",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#fuso-horários",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.7 Fuso-Horários",
    "text": "6.7 Fuso-Horários\nO R reconhece ~600 fuso-horários. Cada um deles, tem iformações sobre o fuso-horário, horário de verão e variações de calendário históricas de uma área. O R define apenas um fuso-horário por vetor.\nUse o fuso=horário “UTC” para evitar horários-de-verão nos objetos.\nPara obter uma lista dos fuso-horários disponíveis, use:\n\nOlsonNames()\n\n  [1] \"Africa/Abidjan\"                   \"Africa/Accra\"                    \n  [3] \"Africa/Addis_Ababa\"               \"Africa/Algiers\"                  \n  [5] \"Africa/Asmara\"                    \"Africa/Asmera\"                   \n  [7] \"Africa/Bamako\"                    \"Africa/Bangui\"                   \n  [9] \"Africa/Banjul\"                    \"Africa/Bissau\"                   \n [11] \"Africa/Blantyre\"                  \"Africa/Brazzaville\"              \n [13] \"Africa/Bujumbura\"                 \"Africa/Cairo\"                    \n [15] \"Africa/Casablanca\"                \"Africa/Ceuta\"                    \n [17] \"Africa/Conakry\"                   \"Africa/Dakar\"                    \n [19] \"Africa/Dar_es_Salaam\"             \"Africa/Djibouti\"                 \n [21] \"Africa/Douala\"                    \"Africa/El_Aaiun\"                 \n [23] \"Africa/Freetown\"                  \"Africa/Gaborone\"                 \n [25] \"Africa/Harare\"                    \"Africa/Johannesburg\"             \n [27] \"Africa/Juba\"                      \"Africa/Kampala\"                  \n [29] \"Africa/Khartoum\"                  \"Africa/Kigali\"                   \n [31] \"Africa/Kinshasa\"                  \"Africa/Lagos\"                    \n [33] \"Africa/Libreville\"                \"Africa/Lome\"                     \n [35] \"Africa/Luanda\"                    \"Africa/Lubumbashi\"               \n [37] \"Africa/Lusaka\"                    \"Africa/Malabo\"                   \n [39] \"Africa/Maputo\"                    \"Africa/Maseru\"                   \n [41] \"Africa/Mbabane\"                   \"Africa/Mogadishu\"                \n [43] \"Africa/Monrovia\"                  \"Africa/Nairobi\"                  \n [45] \"Africa/Ndjamena\"                  \"Africa/Niamey\"                   \n [47] \"Africa/Nouakchott\"                \"Africa/Ouagadougou\"              \n [49] \"Africa/Porto-Novo\"                \"Africa/Sao_Tome\"                 \n [51] \"Africa/Timbuktu\"                  \"Africa/Tripoli\"                  \n [53] \"Africa/Tunis\"                     \"Africa/Windhoek\"                 \n [55] \"America/Adak\"                     \"America/Anchorage\"               \n [57] \"America/Anguilla\"                 \"America/Antigua\"                 \n [59] \"America/Araguaina\"                \"America/Argentina/Buenos_Aires\"  \n [61] \"America/Argentina/Catamarca\"      \"America/Argentina/ComodRivadavia\"\n [63] \"America/Argentina/Cordoba\"        \"America/Argentina/Jujuy\"         \n [65] \"America/Argentina/La_Rioja\"       \"America/Argentina/Mendoza\"       \n [67] \"America/Argentina/Rio_Gallegos\"   \"America/Argentina/Salta\"         \n [69] \"America/Argentina/San_Juan\"       \"America/Argentina/San_Luis\"      \n [71] \"America/Argentina/Tucuman\"        \"America/Argentina/Ushuaia\"       \n [73] \"America/Aruba\"                    \"America/Asuncion\"                \n [75] \"America/Atikokan\"                 \"America/Atka\"                    \n [77] \"America/Bahia\"                    \"America/Bahia_Banderas\"          \n [79] \"America/Barbados\"                 \"America/Belem\"                   \n [81] \"America/Belize\"                   \"America/Blanc-Sablon\"            \n [83] \"America/Boa_Vista\"                \"America/Bogota\"                  \n [85] \"America/Boise\"                    \"America/Buenos_Aires\"            \n [87] \"America/Cambridge_Bay\"            \"America/Campo_Grande\"            \n [89] \"America/Cancun\"                   \"America/Caracas\"                 \n [91] \"America/Catamarca\"                \"America/Cayenne\"                 \n [93] \"America/Cayman\"                   \"America/Chicago\"                 \n [95] \"America/Chihuahua\"                \"America/Coral_Harbour\"           \n [97] \"America/Cordoba\"                  \"America/Costa_Rica\"              \n [99] \"America/Creston\"                  \"America/Cuiaba\"                  \n[101] \"America/Curacao\"                  \"America/Danmarkshavn\"            \n[103] \"America/Dawson\"                   \"America/Dawson_Creek\"            \n[105] \"America/Denver\"                   \"America/Detroit\"                 \n[107] \"America/Dominica\"                 \"America/Edmonton\"                \n[109] \"America/Eirunepe\"                 \"America/El_Salvador\"             \n[111] \"America/Ensenada\"                 \"America/Fort_Nelson\"             \n[113] \"America/Fort_Wayne\"               \"America/Fortaleza\"               \n[115] \"America/Glace_Bay\"                \"America/Godthab\"                 \n[117] \"America/Goose_Bay\"                \"America/Grand_Turk\"              \n[119] \"America/Grenada\"                  \"America/Guadeloupe\"              \n[121] \"America/Guatemala\"                \"America/Guayaquil\"               \n[123] \"America/Guyana\"                   \"America/Halifax\"                 \n[125] \"America/Havana\"                   \"America/Hermosillo\"              \n[127] \"America/Indiana/Indianapolis\"     \"America/Indiana/Knox\"            \n[129] \"America/Indiana/Marengo\"          \"America/Indiana/Petersburg\"      \n[131] \"America/Indiana/Tell_City\"        \"America/Indiana/Vevay\"           \n[133] \"America/Indiana/Vincennes\"        \"America/Indiana/Winamac\"         \n[135] \"America/Indianapolis\"             \"America/Inuvik\"                  \n[137] \"America/Iqaluit\"                  \"America/Jamaica\"                 \n[139] \"America/Jujuy\"                    \"America/Juneau\"                  \n[141] \"America/Kentucky/Louisville\"      \"America/Kentucky/Monticello\"     \n[143] \"America/Knox_IN\"                  \"America/Kralendijk\"              \n[145] \"America/La_Paz\"                   \"America/Lima\"                    \n[147] \"America/Los_Angeles\"              \"America/Louisville\"              \n[149] \"America/Lower_Princes\"            \"America/Maceio\"                  \n[151] \"America/Managua\"                  \"America/Manaus\"                  \n[153] \"America/Marigot\"                  \"America/Martinique\"              \n[155] \"America/Matamoros\"                \"America/Mazatlan\"                \n[157] \"America/Mendoza\"                  \"America/Menominee\"               \n[159] \"America/Merida\"                   \"America/Metlakatla\"              \n[161] \"America/Mexico_City\"              \"America/Miquelon\"                \n[163] \"America/Moncton\"                  \"America/Monterrey\"               \n[165] \"America/Montevideo\"               \"America/Montreal\"                \n[167] \"America/Montserrat\"               \"America/Nassau\"                  \n[169] \"America/New_York\"                 \"America/Nipigon\"                 \n[171] \"America/Nome\"                     \"America/Noronha\"                 \n[173] \"America/North_Dakota/Beulah\"      \"America/North_Dakota/Center\"     \n[175] \"America/North_Dakota/New_Salem\"   \"America/Nuuk\"                    \n[177] \"America/Ojinaga\"                  \"America/Panama\"                  \n[179] \"America/Pangnirtung\"              \"America/Paramaribo\"              \n[181] \"America/Phoenix\"                  \"America/Port_of_Spain\"           \n[183] \"America/Port-au-Prince\"           \"America/Porto_Acre\"              \n[185] \"America/Porto_Velho\"              \"America/Puerto_Rico\"             \n[187] \"America/Punta_Arenas\"             \"America/Rainy_River\"             \n[189] \"America/Rankin_Inlet\"             \"America/Recife\"                  \n[191] \"America/Regina\"                   \"America/Resolute\"                \n[193] \"America/Rio_Branco\"               \"America/Rosario\"                 \n[195] \"America/Santa_Isabel\"             \"America/Santarem\"                \n[197] \"America/Santiago\"                 \"America/Santo_Domingo\"           \n[199] \"America/Sao_Paulo\"                \"America/Scoresbysund\"            \n[201] \"America/Shiprock\"                 \"America/Sitka\"                   \n[203] \"America/St_Barthelemy\"            \"America/St_Johns\"                \n[205] \"America/St_Kitts\"                 \"America/St_Lucia\"                \n[207] \"America/St_Thomas\"                \"America/St_Vincent\"              \n[209] \"America/Swift_Current\"            \"America/Tegucigalpa\"             \n[211] \"America/Thule\"                    \"America/Thunder_Bay\"             \n[213] \"America/Tijuana\"                  \"America/Toronto\"                 \n[215] \"America/Tortola\"                  \"America/Vancouver\"               \n[217] \"America/Virgin\"                   \"America/Whitehorse\"              \n[219] \"America/Winnipeg\"                 \"America/Yakutat\"                 \n[221] \"America/Yellowknife\"              \"Antarctica/Casey\"                \n[223] \"Antarctica/Davis\"                 \"Antarctica/DumontDUrville\"       \n[225] \"Antarctica/Macquarie\"             \"Antarctica/Mawson\"               \n[227] \"Antarctica/McMurdo\"               \"Antarctica/Palmer\"               \n[229] \"Antarctica/Rothera\"               \"Antarctica/South_Pole\"           \n[231] \"Antarctica/Syowa\"                 \"Antarctica/Troll\"                \n[233] \"Antarctica/Vostok\"                \"Arctic/Longyearbyen\"             \n[235] \"Asia/Aden\"                        \"Asia/Almaty\"                     \n[237] \"Asia/Amman\"                       \"Asia/Anadyr\"                     \n[239] \"Asia/Aqtau\"                       \"Asia/Aqtobe\"                     \n[241] \"Asia/Ashgabat\"                    \"Asia/Ashkhabad\"                  \n[243] \"Asia/Atyrau\"                      \"Asia/Baghdad\"                    \n[245] \"Asia/Bahrain\"                     \"Asia/Baku\"                       \n[247] \"Asia/Bangkok\"                     \"Asia/Barnaul\"                    \n[249] \"Asia/Beirut\"                      \"Asia/Bishkek\"                    \n[251] \"Asia/Brunei\"                      \"Asia/Calcutta\"                   \n[253] \"Asia/Chita\"                       \"Asia/Choibalsan\"                 \n[255] \"Asia/Chongqing\"                   \"Asia/Chungking\"                  \n[257] \"Asia/Colombo\"                     \"Asia/Dacca\"                      \n[259] \"Asia/Damascus\"                    \"Asia/Dhaka\"                      \n[261] \"Asia/Dili\"                        \"Asia/Dubai\"                      \n[263] \"Asia/Dushanbe\"                    \"Asia/Famagusta\"                  \n[265] \"Asia/Gaza\"                        \"Asia/Harbin\"                     \n[267] \"Asia/Hebron\"                      \"Asia/Ho_Chi_Minh\"                \n[269] \"Asia/Hong_Kong\"                   \"Asia/Hovd\"                       \n[271] \"Asia/Irkutsk\"                     \"Asia/Istanbul\"                   \n[273] \"Asia/Jakarta\"                     \"Asia/Jayapura\"                   \n[275] \"Asia/Jerusalem\"                   \"Asia/Kabul\"                      \n[277] \"Asia/Kamchatka\"                   \"Asia/Karachi\"                    \n[279] \"Asia/Kashgar\"                     \"Asia/Kathmandu\"                  \n[281] \"Asia/Katmandu\"                    \"Asia/Khandyga\"                   \n[283] \"Asia/Kolkata\"                     \"Asia/Krasnoyarsk\"                \n[285] \"Asia/Kuala_Lumpur\"                \"Asia/Kuching\"                    \n[287] \"Asia/Kuwait\"                      \"Asia/Macao\"                      \n[289] \"Asia/Macau\"                       \"Asia/Magadan\"                    \n[291] \"Asia/Makassar\"                    \"Asia/Manila\"                     \n[293] \"Asia/Muscat\"                      \"Asia/Nicosia\"                    \n[295] \"Asia/Novokuznetsk\"                \"Asia/Novosibirsk\"                \n[297] \"Asia/Omsk\"                        \"Asia/Oral\"                       \n[299] \"Asia/Phnom_Penh\"                  \"Asia/Pontianak\"                  \n[301] \"Asia/Pyongyang\"                   \"Asia/Qatar\"                      \n[303] \"Asia/Qostanay\"                    \"Asia/Qyzylorda\"                  \n[305] \"Asia/Rangoon\"                     \"Asia/Riyadh\"                     \n[307] \"Asia/Saigon\"                      \"Asia/Sakhalin\"                   \n[309] \"Asia/Samarkand\"                   \"Asia/Seoul\"                      \n[311] \"Asia/Shanghai\"                    \"Asia/Singapore\"                  \n[313] \"Asia/Srednekolymsk\"               \"Asia/Taipei\"                     \n[315] \"Asia/Tashkent\"                    \"Asia/Tbilisi\"                    \n[317] \"Asia/Tehran\"                      \"Asia/Tel_Aviv\"                   \n[319] \"Asia/Thimbu\"                      \"Asia/Thimphu\"                    \n[321] \"Asia/Tokyo\"                       \"Asia/Tomsk\"                      \n[323] \"Asia/Ujung_Pandang\"               \"Asia/Ulaanbaatar\"                \n[325] \"Asia/Ulan_Bator\"                  \"Asia/Urumqi\"                     \n[327] \"Asia/Ust-Nera\"                    \"Asia/Vientiane\"                  \n[329] \"Asia/Vladivostok\"                 \"Asia/Yakutsk\"                    \n[331] \"Asia/Yangon\"                      \"Asia/Yekaterinburg\"              \n[333] \"Asia/Yerevan\"                     \"Atlantic/Azores\"                 \n[335] \"Atlantic/Bermuda\"                 \"Atlantic/Canary\"                 \n[337] \"Atlantic/Cape_Verde\"              \"Atlantic/Faeroe\"                 \n[339] \"Atlantic/Faroe\"                   \"Atlantic/Jan_Mayen\"              \n[341] \"Atlantic/Madeira\"                 \"Atlantic/Reykjavik\"              \n[343] \"Atlantic/South_Georgia\"           \"Atlantic/St_Helena\"              \n[345] \"Atlantic/Stanley\"                 \"Australia/ACT\"                   \n[347] \"Australia/Adelaide\"               \"Australia/Brisbane\"              \n[349] \"Australia/Broken_Hill\"            \"Australia/Canberra\"              \n[351] \"Australia/Currie\"                 \"Australia/Darwin\"                \n[353] \"Australia/Eucla\"                  \"Australia/Hobart\"                \n[355] \"Australia/LHI\"                    \"Australia/Lindeman\"              \n[357] \"Australia/Lord_Howe\"              \"Australia/Melbourne\"             \n[359] \"Australia/North\"                  \"Australia/NSW\"                   \n[361] \"Australia/Perth\"                  \"Australia/Queensland\"            \n[363] \"Australia/South\"                  \"Australia/Sydney\"                \n[365] \"Australia/Tasmania\"               \"Australia/Victoria\"              \n[367] \"Australia/West\"                   \"Australia/Yancowinna\"            \n[369] \"Brazil/Acre\"                      \"Brazil/DeNoronha\"                \n[371] \"Brazil/East\"                      \"Brazil/West\"                     \n[373] \"Canada/Atlantic\"                  \"Canada/Central\"                  \n[375] \"Canada/Eastern\"                   \"Canada/Mountain\"                 \n[377] \"Canada/Newfoundland\"              \"Canada/Pacific\"                  \n[379] \"Canada/Saskatchewan\"              \"Canada/Yukon\"                    \n[381] \"CET\"                              \"Chile/Continental\"               \n[383] \"Chile/EasterIsland\"               \"CST6CDT\"                         \n[385] \"Cuba\"                             \"EET\"                             \n[387] \"Egypt\"                            \"Eire\"                            \n[389] \"EST\"                              \"EST5EDT\"                         \n[391] \"Etc/GMT\"                          \"Etc/GMT-0\"                       \n[393] \"Etc/GMT-1\"                        \"Etc/GMT-10\"                      \n[395] \"Etc/GMT-11\"                       \"Etc/GMT-12\"                      \n[397] \"Etc/GMT-13\"                       \"Etc/GMT-14\"                      \n[399] \"Etc/GMT-2\"                        \"Etc/GMT-3\"                       \n[401] \"Etc/GMT-4\"                        \"Etc/GMT-5\"                       \n[403] \"Etc/GMT-6\"                        \"Etc/GMT-7\"                       \n[405] \"Etc/GMT-8\"                        \"Etc/GMT-9\"                       \n[407] \"Etc/GMT+0\"                        \"Etc/GMT+1\"                       \n[409] \"Etc/GMT+10\"                       \"Etc/GMT+11\"                      \n[411] \"Etc/GMT+12\"                       \"Etc/GMT+2\"                       \n[413] \"Etc/GMT+3\"                        \"Etc/GMT+4\"                       \n[415] \"Etc/GMT+5\"                        \"Etc/GMT+6\"                       \n[417] \"Etc/GMT+7\"                        \"Etc/GMT+8\"                       \n[419] \"Etc/GMT+9\"                        \"Etc/GMT0\"                        \n[421] \"Etc/Greenwich\"                    \"Etc/UCT\"                         \n[423] \"Etc/Universal\"                    \"Etc/UTC\"                         \n[425] \"Etc/Zulu\"                         \"Europe/Amsterdam\"                \n[427] \"Europe/Andorra\"                   \"Europe/Astrakhan\"                \n[429] \"Europe/Athens\"                    \"Europe/Belfast\"                  \n[431] \"Europe/Belgrade\"                  \"Europe/Berlin\"                   \n[433] \"Europe/Bratislava\"                \"Europe/Brussels\"                 \n[435] \"Europe/Bucharest\"                 \"Europe/Budapest\"                 \n[437] \"Europe/Busingen\"                  \"Europe/Chisinau\"                 \n[439] \"Europe/Copenhagen\"                \"Europe/Dublin\"                   \n[441] \"Europe/Gibraltar\"                 \"Europe/Guernsey\"                 \n[443] \"Europe/Helsinki\"                  \"Europe/Isle_of_Man\"              \n[445] \"Europe/Istanbul\"                  \"Europe/Jersey\"                   \n[447] \"Europe/Kaliningrad\"               \"Europe/Kiev\"                     \n[449] \"Europe/Kirov\"                     \"Europe/Lisbon\"                   \n[451] \"Europe/Ljubljana\"                 \"Europe/London\"                   \n[453] \"Europe/Luxembourg\"                \"Europe/Madrid\"                   \n[455] \"Europe/Malta\"                     \"Europe/Mariehamn\"                \n[457] \"Europe/Minsk\"                     \"Europe/Monaco\"                   \n[459] \"Europe/Moscow\"                    \"Europe/Nicosia\"                  \n[461] \"Europe/Oslo\"                      \"Europe/Paris\"                    \n[463] \"Europe/Podgorica\"                 \"Europe/Prague\"                   \n[465] \"Europe/Riga\"                      \"Europe/Rome\"                     \n[467] \"Europe/Samara\"                    \"Europe/San_Marino\"               \n[469] \"Europe/Sarajevo\"                  \"Europe/Saratov\"                  \n[471] \"Europe/Simferopol\"                \"Europe/Skopje\"                   \n[473] \"Europe/Sofia\"                     \"Europe/Stockholm\"                \n[475] \"Europe/Tallinn\"                   \"Europe/Tirane\"                   \n[477] \"Europe/Tiraspol\"                  \"Europe/Ulyanovsk\"                \n[479] \"Europe/Uzhgorod\"                  \"Europe/Vaduz\"                    \n[481] \"Europe/Vatican\"                   \"Europe/Vienna\"                   \n[483] \"Europe/Vilnius\"                   \"Europe/Volgograd\"                \n[485] \"Europe/Warsaw\"                    \"Europe/Zagreb\"                   \n[487] \"Europe/Zaporozhye\"                \"Europe/Zurich\"                   \n[489] \"Factory\"                          \"GB\"                              \n[491] \"GB-Eire\"                          \"GMT\"                             \n[493] \"GMT-0\"                            \"GMT+0\"                           \n[495] \"GMT0\"                             \"Greenwich\"                       \n[497] \"Hongkong\"                         \"HST\"                             \n[499] \"Iceland\"                          \"Indian/Antananarivo\"             \n[501] \"Indian/Chagos\"                    \"Indian/Christmas\"                \n[503] \"Indian/Cocos\"                     \"Indian/Comoro\"                   \n[505] \"Indian/Kerguelen\"                 \"Indian/Mahe\"                     \n[507] \"Indian/Maldives\"                  \"Indian/Mauritius\"                \n[509] \"Indian/Mayotte\"                   \"Indian/Reunion\"                  \n[511] \"Iran\"                             \"Israel\"                          \n[513] \"Jamaica\"                          \"Japan\"                           \n[515] \"Kwajalein\"                        \"Libya\"                           \n[517] \"MET\"                              \"Mexico/BajaNorte\"                \n[519] \"Mexico/BajaSur\"                   \"Mexico/General\"                  \n[521] \"MST\"                              \"MST7MDT\"                         \n[523] \"Navajo\"                           \"NZ\"                              \n[525] \"NZ-CHAT\"                          \"Pacific/Apia\"                    \n[527] \"Pacific/Auckland\"                 \"Pacific/Bougainville\"            \n[529] \"Pacific/Chatham\"                  \"Pacific/Chuuk\"                   \n[531] \"Pacific/Easter\"                   \"Pacific/Efate\"                   \n[533] \"Pacific/Enderbury\"                \"Pacific/Fakaofo\"                 \n[535] \"Pacific/Fiji\"                     \"Pacific/Funafuti\"                \n[537] \"Pacific/Galapagos\"                \"Pacific/Gambier\"                 \n[539] \"Pacific/Guadalcanal\"              \"Pacific/Guam\"                    \n[541] \"Pacific/Honolulu\"                 \"Pacific/Johnston\"                \n[543] \"Pacific/Kanton\"                   \"Pacific/Kiritimati\"              \n[545] \"Pacific/Kosrae\"                   \"Pacific/Kwajalein\"               \n[547] \"Pacific/Majuro\"                   \"Pacific/Marquesas\"               \n[549] \"Pacific/Midway\"                   \"Pacific/Nauru\"                   \n[551] \"Pacific/Niue\"                     \"Pacific/Norfolk\"                 \n[553] \"Pacific/Noumea\"                   \"Pacific/Pago_Pago\"               \n[555] \"Pacific/Palau\"                    \"Pacific/Pitcairn\"                \n[557] \"Pacific/Pohnpei\"                  \"Pacific/Ponape\"                  \n[559] \"Pacific/Port_Moresby\"             \"Pacific/Rarotonga\"               \n[561] \"Pacific/Saipan\"                   \"Pacific/Samoa\"                   \n[563] \"Pacific/Tahiti\"                   \"Pacific/Tarawa\"                  \n[565] \"Pacific/Tongatapu\"                \"Pacific/Truk\"                    \n[567] \"Pacific/Wake\"                     \"Pacific/Wallis\"                  \n[569] \"Pacific/Yap\"                      \"Poland\"                          \n[571] \"Portugal\"                         \"PRC\"                             \n[573] \"PST8PDT\"                          \"ROC\"                             \n[575] \"ROK\"                              \"Singapore\"                       \n[577] \"Turkey\"                           \"UCT\"                             \n[579] \"Universal\"                        \"US/Alaska\"                       \n[581] \"US/Aleutian\"                      \"US/Arizona\"                      \n[583] \"US/Central\"                       \"US/East-Indiana\"                 \n[585] \"US/Eastern\"                       \"US/Hawaii\"                       \n[587] \"US/Indiana-Starke\"                \"US/Michigan\"                     \n[589] \"US/Mountain\"                      \"US/Pacific\"                      \n[591] \"US/Samoa\"                         \"UTC\"                             \n[593] \"W-SU\"                             \"WET\"                             \n[595] \"Zulu\"                            \n\n\n\n6.7.0.1 Sys.timezone\nUse para obter o fuso-horário atual, use:\n\nSys.timezone()\n\n[1] \"America/Sao_Paulo\"\n\n\n\n\n6.7.0.2 with_tz\nUse para obter o mesmo objeto data e hora em um novo fuso-horário (novo relógio).\n\nwith_tz(dt, tzone = \"US/Alaska\")\n\n[1] \"2017-11-28 03:00:00 AKST\"\n\n\n\n\n6.7.0.3 local_time\nPara saber a diferença entre fuso-horários, podemos usar a função local_time e definir a unidade. Por exemplo:\n\nlocal_time(dt, tz = \"US/Alaska\", units = \"hours\")\n\nTime difference of 3 hours\n\n\n\n\n6.7.0.4 force_tz\nUse para obter o mesmo objeto data e hora em um novo fuso-horário (novo data e hora).\n\nforce_tz(dt, \"US/Pacific\")\n\n[1] \"2017-11-28 12:00:00 PST\""
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#matemática-com-data-e-hora",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#matemática-com-data-e-hora",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.8 Matemática com Data e Hora",
    "text": "6.8 Matemática com Data e Hora\n\n6.8.1 Introdução\nO pacote lubridate fornece três classes de intervalo de tempo para fazer cálculos com data e hora.\n\nPeríodos: Acompanham mudanças no horário do relógio, isto ignora irregularidades na “linha do tempo”.\nDurações: Acompanham a passagem do “tempo físico”, o que diverge do horário do relógio quando irregularidades na “linha do tempo” acontecem.\nIntervalos: Representam um intervalo específico da “linha do tempo”, limitado pelo início e fim da data e hora.\n\nEste três formas de enchergam a “linha do tempo” é necessário pois cálculos de data e hora usando a “linha do tempo” são inconsistentes.\nSabemos que nem todos os anos têm 365 dias, com no caso do ano bi-sexto. Ou no caso de minutos de um retorno do horário de verão tem 60 segundos.\nPense nos seguintes cenários:\nSe tivermos um dia normal, a “linha do tempo” ficaria algo como:\n\n\nnor <- ymd_hms(\"2018-01-01 01:30:00\",tz=\"US/Eastern\") \nprint(nor)\n\n[1] \"2018-01-01 01:30:00 EST\"\n\n\nJá, quando o horário de verão se inicia, termos o seguinte cenário na linha do tempo:\n\n\ngap <- ymd_hms(\"2018-03-11 01:30:00\",tz=\"US/Eastern\")\n\nQuando o horário então se encerra, temos na linha do tempo este cenário:\n\n\nlap <- ymd_hms(\"2018-11-04 00:30:00\",tz=\"US/Eastern\")\n\nE ainda temos o “ano-bisexto”, que também causa inconsistência na linha do tempo:\n\n\nleap <- ymd(\"2019-03-01\")\n\nPara os casos acima, criamos quarto objetos data e hora: nor, gap, lap e leap para representar cada cenário de inconsistência na linha do tempo.\nAgora veremos com as três classes do lubridate citadas anteriormente reagem em cada situação:\n\n\n6.8.2 Períodos\nVimos que os períodos acompanham as mudanças no horário do relógio, isto ignora irregularidades na “linha do tempo”.\nPor exemplo, se quisermos adicionar 90 minutos ao objeto nor criado anteriormente, teremos:\n\nnor + minutes(90)\n\n[1] \"2018-01-01 03:00:00 EST\"\n\n\n\nJá, se quisermos adicionar 90 minutos no dia do início do horário de verão (objeto gap), teremos:\n\ngap + minutes(90)\n\n[1] \"2018-03-11 03:00:00 EDT\"\n\n\n\nVeja que o período ignorou a inconsistência na linha do linha e trouxe o resultado como ela não existisse.\nO mesmo aconteceria com a data e hora do objeto lap criado no fim do horário de verão:\n\nlap + minutes(90)\n\n[1] \"2018-11-04 02:00:00 EST\"\n\n\n\nSituação identica aconteceria para o objeto leap criado em ano bisexto. Por exemplo, digamos que queremos somar um período de 1 ano.\n\nleap + years(1)\n\n[1] \"2020-03-01\"\n\n\n\nAs funções de períodos para adicionar ou subtrair data e hora, tem o nome da unidade seguido de um “s”. Nos exemplos anterior somamos minutos usando minutes() e anos usando years().\nA lista abaixo traz as funções que criam objetos períodos, ou sejam, que modelam eventos que acontecem em horário específico do relógio.\nPodemos utilzar estes objetos para somar ou subtrair de objetos data ae hora.\n\n\n\nFunção\nObjeto Período\n\n\n\n\nyears(x = 1)\nx anos\n\n\nmonths(x)\nx meses\n\n\nweeks(x = 1)\nx semanas\n\n\ndays(x = 1)\nx dias\n\n\nhours(x = 1)\nx horas\n\n\nminutes(x = 1)\nx minutos\n\n\nseconds(x = 1)\nx segundos\n\n\nmilliseconds(x = 1)\nx milisegundos\n\n\nmicroseconds(x = 1)\nx microsegundos\n\n\nnanoseconds(x = 1)\nx nanosegundos\n\n\npicoseconds(x = 1)\nx picosegundos\n\n\n\nPor exemplo, se quisermos criar um objeto período com 3 meses e 12 dias, fazemos:\n\np <- months(3) + days(12)\np\n\n[1] \"3m 12d 0H 0M 0S\"\n\n\nPara subtrair este período de um objeto data e hora, fazemos:\n\ndt - p\n\n[1] \"2017-08-16 12:00:00 UTC\"\n\n\nPodemos também usar as funções abaixo para criar objetos período:\n\n6.8.2.1 period\nUse para automatizar a criação de períodos.\nPor exemplo, para criar um objeto com período de 5 anos, podemos usar years(5) ou:\n\nperiod(5, unit = \"years\")\n\n[1] \"5y 0m 0d 0H 0M 0S\"\n\n\n\n\n6.8.2.2 as.period\nUse para transformar objetos de duração, intervalos e números para obejtos do tipo período:\nPor exemplos, temos um número 5 e queremos criar um período de 5 dias, podemos fazer:\n\nas.period(5, unit=\"days\")\n\n[1] \"5d 0H 0M 0S\"\n\n\n\n\n6.8.2.3 period_to_seconds\nUse para transformar um objeto do tipo período no total de número de segundos do período:\n\nperiod_to_seconds(p)\n\n[1] 8926200\n\n\n\n\n\n6.8.3 Duração\nDiferentes dos objetos períodos, os objetos do tipo duração (duration), Acompanham a passagem do “tempo físico”, o que diverge do horário do relógio quando irregularidades na “linha do tempo” acontecem.\nPor exemplo, digamos que temos nosso “dia normal” na linha do tempo e adicionarmos 90 minutos de duração:\n\nnor + dminutes(90)\n\n[1] \"2018-01-01 03:00:00 EST\"\n\n\n\nAté aqui, o resultado foi similar à adicionarmos um objeto do tipo período de 90 minutes.\nPorém, veja o que acontece quando temos uma inconsistência na linha do tempo, como por exemplo nosso início de horário de verão em nosso objeto gap.\n\ngap + dminutes(90)\n\n[1] \"2018-03-11 04:00:00 EDT\"\n\n\n\nO mesmo acontece com nosso término de horário de verão em nosso objeto lap:\n\nlap + dminutes(90)\n\n[1] \"2018-11-04 01:00:00 EST\"\n\n\n\nOu mesmo com nosso ano bi-sexto:\n\nleap\n\n[1] \"2019-03-01\"\n\nleap + dyears(1)\n\n[1] \"2020-02-29 06:00:00 UTC\"\n\n\n\nPodemos pensar em objetos de duração como um modelo físico, como uma vida útil de uma bateria. As durações são armazenados como segundos, que é a única unidade distância consistente.\nPor exemplo, se criarmos um objeto duração equivalente à 14 dias, ele irá armazenar 1209600s.\n\ndd <- ddays(14)\ndd\n\n[1] \"1209600s (~2 weeks)\"\n\n\n\n\n\n\n\n\nDica\n\n\n\nHá também uma classe chamada “difftime”, que se encontra no R base, ou seja, fora do pacote lubridate, usada para lidar com durações de tempo.\n\n\nAs funções para criar objetos de duração, são similares às dos objetos períodos, porém se iniciam com a letra “d”, veja:\n\nPodemos também usar as funções abaixo para criar objetos duração:\n\n\nFunção\nObjeto Duração\n\n\n\n\ndyears(x = 1)\n31536000x anos\n\n\ndmonths(x)\n2629800x meses\n\n\ndweeks(x = 1)\n604800x semanas\n\n\nddays(x = 1)\nx86400x dias\n\n\ndhours(x = 1)\n3600x horas\n\n\ndminutes(x = 1)\n60x minutos\n\n\ndseconds(x = 1)\nx segundos\n\n\ndmilliseconds(x = 1)\nx X \\(10^3\\) milisegundos\n\n\ndmicroseconds(x = 1)\nx X \\(10^6\\) microsegundos\n\n\ndnanoseconds(x = 1)\nx X \\(10^9\\) nanosegundos\n\n\ndpicoseconds(x = 1)\nx X \\(10 ^{12}\\)picosegundos\n\n\n\n\n6.8.3.1 duration\nUse para automatizar a criação de durações.\nPor exemplo, para criar um objeto com duração de 5 anos, podemos usar dyears(5) ou:\n\nduration(5, unit = \"years\")\n\n[1] \"157788000s (~5 years)\"\n\n\n\n\n6.8.3.2 as.duration\nUse para transformar objetos de períodos, intervalos e números para objetos do tipo duração:\nPor exemplos, temos um número 10 e queremos criar um período de 10 segundos, podemos fazer:\n\nas.duration(10)\n\n[1] \"10s\"\n\n\n\n\n6.8.3.3 make_difftime\nUse para criar um objeto difftime (R base) com um número específico de unidades.\n\nmake_difftime(3600)\n\nTime difference of 1 hours\n\n\n\n\n\n6.8.4 Intervalo\nObjeto do tipo intervalo, representam um intervalo específico da “linha do tempo”, limitado pelo início e fim da data e hora. Se dividirmor o intervalo, pela pela duração teremos a distância física do tempo. Se dividirmos o intervalo pelo período, termeos a distância relativa ao relógio.\nPodemos criar um objeto de intervalo, usando a função interval() ou o símbolo %--%.\n\ni <- interval(ymd(\"2017-01-01\"), d)\nj <- d %--% ymd(\"2017-12-31\")\ni; j\n\n[1] 2017-01-01 UTC--2017-11-01 UTC\n\n\n[1] 2017-11-01 UTC--2017-12-31 UTC\n\n\nObserve pelo resultado acima, temos duas data para cada objeto, a da esquerda representa o início do intervalo e a da direito o fim.\nPor exemplo, vamos pegar um dia normal na linha do tempo, representado pelo objeto nor e definirmos como o início do intervalo, e para o fim do intervalo usaremos nor mais um período de 90 minutos.\n\ninterval(nor, nor + minutes(90))\n\n[1] 2018-01-01 01:30:00 EST--2018-01-01 03:00:00 EST\n\n\n\nAgora, em uma linha do tempo inconsistente, o intervalo se mantém alinhado com o relógio. Veja como fica quando adicionamos um intervalo de 90 minutos quando temos o início de um horário de verão:\n\ninterval(gap, gap+minutes(90))\n\n[1] 2018-03-11 01:30:00 EST--2018-03-11 03:00:00 EDT\n\n\n\nDe forma similar, ocorre quando temos um intervalo quando há o término de um horário de verão:\n\ninterval(lap, lap+minutes(90))\n\n[1] 2018-11-04 00:30:00 EDT--2018-11-04 02:00:00 EST\n\n\n\nOu mesmo quando temos um intervalo em um ano bi-sexto:\n\ninterval(leap, leap + years(1))\n\n[1] 2019-03-01 UTC--2020-03-01 UTC\n\n\n\nO pacote lubridate possui diversas funções para lidar com intervalo.\n\n6.8.4.1 %within%\nUse para identificar se um objeto do tipo intervalo ou data e hora “a” cai dentro de um interválo “b”\nPor exemplo, se quisermos se a data e hora atual está dentro do intervalo “i”.\n\nnow () %within% i\n\n[1] FALSE\n\n\n\n\n6.8.4.2 int_start\nUse para obter ou definir o início de um intervalo:\n\nint_start(i)\n\n[1] \"2017-01-01 UTC\"\n\n\n\nint_start(i) <- now()\n\n\n\n\n\n\n\nNota\n\n\n\nA função int_end() faz o oposto, ou seja, obtem ou define o fim de um intervalo.\n\n\nint_aligns\nUse para identificar se dois objetos do tipo intervalo estão alinhados, ou seja, compartilham de uma mesma data e hora.\n\nint_aligns(i,j)\n\n[1] TRUE\n\n\nNo exemplo acima, temos “2017-11-28” como início de um objeto e fim de outro, por isso dizemos que eles estão alinhados.\n\n\n\n\n\n\nNota\n\n\n\nSe quisermos saber se estes objetos estão sobrepostos, ou seja, tem partes de uma intervá-lo que também fazem parte de outro, utilizamos a função int_overlaps().\n\n\n\n\n6.8.4.3 int_diff\nUse para transformar em intervalos, os valores que estão em um vetor de data e hora.\n\nv <- c(dt, dt+100, dt+1000); int_diff(v)\n\n[1] 2017-11-28 12:00:00 UTC--2017-11-28 12:01:40 UTC\n[2] 2017-11-28 12:01:40 UTC--2017-11-28 12:16:40 UTC\n\n\nint_flip\nUse para colocar em ordem reversa a direção de um intervalo, ou seja, a dat e hora do fim vai para o início do intervalo e a data e hora do início vai para o final.\n\nint_flip(i)\n\n[1] 2017-11-01 UTC--2022-08-24 22:17:39 UTC\n\n\nPara colocar em ordem padrão um intervalo de acordo com a linha do tempo, podemos usar a função int_standardize().\n\nint_standardize(i)\n\n[1] 2017-11-01 UTC--2022-08-24 22:17:39 UTC\n\n\n\n\n6.8.4.4 int_length\nUse para obter, em segundos, o tempo total de um intervalo:\n\nint_length(i)\n\n[1] -151885060\n\n\n\n\n6.8.4.5 int_shift\nUse para mover um intervalo para mais ou para menos na linha do tempo.\nPor exemplo, se mover todo o intervalo (início e fim) em um dia antes da linha do tempo, podemos fazer:\n\nint_shift(i, days(-1))\n\n[1] 2022-08-23 19:17:39 -03--2017-10-30 22:00:00 -02\n\n\n\n\n6.8.4.6 as.interval\nUse para criar um objeto intervalo com determinado periodo definindo uma dat e hora de início.\nPor exemplo, para criarmos um intervalo de 1 dia, iniciando na data atual, podemos fazer:\n\nas.interval(days(1), start = now())\n\n[1] 2022-08-24 19:17:39 -03--2022-08-25 19:17:39 -03\n\n\n\n\n\n\n\n\nNota\n\n\n\nPodemos usar a função is.interval() para saber se um objeto é um intervalo válido ou não."
  },
  {
    "objectID": "DataHora/Datas_e_horas_com_lubridate.html#datas-imaginárias",
    "href": "DataHora/Datas_e_horas_com_lubridate.html#datas-imaginárias",
    "title": "6  Datas e horas com LUBRIDATE",
    "section": "6.9 Datas Imaginárias",
    "text": "6.9 Datas Imaginárias\nÉ importante observar que nem todos os anos tem 365 dias (ex: ano bi-sexto) e nem todos os minutos tem 60 segundos (ex: fim de horário de verão).\nIsso é importante de ser observado, pois em alguns casos tentamos criar data imaginárias, como por exemplo “Fev 31”, adicionando um mês à “Jan 31”. As funções do pacote lubridate são inteligentes o suficiente e neste caso retornaria um valor NA:\n\n\njan31 <- ymd(20180131)\njan31 + months(1)\n\n[1] NA\n\n\n\n6.9.1 Aritmética dos meses\nPorém, as vezes, intuitivamente, é isto que desejamos fazer, ou seja, adicionar “um mês” a “Jan 31”, mas que a função seja inteligente o suficiente para rolar para o último dia do mês.\nAdicionar ou subtrair meses as vezes é uma tarefa difícil, pois temos meses de diferentes tamanhos (ex: 30, 31, 28 dias ou até 29). Por isso, em alguns casos é útil termos a possibildade de fazermos um ajustes automáticos.\nPara isso usamos, ao invés do sinal de adição “+”, utilizamos o símbolo %m+% para adicionar meses (ou %m-% para subtrair). Veja:\n\njan31 %m+% months(1)\n\n[1] \"2018-02-28\"\n\n\nA função add_with_rollback() nos permite rolar a data da soma para o primeiro dia do mês seguinte (e não o último dia do mês anterior) usando o argumento roll_to_first.\n\nadd_with_rollback(jan31, months(1), roll_to_first = TRUE)\n\n[1] \"2018-03-01\""
  },
  {
    "objectID": "Organizacao/Organizacao_de_dados_com_tidyr.html",
    "href": "Organizacao/Organizacao_de_dados_com_tidyr.html",
    "title": "3  Organização de Dados com TIDYR",
    "section": "",
    "text": "A seguir temos vários exemplos de organização de dados utilizando o pacote TIDYR do R. Para saber mais sobre este pacote, acesse:\nhttps://cran.r-project.org/package=tidyr.\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\nPara os exemplos, iremos carregar os seguintes pacotes:\n\ntidyverse\ngt\n\n\nlibrary (tidyverse)\nlibrary (gt)\n\n\n\nA maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na Folha de Referência do tidyr disponível no site do RStudio.\n\n\n\nPara a maioria dos exemplos utilizaremos as bases de dados mtcars, storms e starwars provenientes do pacote datasets e dplyr e também algumas tabelas (Table1, 2, 3, 4a, 4b e 5) que vem com o pacote tidyr.\n\n\n\n\n\n\nNota\n\n\n\nEm geral, ao final de cada comando, você verá a chamada à função gt(). Isto é apenas para a formatação da tabela de saída e não é necessário para que você entenda os comandos precedentes. Em alguns casos, onde o volume de dados de saída pode ser extenso, usamos também a função head() para mostrar apenas as linhas iniciais. Quando o exemplo possui muitas colunas de saída, eventualmente utilizamos a função select() para selecionar apenas algumas colunas.\n\n\n\nMTCARS: Dados de consumo de combustível, performance e design de 32 automóveis ( 1974 Motor Trend US magazine)\n\nmtcars |> \n  head () |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n  \n\n\n\n\n\nSTORMS: Dados de furacões entre 1975-2020 medidos a cada 6 horas durante cada tempestade ( NOAA Atlantic hurricane database ),\n\nstorms |> \n  head () |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      year\n      month\n      day\n      hour\n      lat\n      long\n      status\n      category\n      wind\n      pressure\n      tropicalstorm_force_diameter\n      hurricane_force_diameter\n    \n  \n  \n    Amy\n1975\n6\n27\n0\n27.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    Amy\n1975\n6\n27\n6\n28.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    Amy\n1975\n6\n27\n12\n29.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    Amy\n1975\n6\n27\n18\n30.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    Amy\n1975\n6\n28\n0\n31.5\n-78.8\ntropical depression\n-1\n25\n1012\nNA\nNA\n    Amy\n1975\n6\n28\n6\n32.4\n-78.7\ntropical depression\n-1\n25\n1012\nNA\nNA\n  \n  \n  \n\n\n\n\n\nSTARWARS: Dados dos personagens de STAR WARS\n\nstarwars |> \n  select(1:8) |> \n  head() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      height\n      mass\n      hair_color\n      skin_color\n      eye_color\n      birth_year\n      sex\n    \n  \n  \n    Luke Skywalker\n172\n77\nblond\nfair\nblue\n19.0\nmale\n    C-3PO\n167\n75\nNA\ngold\nyellow\n112.0\nnone\n    R2-D2\n96\n32\nNA\nwhite, blue\nred\n33.0\nnone\n    Darth Vader\n202\n136\nnone\nwhite\nyellow\n41.9\nmale\n    Leia Organa\n150\n49\nbrown\nlight\nbrown\n19.0\nfemale\n    Owen Lars\n178\n120\nbrown, grey\nlight\nblue\n52.0\nmale\n  \n  \n  \n\n\n\n\nTABELAS EXEMPLOS - Table1, 2, 3, 4a, 4b e 5\n\ngt(table1);gt(table2);gt(table3);gt(table4a);gt(table4b);gt(table5)\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      cases\n      population\n    \n  \n  \n    Afghanistan\n1999\n745\n19987071\n    Afghanistan\n2000\n2666\n20595360\n    Brazil\n1999\n37737\n172006362\n    Brazil\n2000\n80488\n174504898\n    China\n1999\n212258\n1272915272\n    China\n2000\n213766\n1280428583\n  \n  \n  \n\n\n\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      type\n      count\n    \n  \n  \n    Afghanistan\n1999\ncases\n745\n    Afghanistan\n1999\npopulation\n19987071\n    Afghanistan\n2000\ncases\n2666\n    Afghanistan\n2000\npopulation\n20595360\n    Brazil\n1999\ncases\n37737\n    Brazil\n1999\npopulation\n172006362\n    Brazil\n2000\ncases\n80488\n    Brazil\n2000\npopulation\n174504898\n    China\n1999\ncases\n212258\n    China\n1999\npopulation\n1272915272\n    China\n2000\ncases\n213766\n    China\n2000\npopulation\n1280428583\n  \n  \n  \n\n\n\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      rate\n    \n  \n  \n    Afghanistan\n1999\n745/19987071\n    Afghanistan\n2000\n2666/20595360\n    Brazil\n1999\n37737/172006362\n    Brazil\n2000\n80488/174504898\n    China\n1999\n212258/1272915272\n    China\n2000\n213766/1280428583\n  \n  \n  \n\n\n\n\n\n\n\n\n  \n  \n    \n      country\n      1999\n      2000\n    \n  \n  \n    Afghanistan\n745\n2666\n    Brazil\n37737\n80488\n    China\n212258\n213766\n  \n  \n  \n\n\n\n\n\n\n\n\n  \n  \n    \n      country\n      1999\n      2000\n    \n  \n  \n    Afghanistan\n19987071\n20595360\n    Brazil\n172006362\n174504898\n    China\n1272915272\n1280428583\n  \n  \n  \n\n\n\n\n\n\n\n\n  \n  \n    \n      country\n      century\n      year\n      rate\n    \n  \n  \n    Afghanistan\n19\n99\n745/19987071\n    Afghanistan\n20\n00\n2666/20595360\n    Brazil\n19\n99\n37737/172006362\n    Brazil\n20\n00\n80488/174504898\n    China\n19\n99\n212258/1272915272\n    China\n20\n00\n213766/1280428583\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nO termo data-frame descrito ao longo deste texto, é utilizado de forma livre para objetos do tipo data.frame, tibble, entre outros. Pense como se fosse uma tabela de um banco de dados e/ou uma planilha do MS Excel, contendo linhas e colunas. Apesar de não ser rigorosamente igual à uma tabela, muitas vezes usaremos estes termos de forma intercambiável para facilitar o entendimento de iniciantes.\n\n\n\n\n\nDados organizados (tidy) são estruturados onde:\nCada variável está em sua própria coluna e cada observação está em sua própria linha.\n\nAs variáveis (ou colunas) são acessadas como vetores.\nOs observações (ou linhas) são preservadas em operações vetorizadas, ou seja, quando utilizamos funções que recebem vetores na entrada e retornam vetores na sua saída."
  },
  {
    "objectID": "Organizacao/Organizacao_de_dados_com_tidyr.html#tibbles",
    "href": "Organizacao/Organizacao_de_dados_com_tidyr.html#tibbles",
    "title": "3  Organização de Dados com TIDYR",
    "section": "3.2 Tibbles",
    "text": "3.2 Tibbles\nPodemos considerar que “Tibbles” são objetos similares aos “Data Frames”, porém com algumas melhorias/vantagens. Estes objetos são fornecidos pelo packago tibble. Eles herdam a classe data frame, mas possuem alguns comportamentos melhorados, como:\n\nExtrai parte de um tibble usando colchetes ] e um vetor com duplo colchetes ]] ou $\nSem encontros parciais quando extraindo partes das colunas\nMostram uma resumo mais amigável na tela quando pedimos suas informações. Use options(tibble.print_max = n, tibble.print_min = m, tibble.width = Inf) para controlar a saída padrão.\nAs funções View() ou glimpse() permitem visualizar todo o conjunto de dados.\n\nPor exemplo, se tivermos um tibble (ex starwars) e quisermos acessar a coluna “name”, e obter um vetor, podemos usar:\n\nstarwars[[\"name\"]] #Por nome com [[  ]]\nstarwars$name      #Por nome com $\nstarwars[[1]]      #Por numero da coluna com [[  ]]\n\nJá se tivermos um tibble (ex starwars) e quisermos acessar a coluna “name”, e obter um tibble, podemos usar:\n\nstarwars[ , 1]            #Por numero com [   ]\nselect (starwars, 3)      #Por numero usando select()\nselect (starwars, name)   #Por nome usando select()\n\n\n3.2.1 Criando tibble\nPodemos utilziar as funções tibble() ou tribble() para criar a mesma tabela. A diferença é apenas na forma em que os parêmetros são utilizados.\n\n3.2.1.1 tibble\nUse para criar um tibble por colunas.\n\ntibble(x = 1:3, y = c(\"a\", \"b\", \"c\"))\n\n\n\n  \n\n\n\n\n\n3.2.1.2 tribble\nUse para criar um tibble por linhas.\n\ntribble(~x, ~y, \n        1, \"a\",\n        2, \"b\",\n        3, \"c\",\n        4, \"d\")\n\n\n\n  \n\n\n\n\n\n3.2.1.3 as_tibble\nUse para converter um data frame para um tibble.\nPor exemplo, para converter o data frame MTCARS para um tibble, fazemos:\n\nas_tibble(mtcars)\n\n\n\n  \n\n\n\n\n\n3.2.1.4 enframe\nUse para converter um vetor para um tibble. Use deframe() parta fazer o inverso.\n\n\n3.2.1.5 is_tibble\nUse para saber se um objeto é um tibble ou não.\n\nis_tibble(mtcars)\n\n[1] FALSE"
  },
  {
    "objectID": "Organizacao/Organizacao_de_dados_com_tidyr.html#reformatando-dados",
    "href": "Organizacao/Organizacao_de_dados_com_tidyr.html#reformatando-dados",
    "title": "3  Organização de Dados com TIDYR",
    "section": "3.3 Reformatando Dados",
    "text": "3.3 Reformatando Dados\nMuitas vezes, os dados que recebemos não estão organizados (tidy) da maneira como vimos na seção Dados Organizados e Canalização. Para casos onde temos, por exemplo, as variáveis em linhas e/ou observações em colunas, etc, precisamos fazer uma ação conhecida como “pivotagem”. Pivotar dados, no contexto do tidyr, significa ajustar linhas em colunas e/ou colunas em linhas, de forma a obtermos nossos dados da maneira organizada (tidy).\nVeja, por exemplo, nossa tabela 1 (table1). Ela está em um formato organizado, pois possui cada variável em uma coluna e cada observações em sua linha, com os valores nas células.\n\ngt(table1)\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      cases\n      population\n    \n  \n  \n    Afghanistan\n1999\n745\n19987071\n    Afghanistan\n2000\n2666\n20595360\n    Brazil\n1999\n37737\n172006362\n    Brazil\n2000\n80488\n174504898\n    China\n1999\n212258\n1272915272\n    China\n2000\n213766\n1280428583\n  \n  \n  \n\n\n\n\n\n3.3.0.1 pivot_longer\nUse para “pivotar” os dados das colunas para as linhas, alongando a tabela, juntando várias colunas em duas, sendo uma a colunas que receberá os nomes das colunas e outra que recebera os valores das colunas.\nPor exemplo, vejamos nossa tabela 4 (table4).\n\ngt(table4a)\n\n\n\n\n\n  \n  \n    \n      country\n      1999\n      2000\n    \n  \n  \n    Afghanistan\n745\n2666\n    Brazil\n37737\n80488\n    China\n212258\n213766\n  \n  \n  \n\n\n\n\nObserve que temos uma variável (potencialmente “Ano”) que está na colunas 2 e 3 da tabela. Temos também outra variável (potencialmente “Numero_de_Casos” que está nas células da tabela.\nPara organizar esta tabela em nosso formato “tidy”, devemos pegar estas duas colunas e usar a função pivot_longer definindo os nomes para as respectivas variáveis (ex: ano e num_caso).\n\npivot_longer(table4a, cols = 2:3, names_to =\"ano\",\nvalues_to = \"num_casos\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      country\n      ano\n      num_casos\n    \n  \n  \n    Afghanistan\n1999\n745\n    Afghanistan\n2000\n2666\n    Brazil\n1999\n37737\n    Brazil\n2000\n80488\n    China\n1999\n212258\n    China\n2000\n213766\n  \n  \n  \n\n\n\n\n\n\n3.3.0.2 pivot_wider\nUse para “pivotar” os dados das linhas para as colunas, expandindo a tabela gerando novas colunas.\nVejamos o caso da tabela 2 (table2).\n\ngt(table2)\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      type\n      count\n    \n  \n  \n    Afghanistan\n1999\ncases\n745\n    Afghanistan\n1999\npopulation\n19987071\n    Afghanistan\n2000\ncases\n2666\n    Afghanistan\n2000\npopulation\n20595360\n    Brazil\n1999\ncases\n37737\n    Brazil\n1999\npopulation\n172006362\n    Brazil\n2000\ncases\n80488\n    Brazil\n2000\npopulation\n174504898\n    China\n1999\ncases\n212258\n    China\n1999\npopulation\n1272915272\n    China\n2000\ncases\n213766\n    China\n2000\npopulation\n1280428583\n  \n  \n  \n\n\n\n\nNeste exemplo, vemos que as variáveis casos (cases) e população (population) estão nas linhas e não nas colunas. Para deixarmos os dados organizados (tidy), devemos “expandir” a tabela, fazendo com que os dados de duas colunas sejam expandidos em vaŕias colunas. Os nomes das novas colunas virão de uma colunas e os valores da outra coluna. Veja:\n\ntable2 |> \n  pivot_wider(names_from = type, values_from = count) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      cases\n      population\n    \n  \n  \n    Afghanistan\n1999\n745\n19987071\n    Afghanistan\n2000\n2666\n20595360\n    Brazil\n1999\n37737\n172006362\n    Brazil\n2000\n80488\n174504898\n    China\n1999\n212258\n1272915272\n    China\n2000\n213766\n1280428583"
  },
  {
    "objectID": "Organizacao/Organizacao_de_dados_com_tidyr.html#expandindo-tabelas",
    "href": "Organizacao/Organizacao_de_dados_com_tidyr.html#expandindo-tabelas",
    "title": "3  Organização de Dados com TIDYR",
    "section": "3.4 Expandindo Tabelas",
    "text": "3.4 Expandindo Tabelas\nEm algumas situações, precisamos criar novas combinações das variáveis ou identificar valores ausentes implícitos, ou seja, combinações de variáveis não presentes nos dados.\nPara isto, temos as funções expand() e complete().\n\n3.4.0.1 expand\nUse para criar um novo tibble com todas as possibilidades de combinações dos valores das variáveis passadas para a função expand(), ignorando as demais variáveis.\nPor exemplo, se quisermos obter todas as combinações possíveis entre o número de cilindros (cyl), marchas (gear) e numero de carburadores (carb) da tabela mtcars, e ignorar todas as demais variáveis da tabela, podemos usar:\n\nmtcars |> \n  expand(cyl, gear, carb) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      gear\n      carb\n    \n  \n  \n    4\n3\n1\n    4\n3\n2\n    4\n3\n3\n    4\n3\n4\n    4\n3\n6\n    4\n3\n8\n    4\n4\n1\n    4\n4\n2\n    4\n4\n3\n    4\n4\n4\n    4\n4\n6\n    4\n4\n8\n    4\n5\n1\n    4\n5\n2\n    4\n5\n3\n    4\n5\n4\n    4\n5\n6\n    4\n5\n8\n    6\n3\n1\n    6\n3\n2\n    6\n3\n3\n    6\n3\n4\n    6\n3\n6\n    6\n3\n8\n    6\n4\n1\n    6\n4\n2\n    6\n4\n3\n    6\n4\n4\n    6\n4\n6\n    6\n4\n8\n    6\n5\n1\n    6\n5\n2\n    6\n5\n3\n    6\n5\n4\n    6\n5\n6\n    6\n5\n8\n    8\n3\n1\n    8\n3\n2\n    8\n3\n3\n    8\n3\n4\n    8\n3\n6\n    8\n3\n8\n    8\n4\n1\n    8\n4\n2\n    8\n4\n3\n    8\n4\n4\n    8\n4\n6\n    8\n4\n8\n    8\n5\n1\n    8\n5\n2\n    8\n5\n3\n    8\n5\n4\n    8\n5\n6\n    8\n5\n8\n  \n  \n  \n\n\n\n\nObserve que não há na tabela original (mtcars) um veículo de 4 cilindros e 8 carburadores, porém esta combinação foi possível usando a função expand().\n\n\n3.4.0.2 complete\nUse para criar um novo tibble com todas as possibilidades de combinações dos valores das variáveis passadas para a função expand(), colocando NA nas demais variáveis.\nPor exemplo, se quisermos obter todas as combinações possíveis entre o número de cilindros (cyl), marchas (gear) e numero de carburadores (carb) da tabela mtcars, e colocar NA para as demais variáveis em que a combinação não exista, podemos usar:\n\nmtcars |> \n  complete(cyl, gear, carb) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      gear\n      carb\n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n    \n  \n  \n    4\n3\n1\n21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n    4\n3\n2\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n3\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n3\n4\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n3\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n3\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n4\n1\n22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n    4\n4\n1\n32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n    4\n4\n1\n33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n    4\n4\n1\n27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n    4\n4\n2\n24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n    4\n4\n2\n22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n    4\n4\n2\n30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n    4\n4\n2\n21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n    4\n4\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n4\n4\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n4\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n4\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n5\n1\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n5\n2\n26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n    4\n5\n2\n30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n    4\n5\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n5\n4\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n5\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    4\n5\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n3\n1\n21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n    6\n3\n1\n18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n    6\n3\n2\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n3\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n3\n4\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n3\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n3\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n4\n1\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n4\n2\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n4\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n4\n4\n21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n    6\n4\n4\n21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n    6\n4\n4\n19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n    6\n4\n4\n17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n    6\n4\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n4\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n5\n1\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n5\n2\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n5\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n5\n4\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    6\n5\n6\n19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n    6\n5\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n3\n1\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n3\n2\n18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n    8\n3\n2\n15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n    8\n3\n2\n15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n    8\n3\n2\n19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n    8\n3\n3\n16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n    8\n3\n3\n17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n    8\n3\n3\n15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n    8\n3\n4\n14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n    8\n3\n4\n10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n    8\n3\n4\n10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n    8\n3\n4\n14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n    8\n3\n4\n13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n    8\n3\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n3\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n4\n1\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n4\n2\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n4\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n4\n4\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n4\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n4\n8\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n5\n1\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n5\n2\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n5\n3\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n5\n4\n15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n    8\n5\n6\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n    8\n5\n8\n15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1"
  },
  {
    "objectID": "Organizacao/Organizacao_de_dados_com_tidyr.html#combinando-e-dividindo-celulas",
    "href": "Organizacao/Organizacao_de_dados_com_tidyr.html#combinando-e-dividindo-celulas",
    "title": "3  Organização de Dados com TIDYR",
    "section": "3.5 Combinando e Dividindo Celulas",
    "text": "3.5 Combinando e Dividindo Celulas\nUse as funções a seguir para dividir ou combinar células da tabela em valores individuais isolados.\n\n3.5.0.1 unite\nUse para combinar celulas de diversas colunas em uma única coluna.\nVejamos com é a tabela 5 (table5) em seu formato original:\n\ntable5 |> gt()\n\n\n\n\n\n  \n  \n    \n      country\n      century\n      year\n      rate\n    \n  \n  \n    Afghanistan\n19\n99\n745/19987071\n    Afghanistan\n20\n00\n2666/20595360\n    Brazil\n19\n99\n37737/172006362\n    Brazil\n20\n00\n80488/174504898\n    China\n19\n99\n212258/1272915272\n    China\n20\n00\n213766/1280428583\n  \n  \n  \n\n\n\n\nAgora queremos unir as colunas “century” e “year” em uma única coluna:\n\ntable5 |> \n  unite(century, year, col = \"ano_completo\", sep = \"\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      country\n      ano_completo\n      rate\n    \n  \n  \n    Afghanistan\n1999\n745/19987071\n    Afghanistan\n2000\n2666/20595360\n    Brazil\n1999\n37737/172006362\n    Brazil\n2000\n80488/174504898\n    China\n1999\n212258/1272915272\n    China\n2000\n213766/1280428583\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nVeja que as colunas que deram origem à coluna combinada não são retornadas na saída da função.\n\n\n\n\n3.5.0.2 separate\nUse para dividir cada célula de uma coluna em várias colunas.\nPor exemplo, na tabela 3 (table3), temos uma coluna “rate” que possui daos dos casos e população separados por uma barr (“/”). Neste caso, podemos utilzar a função separate para dividí-la e criar duas novas colunas com seus dados separados.\n\ntable3 |> \n  separate(rate, sep = \"/\", \n           into = c(\"casos\", \"pop\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      casos\n      pop\n    \n  \n  \n    Afghanistan\n1999\n745\n19987071\n    Afghanistan\n2000\n2666\n20595360\n    Brazil\n1999\n37737\n172006362\n    Brazil\n2000\n80488\n174504898\n    China\n1999\n212258\n1272915272\n    China\n2000\n213766\n1280428583\n  \n  \n  \n\n\n\n\n\n\n3.5.0.3 separate_rows\nUse para dividir cada célula de uma coluna em várias linhas.\nÉ similar a função separate, porém o conteúdo de cada célula irá para uma linha ao invés de uma colunas.\n\ntable3 |> \n  separate_rows(rate, sep = \"/\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      country\n      year\n      rate\n    \n  \n  \n    Afghanistan\n1999\n745\n    Afghanistan\n1999\n19987071\n    Afghanistan\n2000\n2666\n    Afghanistan\n2000\n20595360\n    Brazil\n1999\n37737\n    Brazil\n1999\n172006362\n    Brazil\n2000\n80488\n    Brazil\n2000\n174504898\n    China\n1999\n212258\n    China\n1999\n1272915272\n    China\n2000\n213766\n    China\n2000\n1280428583"
  },
  {
    "objectID": "Organizacao/Organizacao_de_dados_com_tidyr.html#lidando-com-valores-ausentes",
    "href": "Organizacao/Organizacao_de_dados_com_tidyr.html#lidando-com-valores-ausentes",
    "title": "3  Organização de Dados com TIDYR",
    "section": "3.6 Lidando com Valores Ausentes",
    "text": "3.6 Lidando com Valores Ausentes\nMuitas vezes precisamos ignorar ou substituir valores ausentes (NA). Para isso, podemos usar as funções drop_na(), fill() ou replace_na()\n\n3.6.0.1 drop_na\nIgnora linhas que possuem valores ausentes (NA) nas colunas.\nPor exemplo, na tabela starwars, temos 5 personagens que não possuim cor de cabelo (hair color):\n\nstarwars |> \n  select(name, hair_color) |> \n  filter(is.na(hair_color))\n\n\n\n  \n\n\n\nSe pedirmos para listar todos os personagens e utilizarmos a função drop_na(), estes 5 personagens não serão listados:\n\nstarwars |> \n  select(name, hair_color) |> \n  drop_na()\n\n\n\n  \n\n\n\n\n\n3.6.0.2 fill\nUse para substituir o valores ausente (NA) da coluna pelo último valor disponível em linhas anteriores ou posteriores.\nPor exemplo:\nComo vimos no exemplo da função drop_na, temos 5 personagens de starwars que não possuem cor de cabelo preenchido.\nDigamos que decidimos substituir estes NAs pelo cor de cabelo do personagem anterior disponível. Para isso, faremos:\n\nstarwars |> \n  select (name, hair_color) |> \n  fill(hair_color)\n\n\n\n  \n\n\n\nVeja que o personagem C-3PO que tinha a cor de cabelo não preenchida, agora está como loiro (blond), pois o personagem anteriormente preenchido, era o Luke Skywalker, que tinha a cor de cabelo loiro (blond). Já o personagem R5-D4, teve sua cor de cabelo preenchida de marron (brown), pois o personagem anterior Beru Whitesun lars, tinha o cabelo marron (brown).\n\n\n3.6.0.3 replace_na\nUse para substituir os valores de NA por um valor específico.\nPor exemplo, vamos substituir a cor de cabelo dos personagens que tem NA na coluna “hair_color” pela cor azul (blue).\n\nstarwars |> \n  select(name, hair_color) |> \n  replace_na(list(hair_color = \"blue\"))\n\n\n\n  \n\n\n\n\n\n\n\n\n\nAviso\n\n\n\nVeja que a função replace_na, recebe uma lista de valores (list()) se os dados passados no primeiro parâmetro é um data frame."
  },
  {
    "objectID": "Organizacao/Organizacao_de_dados_com_tidyr.html#dados-aninhados",
    "href": "Organizacao/Organizacao_de_dados_com_tidyr.html#dados-aninhados",
    "title": "3  Organização de Dados com TIDYR",
    "section": "3.7 Dados Aninhados",
    "text": "3.7 Dados Aninhados\n\n3.7.1 Introdução\nUm data frame aninhado (nested) é aquela que possui tabelas completas em colunas do tipo lista (colunas de lista) dentro de outro data frame maior e organizado. Uma coluna de lista, podem ser também listas de vetores ou listas de vários tipos de dados.\nAlguns uso de um data frame de dados aninhados são:\n\nPreservar o relacionamento entre observações e sub-grupos de dados.\nPreservar o tipo da variável aninhada (factors e datetime não viram caracteres por exemplo).\nManipular várias sub-tabelas de uma vez com funcções do pacote purrr como map(), map2() ou pmap() ou com a rowwise() do pacote dplyr.\n\n\n\n3.7.2 Criando dados Aninhados\n\n3.7.2.1 nest\nUse para mover grupos de células para uma coluna de lista de um data frame. Pode ser usada sozinha ou em conjunto com a grupo_by().\nExemplo 1: nest() com groupg_by()\nDigamos que gostaríamos ter uma linha para cada furacão de nosso data frame (storms) e em uma coluna de lista, uma tabela dos dados do respectivo furação. Para isso, podemos utilizar a função nest() em conjunto com a função group_by(). Veja abaixo:\n\nn_storms <- storms  |> \n  group_by(name) |> \n  nest()\nhead(n_storms, 15)\n\n\n\n  \n\n\n\nObserve que na coluna “data”, temos um objeto <tibble> para grupo criado pela função group_by. A função nest() aninhou todas as demais variáveis nestas pequenas tabelas para cada um deles e armazenou na coluna do tipo lista.\nPara acessar a tibble gerada para o primeiro grupo (furacão “Amy” na primeira linha acima), podemos fazer:\n\nn_storms$data[[1]] |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      year\n      month\n      day\n      hour\n      lat\n      long\n      status\n      category\n      wind\n      pressure\n      tropicalstorm_force_diameter\n      hurricane_force_diameter\n    \n  \n  \n    1975\n6\n27\n0\n27.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    1975\n6\n27\n6\n28.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    1975\n6\n27\n12\n29.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    1975\n6\n27\n18\n30.5\n-79.0\ntropical depression\n-1\n25\n1013\nNA\nNA\n    1975\n6\n28\n0\n31.5\n-78.8\ntropical depression\n-1\n25\n1012\nNA\nNA\n    1975\n6\n28\n6\n32.4\n-78.7\ntropical depression\n-1\n25\n1012\nNA\nNA\n    1975\n6\n28\n12\n33.3\n-78.0\ntropical depression\n-1\n25\n1011\nNA\nNA\n    1975\n6\n28\n18\n34.0\n-77.0\ntropical depression\n-1\n30\n1006\nNA\nNA\n    1975\n6\n29\n0\n34.4\n-75.8\ntropical storm\n0\n35\n1004\nNA\nNA\n    1975\n6\n29\n6\n34.0\n-74.8\ntropical storm\n0\n40\n1002\nNA\nNA\n    1975\n6\n29\n12\n33.8\n-73.8\ntropical storm\n0\n45\n1000\nNA\nNA\n    1975\n6\n29\n18\n33.8\n-72.8\ntropical storm\n0\n50\n998\nNA\nNA\n    1975\n6\n30\n0\n34.3\n-71.6\ntropical storm\n0\n50\n998\nNA\nNA\n    1975\n6\n30\n6\n35.6\n-70.8\ntropical storm\n0\n55\n998\nNA\nNA\n    1975\n6\n30\n12\n35.9\n-70.5\ntropical storm\n0\n60\n987\nNA\nNA\n    1975\n6\n30\n18\n36.2\n-70.2\ntropical storm\n0\n60\n987\nNA\nNA\n    1975\n7\n1\n0\n36.2\n-69.8\ntropical storm\n0\n60\n984\nNA\nNA\n    1975\n7\n1\n6\n36.2\n-69.4\ntropical storm\n0\n60\n984\nNA\nNA\n    1975\n7\n1\n12\n36.2\n-68.3\ntropical storm\n0\n60\n984\nNA\nNA\n    1975\n7\n1\n18\n36.7\n-67.2\ntropical storm\n0\n60\n984\nNA\nNA\n    1975\n7\n2\n0\n37.4\n-66.7\ntropical storm\n0\n60\n984\nNA\nNA\n    1975\n7\n2\n6\n37.3\n-65.9\ntropical storm\n0\n60\n984\nNA\nNA\n    1975\n7\n2\n12\n37.3\n-65.1\ntropical storm\n0\n60\n981\nNA\nNA\n    1975\n7\n2\n18\n37.3\n-64.1\ntropical storm\n0\n60\n986\nNA\nNA\n    1975\n7\n3\n0\n37.7\n-62.8\ntropical storm\n0\n55\n986\nNA\nNA\n    1975\n7\n3\n6\n38.2\n-61.2\ntropical storm\n0\n55\n986\nNA\nNA\n    1975\n7\n3\n12\n39.3\n-59.6\ntropical storm\n0\n55\n986\nNA\nNA\n    1975\n7\n3\n18\n40.5\n-58.0\ntropical storm\n0\n50\n986\nNA\nNA\n    1975\n7\n4\n0\n42.5\n-54.8\ntropical storm\n0\n50\n986\nNA\nNA\n    1975\n7\n4\n6\n44.5\n-51.6\ntropical storm\n0\n50\n986\nNA\nNA\n  \n  \n  \n\n\n\n\nPara acessar todas as observações as variáveis “month” e “status” especificamente, podemos usar:\n\nn_storms$data[[1]][, c(\"month\", \"status\")] |> \n  head() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      month\n      status\n    \n  \n  \n    6\ntropical depression\n    6\ntropical depression\n    6\ntropical depression\n    6\ntropical depression\n    6\ntropical depression\n    6\ntropical depression\n  \n  \n  \n\n\n\n\nExemplo 2: nest() especificando colunas\nDigamos que precisamos especfificar as colunas que gostaríamos de aninhar em cada linha da coluna de lista. Apenas para simplificar o exemplo, iremos selecionar com a função selct() apenas as colunas “name”, “year”, “lat” e “long”. Depois iremos aninhar as colunas “year” até a coluna “long” em um coluna de lista chamada “data”. Veja a seguir:\n\nn_storms <- storms  |> \n  select(name, year, lat, long) |> \n  nest(data = c(year:long))\nhead(n_storms)\n\n\n\n  \n\n\n\nAgora temos as colunas “year”, “lat” e “long” aninhadas na coluna de lista chamada “data” para cada observação da coluna “name”.\nAssim como vimos anteriormente, podemos acessar as tibbles da coluna dat usando [[ ]]. Por exemplo:\n\nn_storms$data[[1]]\n\n\n\n  \n\n\n\n\n\n\n3.7.3 Criando Tibbles com Colunas de Listas\nPara criar um objeto tibble com colunas de lista (list-column), você pode utilizar as mesmas funções tibble(), trible() e enframe(), passando uma objeto lista para a coluna.\n\n3.7.3.1 tibble\nUse para criar uma tibble com uma coluna de lista salvando uma lista na coluna.\n\ntibble(max=c(3,4,5), seq=list(1:3, 1:4, 1:5))\n\n\n\n  \n\n\n\n\n\n3.7.3.2 tribble\nUse para criar uma tibble com uma coluna de lista por linhas.\n\ntribble(~max, ~seq, \n       3, 1:3,\n       4, 1:4,\n       5, 1:5)\n\n\n\n  \n\n\n\n\n\n3.7.3.3 enframe\nUse para converter listas em um tibble dentro de uma coluna de lista.\n\nlista <- list('3'=1:3, '4'=1:4, '5'=1:5)\nenframe(lista, 'max', 'seq')\n\n\n\n  \n\n\n\n\n\n\n\n\n\nNota\n\n\n\nObserve que nossa lista possui “nomes” nos vetores (3, 4 e 5), se isso não for o caso, ele irá nomear as colunas com a sequencia lógica dos vetores (1, 2 e 3).\n\n\n\n\n3.7.3.4 Outras Funções Retornam Coluna de Lista\nAlgumas funções, como por exemplo, mutate(), transmute() e summarise() do pacote dplyr tem como saída uma colunas de lista caso retornem uma lista.\nPor exemplo, se criarmos uma lista com os quartis da variável consumo (mpg) da tatela mtcars agrupada por cilindros (cyl) e utilzarmos a função summarise(), teremos uma coluna de lista contendo os quartis para cada grupo de cilindro.\n\nmtcars  |> \ngroup_by(cyl)  |> \nsummarise(q = list(quantile(mpg)))\n\n\n\n  \n\n\n\n\n\n\n3.7.4 Reformatando dados Aninhados\n\n3.7.4.1 unest\nUse para desaninhar os dados. Esta função, faz o inverso da função nest.\nPor exemplo, para desaninhar os dados da coluna data criada na tabela n_storms, fazemos:\n\nn_storms |> \n  unnest(data)\n\n\n\n  \n\n\n\n\n\n3.7.4.2 unest_longer\nUse para desaninhar um coluna de lista, tornando cada elemento da lista em uma linha.\nPor exemplo, na tabela starwars, temos uma coluna de lista chamada “films”, nesta coluna temos uma lista de filmes que cada personagem participou. Se quisermos desaninhar esta coluna e colocar cada filme em uma linha, faremos:\n\nstarwars |> \nselect(name, films) |> \nunnest_longer(films)\n\n\n\n  \n\n\n\n\n\n3.7.4.3 unest_wider\nUse para desaninhar um coluna de lista, tornando cada elemento da lista em uma coluna.\nPor exemplo, na tabela starwars, temos uma coluna de lista chamada “films”, nesta coluna temos uma lista de filmes que cada personagem participou. Se quisermos desaninhar esta coluna e colocar cada filme em uma coluna, faremos:\n\nstarwars |> \n  select(name, films) |> \n  unnest_wider(films, names_sep = '_')\n\n\n\n  \n\n\n\n\n\n3.7.4.4 hoist\nUse para selecionar componentes específicos de uma lista e desaninhá-lo em uma nova coluna. É similar ao unnest_wider(), mas desaninha colunas específicas usando a sintaxe do purrr:pluck().\nPor exemplo, vamos desaninhar apenas o primeiro e segundo filmes em que o psernagem de starwars particiou e manter os demais anihados:\n\nstarwars %>%\nselect(name, films) %>%\nhoist(films, \"1o_filme\" = 1, \"2o_filme\" = 2)\n\n\n\n  \n\n\n\n\n\n\n3.7.5 Transfromando dados Aninhados\nUma função vetorizada recebe um vetor, transforma cada elemento em paralelo e retorna um vetor de mesmo tamanho que o vetor de entrada. Estas funções sozinhas não trabalham com listas, e consequentemente, não trabalham com colunas de listas.\nA função dplyr::rownames() agrupa cada linha da tabela em um grupo diferente e dentro de cada grupo os elementos da coluna de lista aparecem diretamente (acessados por colchetes duplo) e não mais como uma lista e tamanho 1.\nPortanto, quando usamos a rownames(), as funções vetorizadas do pacote dplyr poderão ser aplicadas em uma coluna de lista de uma forma vetorizada.\n\n3.7.5.1 Exemplo 1:\nVamos aplicar a função mutate() para criar uma nova coluna de lista contendo as dimensões do tibble presente na coluna “data”:\n\n\nn_storms  |> \n  rowwise() |> \n  mutate (\"dim\" = list(dim(data)))\n\n\n\n  \n\n\n\n\n\n3.7.5.2 \nNeste exemplo, utilzamos a função dim() que retorna as dimensões de um objeto. Como na coluna “data”, temos um objeto tibble para cada linha, a função dim irá retornar dois valores (qtd de linha e qtd de colunas).\nIsto só funcionou porque agrupamento através da função rowwise() a tabela anterior.\n\n\n3.7.5.3 Exemplo 2:\nVamos aplicar a função mutate() para criar um coluna “normal” contendo o número de linhas da tibble presente na coluna “data”:\n\nn_storms  |> \n  rowwise() |> \n  mutate (\"num_linhas\" = nrow(data))\n\n\n\n  \n\n\n\n\n\n3.7.5.4 Exemplo 3:\nVamos aplicar a função mutate() para criar um coluna de lista contendo uma outra lista com a união entre as colunas de listas “vehicles” e “starships” presentes na tabela starwars:\n\nstarwars |> \n  rowwise() |> \n  mutate (transporte = list(append(vehicles, starships))) |> \n  select(name, transporte) \n\n\n\n  \n\n\n\n\n\n\n\n\n\nDica\n\n\n\nSe quisermos pegar os transportes criados e colocá-los em linhas, podemos usar a função unest.\n\n\n\nstarwars |> \n  rowwise() |> \n  mutate (transporte = list(append(vehicles, starships))) |> \n  select(name, transporte) |> \n  unnest(transporte)\n\n\n\n  \n\n\n\n\n\n3.7.5.5 Exemplo 4:\nVamos aplicar a função mutate() para criar um coluna de lista contendo uma o tamanho das listas “vehicles” e “starships” presentes na tabela starwars, e depois iremos desaninhar esta lista, obtendo assim quantos transportes cada personagem possui:\n\nstarwars |> \n  rowwise() |> \n  mutate (transporte = list(length(c(vehicles, starships)))) |> \n  select(name, transporte) |> \n  unnest(transporte)\n\n\n\n  \n\n\n\n\n\n\n\n\n\nDica\n\n\n\nVeja o pacote purrr para outras funções que manipulam listas.\n\n\nObserve pelos exemplos anteriores que quando temos uma função que retorna uma lista, devemos usar a função list() para criar uma coluna de lista. Se a função retorna um valor (ex um inteiro), a coluna criada será um coluna “normal”, neste caso um coluna de inteiros."
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "",
    "text": "A seguir temos vários exemplos de manipulação de strings (cadeia de caracteres) utilizando o pacote STRINGR do R. Para saber mais sobre este pacote, acesse:\nhttps://cran.r-project.org/package=stringr.\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\nPara os exemplos, iremos carregar os seguintes pacotes:\n\ntidyverse\ngt\nhtmlwidgets\n\n\nlibrary (tidyverse)\nlibrary (gt)\nlibrary (htmlwidgets)\n\n\n\n\n\n\n\nNota\n\n\n\nString: O termo string, ou cadeia de caracteres, é uma sequência de caracteres interpretadas como uma constante literal ou até mesmo uma variável.\n\n\nPor exemplo:\n\nminha_string <- \"Isto é uma string\"\nminha_string\n\n[1] \"Isto é uma string\"\n\n\n\n\nA maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na Folha de Referência do stringr disponível no site do RStudio.\nPara a maioria dos exemplos utilizaremos as bases de dados fruit (frutas) que será criado a seguir.\n\nFRUIT: Tabela com nome de frutas (em inglês).\n\nfruit <- tibble(name = c(\"Apple\", \"Apricot\", \"Avocado\", \"Banana\", \"Blackberry\", \"Blueberry\", \"Cherry\", \"Coconut\", \"Custard-Apple\", \"Dragonfruit\", \"Fig\", \"Gooseberry\", \"Grapes\", \"Guava\", \"Jackfruit\", \"Java Plum\", \"Kiwifruit\", \"Lime\", \"Mango\", \"MuskMelon\", \"Olives\", \"Orange\", \"Papaya\", \"Peach\", \"Pear\", \"Pineapple\", \"Pomegranate\", \"Strawberry\", \"Tamarind\", \"Watermelon\"))\nfruit |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n    \n  \n  \n    Apple\n    Apricot\n    Avocado\n    Banana\n    Blackberry\n    Blueberry\n    Cherry\n    Coconut\n    Custard-Apple\n    Dragonfruit\n    Fig\n    Gooseberry\n    Grapes\n    Guava\n    Jackfruit\n    Java Plum\n    Kiwifruit\n    Lime\n    Mango\n    MuskMelon\n    Olives\n    Orange\n    Papaya\n    Peach\n    Pear\n    Pineapple\n    Pomegranate\n    Strawberry\n    Tamarind\n    Watermelon\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nEm geral, ao final de cada comando, as vezes você verá a chamada à função gt(). Isto é apenas para a formatação da tabela de saída e não é necessário para que você entenda os comandos precedentes. Em alguns casos, onde o volume de dados de saída pode ser extenso, usamos também a função head() para mostrar apenas as linhas iniciais. Quando o exemplo possui muitas colunas de saída, eventualmente utilizamos a função select() para selecionar apenas algumas colunas.\nEm alguns casos usaremos funções de manipulação de dados do pacote dplyr, como mutate () ou count().\n\n\n\n\n\n\n\n\nNota\n\n\n\nO termo data-frame descrito ao longo deste texto, é utilizado de forma livre para objetos do tipo data.frame, tibble, entre outros. Pense como se fosse uma tabela de um banco de dados e/ou uma planilha do MS Excel, contendo linhas e colunas. Apesar de não ser rigorosamente igual à uma tabela, muitas vezes usaremos estes termos de forma intercambiável para facilitar o entendimento de iniciantes."
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#detectando-combinações",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#detectando-combinações",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.2 Detectando Combinações",
    "text": "5.2 Detectando Combinações\nO pacote stringr possui uma série de funções para identificar a ocorrência ou não de padrões de caracteres (patterns).\nNa maioria das vezes o mecanismo de interpretação padrão é o de “Expressão Regular” (regex). Isto significa que podemos construir um padrão de caracteres não somente com letras ou números, mas criando expressões que significam uma combinação mais flexivel no padrão de busca. Para maiores informações veja: Expressões Regulares.\n\n5.2.0.1 str_detect\nUse para detectar a presença de um padrão em uma string.\nPor exemplo, para detectar quais frutas tem a letra “a”, podemos usar:\n\nstr_detect(fruit$name, \"a\") \n\n [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE\n[13]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE\n[25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nNo exemplo acima, temos TRUE para todas as linhas que contém a letra “a” e FALSE para aquelas que não tem a letra “a”.\n\n\n\n\n\n\nImportante\n\n\n\nObserve que o R é sensível à letras maiúsculas e minúsculas. Como definimos a letra “a” (minúscula) como nosso padrão de busca, ele não retorna TRUE para palavras como “Apple” que possui a letra “A” maiúscula.\n\n\nSe quisermos criar uma coluna ao lado para facilitar a visualização, podemos usar a função mutate():\n\nfruit |> \n  mutate (Padrao_Encontrado = str_detect(fruit$name, \"a\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Padrao_Encontrado\n    \n  \n  \n    Apple\nFALSE\n    Apricot\nFALSE\n    Avocado\nTRUE\n    Banana\nTRUE\n    Blackberry\nTRUE\n    Blueberry\nFALSE\n    Cherry\nFALSE\n    Coconut\nFALSE\n    Custard-Apple\nTRUE\n    Dragonfruit\nTRUE\n    Fig\nFALSE\n    Gooseberry\nFALSE\n    Grapes\nTRUE\n    Guava\nTRUE\n    Jackfruit\nTRUE\n    Java Plum\nTRUE\n    Kiwifruit\nFALSE\n    Lime\nFALSE\n    Mango\nTRUE\n    MuskMelon\nFALSE\n    Olives\nFALSE\n    Orange\nTRUE\n    Papaya\nTRUE\n    Peach\nTRUE\n    Pear\nTRUE\n    Pineapple\nTRUE\n    Pomegranate\nTRUE\n    Strawberry\nTRUE\n    Tamarind\nTRUE\n    Watermelon\nTRUE\n  \n  \n  \n\n\n\n\n\n\n5.2.0.2 str_starts\nUse para determinar se há o padrão definido no início da string.\nPor exemplo, se quisermos identificar quais frutas que começam com o padrão “Bl”, usamos:\n\nfruit |> \n  mutate (Padrao_Encontrado_Inicio = str_starts(fruit$name, \"Bl\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Padrao_Encontrado_Inicio\n    \n  \n  \n    Apple\nFALSE\n    Apricot\nFALSE\n    Avocado\nFALSE\n    Banana\nFALSE\n    Blackberry\nTRUE\n    Blueberry\nTRUE\n    Cherry\nFALSE\n    Coconut\nFALSE\n    Custard-Apple\nFALSE\n    Dragonfruit\nFALSE\n    Fig\nFALSE\n    Gooseberry\nFALSE\n    Grapes\nFALSE\n    Guava\nFALSE\n    Jackfruit\nFALSE\n    Java Plum\nFALSE\n    Kiwifruit\nFALSE\n    Lime\nFALSE\n    Mango\nFALSE\n    MuskMelon\nFALSE\n    Olives\nFALSE\n    Orange\nFALSE\n    Papaya\nFALSE\n    Peach\nFALSE\n    Pear\nFALSE\n    Pineapple\nFALSE\n    Pomegranate\nFALSE\n    Strawberry\nFALSE\n    Tamarind\nFALSE\n    Watermelon\nFALSE\n  \n  \n  \n\n\n\n\nVeja que apenas as frutas “Blackberry” e “Bluberry” retornaram verdadeiro (TRUE).\nÉ comum utilizar a função filter() para filtrar apenas as linhas que retornam verdadeiro (TRUE) nas funções de detecção de padrão com o str_detect, str_starts, etc. Veja o exemplo abaixo:\n\nfruit |> \n  filter (str_starts(name, \"Bl\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n    \n  \n  \n    Blackberry\n    Blueberry\n  \n  \n  \n\n\n\n\n\n\n5.2.0.3 str_which\nUse para retornar em qual linha o pdrão foi encontrado.\nPor exemplo, supondo que o padrão sejam as letras “Bl” (B maiúscula e l minúscula), usamos:\n\nstr_which(fruit$name, \"Bl\")\n\n[1] 5 6\n\n\nNeste exemplo, identificamos que os únicos registros que atendem ao padrão “Bl” estão nas linhas 5 e 6 da tabela.\n\n\n5.2.0.4 str_locate\nUse para localizar a posição do padrão na string.\nPor exemplo, se criarmos uma coluna contendo onde, em cada nome de fruta, o padrão de busca “er” é encontrado, usamos:\n\n\nfruit |> \n  mutate (Localização_na_string = str_locate(name, \"er\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Localização_na_string\n    \n  \n  \n    Apple\nNA\n    Apricot\nNA\n    Avocado\nNA\n    Banana\nNA\n    Blackberry\n7\n    Blueberry\n6\n    Cherry\n3\n    Coconut\nNA\n    Custard-Apple\nNA\n    Dragonfruit\nNA\n    Fig\nNA\n    Gooseberry\n7\n    Grapes\nNA\n    Guava\nNA\n    Jackfruit\nNA\n    Java Plum\nNA\n    Kiwifruit\nNA\n    Lime\nNA\n    Mango\nNA\n    MuskMelon\nNA\n    Olives\nNA\n    Orange\nNA\n    Papaya\nNA\n    Peach\nNA\n    Pear\nNA\n    Pineapple\nNA\n    Pomegranate\nNA\n    Strawberry\n7\n    Tamarind\nNA\n    Watermelon\n4\n  \n  \n  \n\n\n\n\nA função str_locale retorna NA caso o padrão não seja encontrado na string.\n\n\n\n\n\n\nDica\n\n\n\nAo encontrar o padrão, a str_locale para imediatamente a busca na string. Caso precise encontrar todas as posições que o padrão existir na mesma string, utiliza a str_locale_all().\n\n\n\n\n5.2.0.5 str_count\nUse para identificar o número de vez que o padrão foi encontrado na string.\nPor exemplo, se buscarmos pelo padrão “na”, identificamos que a fruta banana, possui o padrão três vezes, enquanto a fruta pomegranade apenas uma vez.\n\nfruit |> \n  mutate (Vezes_padrao_encontrado = str_count(name, \"na\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Vezes_padrao_encontrado\n    \n  \n  \n    Apple\n0\n    Apricot\n0\n    Avocado\n0\n    Banana\n2\n    Blackberry\n0\n    Blueberry\n0\n    Cherry\n0\n    Coconut\n0\n    Custard-Apple\n0\n    Dragonfruit\n0\n    Fig\n0\n    Gooseberry\n0\n    Grapes\n0\n    Guava\n0\n    Jackfruit\n0\n    Java Plum\n0\n    Kiwifruit\n0\n    Lime\n0\n    Mango\n0\n    MuskMelon\n0\n    Olives\n0\n    Orange\n0\n    Papaya\n0\n    Peach\n0\n    Pear\n0\n    Pineapple\n0\n    Pomegranate\n1\n    Strawberry\n0\n    Tamarind\n0\n    Watermelon\n0"
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#partes-da-string",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#partes-da-string",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.3 Partes da String",
    "text": "5.3 Partes da String\nO pacote stringr possui uma série de funções que permitem obter partes de uma string baseado em um padrão de busca. Assim como nas funções de detecção, o interpretador padrão é o regex. Para maiores informações veja: Expressões Regulares.\n\n5.3.0.1 str_sub\nUse para extrair ou substituir partes de uma string a partir de um vetor de caracteres.\nPor exemplo, para extrair do segundo até o quarto caractere dos nomes das frutas, usamos:\n\nfruit |> \n  mutate (Segundo_ao_Quarto_Caractere = str_sub(name, 2, 4)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Segundo_ao_Quarto_Caractere\n    \n  \n  \n    Apple\nppl\n    Apricot\npri\n    Avocado\nvoc\n    Banana\nana\n    Blackberry\nlac\n    Blueberry\nlue\n    Cherry\nher\n    Coconut\noco\n    Custard-Apple\nust\n    Dragonfruit\nrag\n    Fig\nig\n    Gooseberry\noos\n    Grapes\nrap\n    Guava\nuav\n    Jackfruit\nack\n    Java Plum\nava\n    Kiwifruit\niwi\n    Lime\nime\n    Mango\nang\n    MuskMelon\nusk\n    Olives\nliv\n    Orange\nran\n    Papaya\napa\n    Peach\neac\n    Pear\near\n    Pineapple\nine\n    Pomegranate\nome\n    Strawberry\ntra\n    Tamarind\nama\n    Watermelon\nate\n  \n  \n  \n\n\n\n\nSe precisarmos variar o início ou fim da extração de parte da string, podemos passar valores negativos para os parametros start = e/ou end =, fazendo com que a contagem acontece de trás para frente.\n\n\n5.3.0.2 str_subset\nUse para retornar as strings que contém o padrão. É equivalente a fazer str_detect(x, pattern), porém ao invés de retornar verdadeiro ou falso, retorna a string.\n\nstr_subset(fruit$name, \"Bl\")\n\n[1] \"Blackberry\" \"Blueberry\" \n\n\n\n\n5.3.0.3 str_extract\nUse para obter o padrão encontrado na string.\nPor exemplo, queremos obter parte da string que atenda ao padrão “erry”. Neste caso, a função irá retornar NA para as strings que não contém o padrão e o padrão para aquelas que o contém.\n\nfruit |> \n  mutate (Str_Extract = str_extract(name, \"erry\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Str_Extract\n    \n  \n  \n    Apple\nNA\n    Apricot\nNA\n    Avocado\nNA\n    Banana\nNA\n    Blackberry\nerry\n    Blueberry\nerry\n    Cherry\nerry\n    Coconut\nNA\n    Custard-Apple\nNA\n    Dragonfruit\nNA\n    Fig\nNA\n    Gooseberry\nerry\n    Grapes\nNA\n    Guava\nNA\n    Jackfruit\nNA\n    Java Plum\nNA\n    Kiwifruit\nNA\n    Lime\nNA\n    Mango\nNA\n    MuskMelon\nNA\n    Olives\nNA\n    Orange\nNA\n    Papaya\nNA\n    Peach\nNA\n    Pear\nNA\n    Pineapple\nNA\n    Pomegranate\nNA\n    Strawberry\nerry\n    Tamarind\nNA\n    Watermelon\nNA\n  \n  \n  \n\n\n\n\n\n\n5.3.0.4 str_match\nUse para obter os grupos identificados pelo padrão de busca. Ela retorna uma matriz, onde a primeira coluna retorna a combinação (match) toda e as demais colunas será uma para cada grupo identificado.\nPor exemplo, se buscarmos por dois grupos, sendo o primeiro (Ba) e o segundo grupo (na), teremos o seguinte resultado:\n\nas_tibble(str_match(fruit$name, \"(Ba)(na)\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      V1\n      V2\n      V3\n    \n  \n  \n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    Bana\nBa\nna\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n    NA\nNA\nNA\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nOs detalhes sobre grupos nos padrões de busca faz parte das expressões regulares (regex) e estão mais detalhadas na seção: Expressões Regulares"
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#gerenciando-tamanho",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#gerenciando-tamanho",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.4 Gerenciando Tamanho",
    "text": "5.4 Gerenciando Tamanho\n\n5.4.0.1 str_length\nUse para obter o tamanho da string.\nPor exemplo, para obtermos o tamanho das strings correspondentes aos nomes das frutas e adicioná-las em uma coluna chamada “Tamanho”, podemos fazer:\n\nfruit |> \n  mutate(Tamanho = str_length(name)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Tamanho\n    \n  \n  \n    Apple\n5\n    Apricot\n7\n    Avocado\n7\n    Banana\n6\n    Blackberry\n10\n    Blueberry\n9\n    Cherry\n6\n    Coconut\n7\n    Custard-Apple\n13\n    Dragonfruit\n11\n    Fig\n3\n    Gooseberry\n10\n    Grapes\n6\n    Guava\n5\n    Jackfruit\n9\n    Java Plum\n9\n    Kiwifruit\n9\n    Lime\n4\n    Mango\n5\n    MuskMelon\n9\n    Olives\n6\n    Orange\n6\n    Papaya\n6\n    Peach\n5\n    Pear\n4\n    Pineapple\n9\n    Pomegranate\n11\n    Strawberry\n10\n    Tamarind\n8\n    Watermelon\n10\n  \n  \n  \n\n\n\n\n\n\n5.4.0.2 str_pad\nUse para adicionar espaços em branco ao lado (esquerdo, direito, ambos) da string.\nPor exemplo, para adicionar espaços em branco para ajustar em 20 caracteres os nomes das frutas, usamos:\n\nfruit |> mutate(Tamanho = str_pad(name, 20, \"left\")) |> as.matrix()\n\n      name            Tamanho               \n [1,] \"Apple\"         \"               Apple\"\n [2,] \"Apricot\"       \"             Apricot\"\n [3,] \"Avocado\"       \"             Avocado\"\n [4,] \"Banana\"        \"              Banana\"\n [5,] \"Blackberry\"    \"          Blackberry\"\n [6,] \"Blueberry\"     \"           Blueberry\"\n [7,] \"Cherry\"        \"              Cherry\"\n [8,] \"Coconut\"       \"             Coconut\"\n [9,] \"Custard-Apple\" \"       Custard-Apple\"\n[10,] \"Dragonfruit\"   \"         Dragonfruit\"\n[11,] \"Fig\"           \"                 Fig\"\n[12,] \"Gooseberry\"    \"          Gooseberry\"\n[13,] \"Grapes\"        \"              Grapes\"\n[14,] \"Guava\"         \"               Guava\"\n[15,] \"Jackfruit\"     \"           Jackfruit\"\n[16,] \"Java Plum\"     \"           Java Plum\"\n[17,] \"Kiwifruit\"     \"           Kiwifruit\"\n[18,] \"Lime\"          \"                Lime\"\n[19,] \"Mango\"         \"               Mango\"\n[20,] \"MuskMelon\"     \"           MuskMelon\"\n[21,] \"Olives\"        \"              Olives\"\n[22,] \"Orange\"        \"              Orange\"\n[23,] \"Papaya\"        \"              Papaya\"\n[24,] \"Peach\"         \"               Peach\"\n[25,] \"Pear\"          \"                Pear\"\n[26,] \"Pineapple\"     \"           Pineapple\"\n[27,] \"Pomegranate\"   \"         Pomegranate\"\n[28,] \"Strawberry\"    \"          Strawberry\"\n[29,] \"Tamarind\"      \"            Tamarind\"\n[30,] \"Watermelon\"    \"          Watermelon\"\n\n\n\n\n5.4.0.3 str_trunc\nUse para truncar a string em um número fixo de caracteres.\nPor exemplo, para truncar os nomes das frutas em até 8 caracteres, usamos:\n\nfruit |> mutate(Tamanho = str_trunc(name, 8, \"right\")) |> as.matrix()\n\n      name            Tamanho   \n [1,] \"Apple\"         \"Apple\"   \n [2,] \"Apricot\"       \"Apricot\" \n [3,] \"Avocado\"       \"Avocado\" \n [4,] \"Banana\"        \"Banana\"  \n [5,] \"Blackberry\"    \"Black...\"\n [6,] \"Blueberry\"     \"Blueb...\"\n [7,] \"Cherry\"        \"Cherry\"  \n [8,] \"Coconut\"       \"Coconut\" \n [9,] \"Custard-Apple\" \"Custa...\"\n[10,] \"Dragonfruit\"   \"Drago...\"\n[11,] \"Fig\"           \"Fig\"     \n[12,] \"Gooseberry\"    \"Goose...\"\n[13,] \"Grapes\"        \"Grapes\"  \n[14,] \"Guava\"         \"Guava\"   \n[15,] \"Jackfruit\"     \"Jackf...\"\n[16,] \"Java Plum\"     \"Java ...\"\n[17,] \"Kiwifruit\"     \"Kiwif...\"\n[18,] \"Lime\"          \"Lime\"    \n[19,] \"Mango\"         \"Mango\"   \n[20,] \"MuskMelon\"     \"MuskM...\"\n[21,] \"Olives\"        \"Olives\"  \n[22,] \"Orange\"        \"Orange\"  \n[23,] \"Papaya\"        \"Papaya\"  \n[24,] \"Peach\"         \"Peach\"   \n[25,] \"Pear\"          \"Pear\"    \n[26,] \"Pineapple\"     \"Pinea...\"\n[27,] \"Pomegranate\"   \"Pomeg...\"\n[28,] \"Strawberry\"    \"Straw...\"\n[29,] \"Tamarind\"      \"Tamarind\"\n[30,] \"Watermelon\"    \"Water...\"\n\n\n\n\n\n\n\n\nDica\n\n\n\nObserve que a função adiciona “…” para identificar as strings que tinham mais que o limite definido”. Utilize o parametro ellipsis = “…” para alterar para outros caracteres.\n\n\n\n\n5.4.0.4 str_trim\nUse para remover os espaços em brancos do início em final da string.\n\nstring <- \"  Aqui temos espaços em branco no início e no final   \"\nstr_trim(string)\n\n[1] \"Aqui temos espaços em branco no início e no final\"\n\n\n\n\n5.4.0.5 str_squish\nUse para remover espaços em branco no início e final da string e também espaços em brancos repetidos no meio da string.\n\nstring <- \"  Aqui temos espaços em       branco no início, no final e repetidos no meio   \"\nstr_squish(string)\n\n[1] \"Aqui temos espaços em branco no início, no final e repetidos no meio\""
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#modificando-string",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#modificando-string",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.5 Modificando String",
    "text": "5.5 Modificando String\n\n5.5.0.1 str_sub\nUse para extrair ou substituir partes de uma string a partir de um vetor de caracteres.\nPor exemplo, para substituir do segundo até o quarto caractere dos nomes das frutas, usamos:\n\nminha_string <- \"Esta é minha string\"; minha_string\n\n[1] \"Esta é minha string\"\n\nstr_sub(minha_string, 2, 4) <- \"XXX\"; minha_string\n\n[1] \"EXXX é minha string\"\n\n\n\n\n\n\n\n\nDica\n\n\n\nObserve que a função str_sub não é vetorizada, ou seja, não recebe ou retorna um vetor como parêmetro.\nDesta forma, se quisermos aplicá-la em conjunto com a função mutate(). Uma alternativa para este tipo de situação, é utilziar a função map() do pacote purrr.\n\n\nPor exemplo, vamos criar uma função chamada “substitui_string”. Esta função irá utilizar a função str_sub() de acordo com os parametros recebidos de str_troca, inicio e fim. Utilizando a função purrr::map() iremos iterar através dos nomes das frutas e utilizar a função substitui_string() para trocar por “XX” os caracteres -2 a -3 de todos os nomes em uma coluna ao lado.\n\nsubstitui_string <- function(str_origin, str_troca, inicio, fim){\n  str_sub(str_origin, inicio, fim) <- str_troca\n  return (str_origin)\n}\n\nfruit |> \n  mutate (Segundo_ao_Quarto_Caracteres = purrr::map_chr (name, substitui_string, str_troca = \"XX\", inicio = -3, fim = -2))|> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      Segundo_ao_Quarto_Caracteres\n    \n  \n  \n    Apple\nApXXe\n    Apricot\nApriXXt\n    Avocado\nAvocXXo\n    Banana\nBanXXa\n    Blackberry\nBlackbeXXy\n    Blueberry\nBluebeXXy\n    Cherry\nCheXXy\n    Coconut\nCocoXXt\n    Custard-Apple\nCustard-ApXXe\n    Dragonfruit\nDragonfrXXt\n    Fig\nXXg\n    Gooseberry\nGoosebeXXy\n    Grapes\nGraXXs\n    Guava\nGuXXa\n    Jackfruit\nJackfrXXt\n    Java Plum\nJava PXXm\n    Kiwifruit\nKiwifrXXt\n    Lime\nLXXe\n    Mango\nMaXXo\n    MuskMelon\nMuskMeXXn\n    Olives\nOliXXs\n    Orange\nOraXXe\n    Papaya\nPapXXa\n    Peach\nPeXXh\n    Pear\nPXXr\n    Pineapple\nPineapXXe\n    Pomegranate\nPomegranXXe\n    Strawberry\nStrawbeXXy\n    Tamarind\nTamarXXd\n    Watermelon\nWatermeXXn\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nObserve que valores negativos para os parametros start = e/ou end =, fazem com que a contagem aconteça de trás para frente.\n\n\n\n\n5.5.0.2 str_replace\nUse para substituir partes de uma string por outra string de acordo com o padrão de busca (ex: regex) definido.\n\n\n\n\n\n\nDica\n\n\n\nPara saber mais sobre o método de expressão regular (regex) veja: Expressões Regulares e para os outros métodos de interpretação, veja Outras Interpretações.\n\n\nPor exemplo, vamos definir inicialmente que nosso padrão de busca são as letras “er”. Agora vamos substituir este padrão pela string ” XX ” colocando em uma coluna ao lado usando a função mutate().\n\nfruit |> \n  mutate (nomes_substituidos = str_replace(name, \"er\", \" XX \")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nomes_substituidos\n    \n  \n  \n    Apple\nApple\n    Apricot\nApricot\n    Avocado\nAvocado\n    Banana\nBanana\n    Blackberry\nBlackb XX ry\n    Blueberry\nBlueb XX ry\n    Cherry\nCh XX ry\n    Coconut\nCoconut\n    Custard-Apple\nCustard-Apple\n    Dragonfruit\nDragonfruit\n    Fig\nFig\n    Gooseberry\nGooseb XX ry\n    Grapes\nGrapes\n    Guava\nGuava\n    Jackfruit\nJackfruit\n    Java Plum\nJava Plum\n    Kiwifruit\nKiwifruit\n    Lime\nLime\n    Mango\nMango\n    MuskMelon\nMuskMelon\n    Olives\nOlives\n    Orange\nOrange\n    Papaya\nPapaya\n    Peach\nPeach\n    Pear\nPear\n    Pineapple\nPineapple\n    Pomegranate\nPomegranate\n    Strawberry\nStrawb XX ry\n    Tamarind\nTamarind\n    Watermelon\nWat XX melon\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nNote que diferente da função str_sub(), a função str_replace() é vetorizada, com isto não precisamos utilizar o purrr:map para retornar um vetor.\n\n\n\n\n5.5.0.3 str_replace_all\nUse para substituir partes de uma string por outra string de acordo com o padrão de busca (ex: regex) definido em TODAS as vezes que o padrão for encontrado.\nPor exemplo, vamos definir inicialmente que nosso padrão de busca são as letras “na”. Agora vamos substituir este padrão pela string ” XX ” colocando em uma coluna ao lado usando a função mutate().\n\nfruit |> \n  mutate (nomes_substituidos = str_replace_all(name, \"an\", \" XX \")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nomes_substituidos\n    \n  \n  \n    Apple\nApple\n    Apricot\nApricot\n    Avocado\nAvocado\n    Banana\nB XX  XX a\n    Blackberry\nBlackberry\n    Blueberry\nBlueberry\n    Cherry\nCherry\n    Coconut\nCoconut\n    Custard-Apple\nCustard-Apple\n    Dragonfruit\nDragonfruit\n    Fig\nFig\n    Gooseberry\nGooseberry\n    Grapes\nGrapes\n    Guava\nGuava\n    Jackfruit\nJackfruit\n    Java Plum\nJava Plum\n    Kiwifruit\nKiwifruit\n    Lime\nLime\n    Mango\nM XX go\n    MuskMelon\nMuskMelon\n    Olives\nOlives\n    Orange\nOr XX ge\n    Papaya\nPapaya\n    Peach\nPeach\n    Pear\nPear\n    Pineapple\nPineapple\n    Pomegranate\nPomegr XX ate\n    Strawberry\nStrawberry\n    Tamarind\nTamarind\n    Watermelon\nWatermelon\n  \n  \n  \n\n\n\n\nNote que se tivessemo utilizado a função str_replace ao invés da str_replace_all, a palavra “Banana” retornaria “Ba XX na”, pois ela substituiria apenas a primeira vez que o padrão fosse encontrado.\n\n\n5.5.0.4 str_to_lower\nUse para colocar a string em letras minúsculas.\n\nfruit |> \n  mutate (tolowe = str_to_lower(name)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      tolowe\n    \n  \n  \n    Apple\napple\n    Apricot\napricot\n    Avocado\navocado\n    Banana\nbanana\n    Blackberry\nblackberry\n    Blueberry\nblueberry\n    Cherry\ncherry\n    Coconut\ncoconut\n    Custard-Apple\ncustard-apple\n    Dragonfruit\ndragonfruit\n    Fig\nfig\n    Gooseberry\ngooseberry\n    Grapes\ngrapes\n    Guava\nguava\n    Jackfruit\njackfruit\n    Java Plum\njava plum\n    Kiwifruit\nkiwifruit\n    Lime\nlime\n    Mango\nmango\n    MuskMelon\nmuskmelon\n    Olives\nolives\n    Orange\norange\n    Papaya\npapaya\n    Peach\npeach\n    Pear\npear\n    Pineapple\npineapple\n    Pomegranate\npomegranate\n    Strawberry\nstrawberry\n    Tamarind\ntamarind\n    Watermelon\nwatermelon\n  \n  \n  \n\n\n\n\n\n\n5.5.0.5 str_to_upper\nUse para colocar a string em letras maiúsculas.\n\nfruit |> \n  mutate (toupper = str_to_upper(name)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      toupper\n    \n  \n  \n    Apple\nAPPLE\n    Apricot\nAPRICOT\n    Avocado\nAVOCADO\n    Banana\nBANANA\n    Blackberry\nBLACKBERRY\n    Blueberry\nBLUEBERRY\n    Cherry\nCHERRY\n    Coconut\nCOCONUT\n    Custard-Apple\nCUSTARD-APPLE\n    Dragonfruit\nDRAGONFRUIT\n    Fig\nFIG\n    Gooseberry\nGOOSEBERRY\n    Grapes\nGRAPES\n    Guava\nGUAVA\n    Jackfruit\nJACKFRUIT\n    Java Plum\nJAVA PLUM\n    Kiwifruit\nKIWIFRUIT\n    Lime\nLIME\n    Mango\nMANGO\n    MuskMelon\nMUSKMELON\n    Olives\nOLIVES\n    Orange\nORANGE\n    Papaya\nPAPAYA\n    Peach\nPEACH\n    Pear\nPEAR\n    Pineapple\nPINEAPPLE\n    Pomegranate\nPOMEGRANATE\n    Strawberry\nSTRAWBERRY\n    Tamarind\nTAMARIND\n    Watermelon\nWATERMELON\n  \n  \n  \n\n\n\n\n\n\n5.5.0.6 str_to_title\nUse para colocar a string com a primeira letra maiúscula e as demais em letras minúsculas de cada palavra.\n\nfruit |> \n  mutate (totitle= str_to_title(name)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      totitle\n    \n  \n  \n    Apple\nApple\n    Apricot\nApricot\n    Avocado\nAvocado\n    Banana\nBanana\n    Blackberry\nBlackberry\n    Blueberry\nBlueberry\n    Cherry\nCherry\n    Coconut\nCoconut\n    Custard-Apple\nCustard-Apple\n    Dragonfruit\nDragonfruit\n    Fig\nFig\n    Gooseberry\nGooseberry\n    Grapes\nGrapes\n    Guava\nGuava\n    Jackfruit\nJackfruit\n    Java Plum\nJava Plum\n    Kiwifruit\nKiwifruit\n    Lime\nLime\n    Mango\nMango\n    MuskMelon\nMuskmelon\n    Olives\nOlives\n    Orange\nOrange\n    Papaya\nPapaya\n    Peach\nPeach\n    Pear\nPear\n    Pineapple\nPineapple\n    Pomegranate\nPomegranate\n    Strawberry\nStrawberry\n    Tamarind\nTamarind\n    Watermelon\nWatermelon"
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#juntando-e-dividindo",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#juntando-e-dividindo",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.6 Juntando e Dividindo",
    "text": "5.6 Juntando e Dividindo\n\n5.6.0.1 str_c\nUse para juntar várias strings em uma única string.\nPara exemplificar, vamos criar uma segunda coluna em nossa tabela de frutas.\n\n# Nova coluna com uma string qualquer \ncol_nova <- bind_cols(c(letters, LETTERS), seq(1:52), seq(1:52), c(letters, LETTERS))\ncol_nova <- col_nova |> \n  unite(nova_string, names(col_nova)) |> \n  slice (n = 1:30) \nfrutas <- bind_cols (fruit, col_nova)\n\n#Concatenando ambas colunas\n  frutas |> \n  mutate ( str_c = str_c(name, nova_string)) |>\n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nova_string\n      str_c\n    \n  \n  \n    Apple\na_1_1_a\nApplea_1_1_a\n    Apricot\nb_2_2_b\nApricotb_2_2_b\n    Avocado\nc_3_3_c\nAvocadoc_3_3_c\n    Banana\nd_4_4_d\nBananad_4_4_d\n    Blackberry\ne_5_5_e\nBlackberrye_5_5_e\n    Blueberry\nf_6_6_f\nBlueberryf_6_6_f\n    Cherry\ng_7_7_g\nCherryg_7_7_g\n    Coconut\nh_8_8_h\nCoconuth_8_8_h\n    Custard-Apple\ni_9_9_i\nCustard-Applei_9_9_i\n    Dragonfruit\nj_10_10_j\nDragonfruitj_10_10_j\n    Fig\nk_11_11_k\nFigk_11_11_k\n    Gooseberry\nl_12_12_l\nGooseberryl_12_12_l\n    Grapes\nm_13_13_m\nGrapesm_13_13_m\n    Guava\nn_14_14_n\nGuavan_14_14_n\n    Jackfruit\no_15_15_o\nJackfruito_15_15_o\n    Java Plum\np_16_16_p\nJava Plump_16_16_p\n    Kiwifruit\nq_17_17_q\nKiwifruitq_17_17_q\n    Lime\nr_18_18_r\nLimer_18_18_r\n    Mango\ns_19_19_s\nMangos_19_19_s\n    MuskMelon\nt_20_20_t\nMuskMelont_20_20_t\n    Olives\nu_21_21_u\nOlivesu_21_21_u\n    Orange\nv_22_22_v\nOrangev_22_22_v\n    Papaya\nw_23_23_w\nPapayaw_23_23_w\n    Peach\nx_24_24_x\nPeachx_24_24_x\n    Pear\ny_25_25_y\nPeary_25_25_y\n    Pineapple\nz_26_26_z\nPineapplez_26_26_z\n    Pomegranate\nA_27_27_A\nPomegranateA_27_27_A\n    Strawberry\nB_28_28_B\nStrawberryB_28_28_B\n    Tamarind\nC_29_29_C\nTamarindC_29_29_C\n    Watermelon\nD_30_30_D\nWatermelonD_30_30_D\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nUse o parametro sep = para definir um caractere de separação quando juntar as strings se desejar.\n\n\n\n\n5.6.0.2 str_flatten\nUse para “achatar” o vetor de string. O parametro collapse = “” pode ser alterado para incluir um caractere específico enquanto ocorre o processo.\nPor exemplo, temos uma string “Bom dia”. Neste caso, temos um vetor de caracteres de tamanho 7 (“B” “o” “m” ” ” “d” “i” “a”). A função flatten irá achatar este vetor e retornar apenas uma string com um único vetor (“Bom dia”).\n\nminha_string <- c(\"B\",\"o\",\"m\",\" \",\"d\",\"i\",\"a\")\nlength (minha_string); minha_string\n\n[1] 7\n\n\n[1] \"B\" \"o\" \"m\" \" \" \"d\" \"i\" \"a\"\n\nminha_string <- str_flatten(minha_string)\nlength (minha_string); minha_string\n\n[1] 1\n\n\n[1] \"Bom dia\"\n\n\n\n\n5.6.0.3 str_dup\nUse para duplicar uma string determinado número de vezes.\n\nfruit |> \n  mutate (str_dup = str_dup(name, 3)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      str_dup\n    \n  \n  \n    Apple\nAppleAppleApple\n    Apricot\nApricotApricotApricot\n    Avocado\nAvocadoAvocadoAvocado\n    Banana\nBananaBananaBanana\n    Blackberry\nBlackberryBlackberryBlackberry\n    Blueberry\nBlueberryBlueberryBlueberry\n    Cherry\nCherryCherryCherry\n    Coconut\nCoconutCoconutCoconut\n    Custard-Apple\nCustard-AppleCustard-AppleCustard-Apple\n    Dragonfruit\nDragonfruitDragonfruitDragonfruit\n    Fig\nFigFigFig\n    Gooseberry\nGooseberryGooseberryGooseberry\n    Grapes\nGrapesGrapesGrapes\n    Guava\nGuavaGuavaGuava\n    Jackfruit\nJackfruitJackfruitJackfruit\n    Java Plum\nJava PlumJava PlumJava Plum\n    Kiwifruit\nKiwifruitKiwifruitKiwifruit\n    Lime\nLimeLimeLime\n    Mango\nMangoMangoMango\n    MuskMelon\nMuskMelonMuskMelonMuskMelon\n    Olives\nOlivesOlivesOlives\n    Orange\nOrangeOrangeOrange\n    Papaya\nPapayaPapayaPapaya\n    Peach\nPeachPeachPeach\n    Pear\nPearPearPear\n    Pineapple\nPineapplePineapplePineapple\n    Pomegranate\nPomegranatePomegranatePomegranate\n    Strawberry\nStrawberryStrawberryStrawberry\n    Tamarind\nTamarindTamarindTamarind\n    Watermelon\nWatermelonWatermelonWatermelon\n  \n  \n  \n\n\n\n\n\n\n5.6.0.4 str_split_fixed\nUse para “quebrar” um string em partes. A funçao str_split() retorna uma string dividida enquanto a funçao str_split_fixed() retorna uma matriz de caracteres com número fixo de colunas.\nPor exemplo, vamos usar a mesma tabela usada no exemplo da funçao str_c chamada frutas (na fruit). Iremos “quebrar as strings da coluna”nova_string” usando oseparator “_”. Como temos exatamente o mesmo número de sperador em todas as strings, a funções irá nos retornar um vetor de caracteres de tamanho 4.\n\nfrutas |> \n  mutate (str_split = str_split(nova_string, \"_\")) |> \n  pull(str_split)\n\n[[1]]\n[1] \"a\" \"1\" \"1\" \"a\"\n\n[[2]]\n[1] \"b\" \"2\" \"2\" \"b\"\n\n[[3]]\n[1] \"c\" \"3\" \"3\" \"c\"\n\n[[4]]\n[1] \"d\" \"4\" \"4\" \"d\"\n\n[[5]]\n[1] \"e\" \"5\" \"5\" \"e\"\n\n[[6]]\n[1] \"f\" \"6\" \"6\" \"f\"\n\n[[7]]\n[1] \"g\" \"7\" \"7\" \"g\"\n\n[[8]]\n[1] \"h\" \"8\" \"8\" \"h\"\n\n[[9]]\n[1] \"i\" \"9\" \"9\" \"i\"\n\n[[10]]\n[1] \"j\"  \"10\" \"10\" \"j\" \n\n[[11]]\n[1] \"k\"  \"11\" \"11\" \"k\" \n\n[[12]]\n[1] \"l\"  \"12\" \"12\" \"l\" \n\n[[13]]\n[1] \"m\"  \"13\" \"13\" \"m\" \n\n[[14]]\n[1] \"n\"  \"14\" \"14\" \"n\" \n\n[[15]]\n[1] \"o\"  \"15\" \"15\" \"o\" \n\n[[16]]\n[1] \"p\"  \"16\" \"16\" \"p\" \n\n[[17]]\n[1] \"q\"  \"17\" \"17\" \"q\" \n\n[[18]]\n[1] \"r\"  \"18\" \"18\" \"r\" \n\n[[19]]\n[1] \"s\"  \"19\" \"19\" \"s\" \n\n[[20]]\n[1] \"t\"  \"20\" \"20\" \"t\" \n\n[[21]]\n[1] \"u\"  \"21\" \"21\" \"u\" \n\n[[22]]\n[1] \"v\"  \"22\" \"22\" \"v\" \n\n[[23]]\n[1] \"w\"  \"23\" \"23\" \"w\" \n\n[[24]]\n[1] \"x\"  \"24\" \"24\" \"x\" \n\n[[25]]\n[1] \"y\"  \"25\" \"25\" \"y\" \n\n[[26]]\n[1] \"z\"  \"26\" \"26\" \"z\" \n\n[[27]]\n[1] \"A\"  \"27\" \"27\" \"A\" \n\n[[28]]\n[1] \"B\"  \"28\" \"28\" \"B\" \n\n[[29]]\n[1] \"C\"  \"29\" \"29\" \"C\" \n\n[[30]]\n[1] \"D\"  \"30\" \"30\" \"D\" \n\n\nSe quisermos “quebrar” uma string usando um separador e já gerarmos as respectivas colunas em uma tabela, podemos usar a função str_split_fixed(), extrairmos as respectivas matrizes e adicionarmos como colunas na tabela, podemos fazer: .\n\n\n5.6.0.5 str_glue\nUse para interpolar/formatar uma string.\nPor exemplo, se tivermos duas strings: s1 = “Fulano” e s2 = “da Silva”. Podemos “colar” estas strings usando a função str_glue().\n\ns1 <- \"Fulano\"\ns2 <- \"da Silva\"\nstr_glue(\"{s1}\",\" \", \"{s2}\")\n\nFulano da Silva\n\n\nPodemos também juntar strings fixas e variáveis como no exemplo abaixo.\n\ns1 <- \"Fulano\"\ns2 <- \"da Silva\"\nstr_glue(\"Meu nome é {s1}\",\" \", \"{s2}\")\n\nMeu nome é Fulano da Silva\n\n\n\n\n5.6.0.6 str_glue_data\nÉ similar a função str_glue, mas adequada a objetos de dados.\nPor exemplo, vamos juntar o nome das frutas, o nome da linha da tabela que ela está e mais uma string fixa:\n\nfruit |> str_glue_data(\"A {name} é uma fruta.\") \n\nA Apple é uma fruta.\nA Apricot é uma fruta.\nA Avocado é uma fruta.\nA Banana é uma fruta.\nA Blackberry é uma fruta.\nA Blueberry é uma fruta.\nA Cherry é uma fruta.\nA Coconut é uma fruta.\nA Custard-Apple é uma fruta.\nA Dragonfruit é uma fruta.\nA Fig é uma fruta.\nA Gooseberry é uma fruta.\nA Grapes é uma fruta.\nA Guava é uma fruta.\nA Jackfruit é uma fruta.\nA Java Plum é uma fruta.\nA Kiwifruit é uma fruta.\nA Lime é uma fruta.\nA Mango é uma fruta.\nA MuskMelon é uma fruta.\nA Olives é uma fruta.\nA Orange é uma fruta.\nA Papaya é uma fruta.\nA Peach é uma fruta.\nA Pear é uma fruta.\nA Pineapple é uma fruta.\nA Pomegranate é uma fruta.\nA Strawberry é uma fruta.\nA Tamarind é uma fruta.\nA Watermelon é uma fruta."
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#ordenando-string",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#ordenando-string",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.7 Ordenando String",
    "text": "5.7 Ordenando String\n\n5.7.0.1 str_order\nUse para sequenciar um vetor de caracteres.\nPor exemplo, para colocar em sequência de forma decrescente os nomes da frutas, podemos usar:\n\n  str_order(fruit$name, decreasing = TRUE)\n\n [1] 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6\n[26]  5  4  3  2  1\n\n\nO resultado será uma sequência (descrescente) em que cada item do vetor está.\n\n\n5.7.0.2 str_sort\nUse para ordenar um vetor de caracteres.\nPor exemplo, para ordenar de forma decrescente os nomes da frutas, podemos usar:\n\nstr_sort(fruit$name, decreasing = TRUE) |> \n  as_tibble() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      value\n    \n  \n  \n    Watermelon\n    Tamarind\n    Strawberry\n    Pomegranate\n    Pineapple\n    Pear\n    Peach\n    Papaya\n    Orange\n    Olives\n    MuskMelon\n    Mango\n    Lime\n    Kiwifruit\n    Java Plum\n    Jackfruit\n    Guava\n    Grapes\n    Gooseberry\n    Fig\n    Dragonfruit\n    Custard-Apple\n    Coconut\n    Cherry\n    Blueberry\n    Blackberry\n    Banana\n    Avocado\n    Apricot\n    Apple"
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#auxiliares",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#auxiliares",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.8 Auxiliares",
    "text": "5.8 Auxiliares\n\n5.8.0.1 str_conv\nUse para converter o “encode” de uma string.\n\nx <- rawToChar(as.raw(177))\nx\n\n[1] \"\\xb1\"\n\nstr_conv(x, \"ISO-8859-2\") # Polones a com cedilha\"\n\n[1] \"ą\"\n\nstr_conv(x, \"ISO-8859-1\") # Mais-Menos\n\n[1] \"±\"\n\n\n\n\n5.8.0.2 str_view_all\nUse para ver os valores encontrados na string de acordo com um padrão de busca.\nPor exemplo, se tivermos o padrão de busca como “er”, podemos ver onde na strings ele é encontrado.\n\nstr_view(c(\"Banana\", \"Blueberry\", \"Blackberry\"), \"er\") \n\n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nA função str_view_all(), mostrará todos os encontros na string, se quiser para a busca do padrão no primeiro encontro, usa str_view().\n\n\n\n\n5.8.0.3 str_wrap\nUse para formatar uma string em parágrafos.\n\nthanks_path <- file.path(R.home(\"doc\"), \"THANKS\")\nthanks <- str_c(readLines(thanks_path), collapse = \"\\n\")\nthanks <- word(thanks, 1, 3, fixed(\"\\n\\n\"))\ncat(str_wrap(thanks, width = 60, indent = 2), \"\\n\")\n\n  R would not be what it is today without the invaluable\nhelp of these people outside of the (former and current)\nR Core team, who contributed by donating code, bug fixes\nand documentation: Valerio Aimale, Suharto Anggono, Thomas\nBaier, Gabe Becker, Henrik Bengtsson, Roger Bivand, Ben\nBolker, David Brahm, G\"oran Brostr\"om, Patrick Burns,\nVince Carey, Saikat DebRoy, Matt Dowle, Brian D'Urso,\nLyndon Drake, Dirk Eddelbuettel, Claus Ekstrom, Sebastian\nFischmeister, John Fox, Paul Gilbert, Yu Gong, Gabor\nGrothendieck, Frank E Harrell Jr, Peter M. Haverty,\nTorsten Hothorn, Robert King, Kjetil Kjernsmo, Roger\nKoenker, Philippe Lambert, Jan de Leeuw, Jim Lindsey,\nPatrick Lindsey, Catherine Loader, Gordon Maclean, Arni\nMagnusson, John Maindonald, David Meyer, Ei-ji Nakama,\nJens Oehlschl\"agel, Steve Oncley, Richard O'Keefe, Hubert\nPalme, Roger D. Peng, Jose' C. Pinheiro, Tony Plate, Anthony\nRossini, Jonathan Rougier, Petr Savicky, Guenther Sawitzki,\nMarc Schwartz, Arun Srinivasan, Detlef Steuer, Bill Simpson,\nGordon Smyth, Adrian Trapletti, Terry Therneau, Rolf Turner,\nBill Venables, Gregory R. Warnes, Andreas Weingessel, Morten\nWelinder, James Wettenhall, Simon Wood, and Achim Zeileis.\nOthers have written code that has been adopted by R and is\nacknowledged in the code files, including"
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#expressões-regulares",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#expressões-regulares",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.9 Expressões Regulares",
    "text": "5.9 Expressões Regulares\nPadrões de buscas são interpretados na funções do pacote stringr como Expressões Regulares (regex). Ou seja, quando uma função possui o parametro pattern =, significa que o interpretador irá entendem como uma expressão regular. Você pode alterar o interpretadores para outros tipos se necessário. Para saber mais sobre isso, acesse Outras Interpretações.\nExpressão Regular é uma sequencia de caracteres que especificam um padrão de busca em uma string.\nNo R, você escreve uma expressão regular como um string, ou seja, uma sequencia de caracteres entre asps simples ’ ou duplas “.\nAlguns caracteres de uma expressão regular não podem ser representados diretamente como uma string no R. Estes são conhecidos como caracteres especiais e são uma sequencia de caracteres que tem um significado específico.\nPor exemplo:\n\n\n\nCaracteres Especiais\nRepresenta\n\n\n\n\n\\\\\n\\\n\n\n\\”\n”\n\n\n\\?\n?\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nPara obter a lista completa, digite ? “’”.\n\n\nDevido a isto, sempre que aparecer uma barra invertida ( \\ ) em uma expressão regular, você deve digitar duas barras ( \\\\ ) na strings da expressão.\nIsto é uma particularidade do R e outras linguagens isto pode não ser necessário.\nUse a função writeLines() para ver como o R vê sua string depois dos caracteres especiais forem lido.\n\nwriteLines(\"\\\\.\")\n\n\\.\n\n\n\nwriteLines(\"\\\\\")\n\n\\\n\n\nComo exemplo inicial, vamos utilizar a função str_extract() que recebe um string como parametro e também aceita o padrão de busca como outro parametro.\nIremos definir nosso padrão de busca como a letra “a”. Desta forma, se passarmos para a função str_detect a string “Banana” e o padrão “a”, ele deve retornar a letra “a”, pois a string Banana possui a letra “a”.\n\nstr_extract (\"Banana\", \"a\")\n\n[1] \"a\"\n\n\nPor outro lado, se passarmos a string “Fig” com o mesmo padrão de busca, teremos NA como retorno, pois a string “Fig” não possui a letra “a”.\n\nstr_extract (\"Fig\", \"a\")\n\n[1] NA\n\n\n\n5.9.1 Combinando Caracteres\nNo exemplo anterior utilizamos apenas um caractere como padrão de busca, no caso a letra “a”.\nQuando desejamos combinar diversos caracteres (letras, numeros, simbolos, espaços, etc) utilizamos a expressões na tabela abaixo:\nPara facilitar o entendimento, utilizaremos uma string com letras maiúsculas, minúsculas, símbolos e números:\n\nStr_Teste <- \"abc ABC 123\\t.!?\\\\(){}\\n\"\nStr_Teste\n\n[1] \"abc ABC 123\\t.!?\\\\(){}\\n\"\n\n\n\n\n\n\n\n\n\nString Regex no R\nBusca por\n\n\n\n\na\na (etc.)\n\n\n\\\\.\n.\n\n\n\\\\!\n\\!\n\n\n\\\\?\n\\?\n\n\n\\\\\\\\\n\\\\\n\n\n\\\\(\n\\(\n\n\n\\\\)\n\\)\n\n\n\\\\{\n\\{\n\n\n\\\\}\n\\}\n\n\n\\\\n\nnova linha (ENTER)\n\n\n\\\\t\nTAB\n\n\n\\\\s\nqualquer caractere em branco\n\n\n\\\\d\nqualquer digito\n\n\n\\\\w\nqualquer letra\n\n\n\\\\b\nbarra de espaço\n\n\n[:digit:]\ndigitos\n\n\n[:alpha:]\nletras\n\n\n[:lower:]\nletras minúsculas\n\n\n[:upper:]\nletras maiúsculas\n\n\n[:alnum:]\nletras e números\n\n\n[:punct:]\npontuação\n\n\n[:graph:]\nletras, números e pontuação\n\n\n[:space:]\nqualquer espaço em branco\n\n\n[:blank:]\nespaço em branco e barra de espaço (mas não nova linha)\n\n\n.\nqualquer caractere exceto nova linha (ENTER)\n\n\n\nVamos mostrar como usar a tabela acima com alguns exemplos. Para isso, iremos usar a string criada anteriormente chamada “Str_Teste”.\nExemplo 1:\nVamos buscar em nossa string de teste (Str_Teste) a letra minúscula “a”.\nNa coluna da tabela acima chamada String, encontramos oque devemos digitar para construir o padrão de busca. Neste caso, seria “a”.\nSe usarmos a função str_view_all() pssando nossa “Str_Teste” e o padrão de busca “a”, observamos que teremos marcado apenas a letra “a” na string. Isto significa que o padrão de busca foi encontrado na string.\n\nstr_view_all (Str_Teste, \"a\")\n\n\n\n\n\nExemplo 2:\nVamos buscar agora pelo padrão do símbolo de ponto de interrogação “?”. Similar ao exemplo anterior, vemos que apenas o ponto de interrogação foi encontrado.\n\nstr_view_all (Str_Teste, \"\\\\?\")\n\n\n\n\n\nExemplo 3:\nVamos criar agora um padrão que busque por todos os digitos em nossa string.\n\nstr_view_all (Str_Teste, \"\\\\d\")\n\n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nPara buscarmos pelo inverso do caso anterior, ou seja, todos os caracteres que NÃO são digitos, usamos a letra “D” maiúscula. Isto é válido também para os casos de “\\\\S” e “\\\\W” que seriam o inverso de “\\\\s” e “\\\\w” respectivamente.\n\n\n\nstr_view_all (Str_Teste, \"\\\\D\")\n\n\n\n\n\nExemplo 4:\nVamos criar agora um padrão que busque por todos os digitos e letras em nossa string.\n\nstr_view_all (Str_Teste, \"[:alnum:]\")\n\n\n\n\n\n\n\n5.9.2 Quantificadores\nAgora que já saber como criar padrões de busca para identificar diversos tipos de caracteres, veremos como difinir a quantidade desses caracteres em nosso padrão. Veja a tabela abaixo:\n\n\n\nRegex\nBusca\n\n\n\n\n?\nZero ou um\n\n\n*\nZero ou mais\n\n\n+\nUm ou mais\n\n\n{n}\nExatamente n\n\n\n{n,}\nn ou mais\n\n\n{n,m}\nEntre n e m\n\n\n\nVamos ver como utilizamos estes quantificadores juntamente com os caracteres especiais vistos anteriormente (ver Combinando Caracteres).\nPara os exemplos a seguir utilizaremos a seguinte string de teste: Str_Teste_2 = “.a.aa.aaa”\n\nStr_Teste_2 <- \".a.aa.aaa\"\n\nExemplo 1:\nDigamos que queremos buscar em nossa string de teste “Str_Teste” a letra “a” zero ou uma vez, para isso faremos:\n\nstr_view_all(Str_Teste_2, \"a?\")\n\n\n\n\n\nNeste caso, todas as vezes que a funções encontrar a letra “a” zero ou uma vez, elá irá marcar.\n\n\n\n\n\n\nAviso\n\n\n\nSe usarmos a função str_view() ela irá utilizar o padrão apenas até o primeiro encontro e depois irá para a busca, veja:\n\n\n\nstr_view(Str_Teste_2, \"a?\")\n\n\n\n\n\nObserve que a busca para logo no primeiro caractere, pois estamos buscando pela letra “a” ZERO ou mais vezes.\nExemplo 2:\nAgora vamos iremos buscar pela letra “a” UMA ou mais vezes, porém iremos utilizar a função str_view() ou invés da str_view_all(), parando a busca assim que o primeiro encontro ocorra:\n\nstr_view(Str_Teste_2, \"a+\")\n\n\n\n\n\nExemplo 3:\nNeste exemplo, queremos criar um padrão de busca pela letra “a”, mas que ela ocorra DUAS a TRÊS vezes.\n\nstr_view(Str_Teste_2, \"a{2,3}\")\n\n\n\n\n\nVeja que ele localizou apenas as duas letras “aa” e não marcou as letras “aaa”. Isto é porque utilizamos a função str_view(), que parou a busca assim que a primeiro encontro ocorreu. Se quisermos continuar a busca, devemos utilizar a função str_view_all().\n\nstr_view_all(Str_Teste_2, \"a{2,3}\")\n\n\n\n\n\nExemplo 4:\nNeste exemplo, usaremos a tabela frutas, criada quando descrevemos a função str_c. Veja com ela era para se recordar:\n\nfrutas |> \n  head() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nova_string\n    \n  \n  \n    Apple\na_1_1_a\n    Apricot\nb_2_2_b\n    Avocado\nc_3_3_c\n    Banana\nd_4_4_d\n    Blackberry\ne_5_5_e\n    Blueberry\nf_6_6_f\n  \n  \n  \n\n\n\n\nDigamos que precisamos extrair apenas os numeros da coluna “nova_string”. E colocá-los em uma nova coluna chamda “numeros”.\nNeste caso, podemos usar a função str_extract() com um padrão que encontre um número de 0 até 9, seguido por um ou mais “qualquer caractere” e depois outro número de 0 até 9.\nEste padrão irá encontrar padrões como “1_1” ou “2_2”.\nEm seguida, usamos um outro padrão [:punct:] na função str_remove para remover a pontuação.\n\nfrutas |> \n  mutate (numeros = str_extract(nova_string, \"[0-9].+[0-9]\")) |> \n  mutate (numeros = str_remove(numeros, \"[:punct:]\")) |> \ngt()\n\n\n\n\n\n  \n  \n    \n      name\n      nova_string\n      numeros\n    \n  \n  \n    Apple\na_1_1_a\n11\n    Apricot\nb_2_2_b\n22\n    Avocado\nc_3_3_c\n33\n    Banana\nd_4_4_d\n44\n    Blackberry\ne_5_5_e\n55\n    Blueberry\nf_6_6_f\n66\n    Cherry\ng_7_7_g\n77\n    Coconut\nh_8_8_h\n88\n    Custard-Apple\ni_9_9_i\n99\n    Dragonfruit\nj_10_10_j\n1010\n    Fig\nk_11_11_k\n1111\n    Gooseberry\nl_12_12_l\n1212\n    Grapes\nm_13_13_m\n1313\n    Guava\nn_14_14_n\n1414\n    Jackfruit\no_15_15_o\n1515\n    Java Plum\np_16_16_p\n1616\n    Kiwifruit\nq_17_17_q\n1717\n    Lime\nr_18_18_r\n1818\n    Mango\ns_19_19_s\n1919\n    MuskMelon\nt_20_20_t\n2020\n    Olives\nu_21_21_u\n2121\n    Orange\nv_22_22_v\n2222\n    Papaya\nw_23_23_w\n2323\n    Peach\nx_24_24_x\n2424\n    Pear\ny_25_25_y\n2525\n    Pineapple\nz_26_26_z\n2626\n    Pomegranate\nA_27_27_A\n2727\n    Strawberry\nB_28_28_B\n2828\n    Tamarind\nC_29_29_C\n2929\n    Watermelon\nD_30_30_D\n3030\n  \n  \n  \n\n\n\n\n\n\n5.9.3 Alternadores\nAté aqui, utilizamos os caracteres especiais (Combinando Caracteres) e sabemos como localizá-los em diversas quantidades (Quantificadores). Mas em muitos casos precisamos organizá-los de forma lógica, possibilitando utilizá-los em combinações mais flexíveis. Para isto, utilizamos os símbolos de alternadores, veja:\n\nPara os exemplos a seguir utilizaremos a seguinte string de teste: Str_Teste_3 = “abcde”\n\n\nRegex\nBusca\n\n\n\n\n|\nOU\n\n\n[ ]\nUm dos\n\n\n[^ ]\nTudo exceto\n\n\n[ - ]\nRange\n\n\n\n\nStr_Teste_3 <- \"abcde\"\n\nExemplo 1:\nDigamos que desejamos criar um padrão que busque pela letras “ab” OU a letra “d”, para isto podemos usar:\n\nstr_view_all(Str_Teste_3, \"ab|d\")\n\n\n\n\n\nExemplo 2:\nDigamos que desejamos criar um padrão que busque qualquer um dos caracteres “abe”, para isto podemos usar:\n\nstr_view_all(Str_Teste_3, \"[abe]\")\n\n\n\n\n\nExemplo 3:\nDigamos que desejamos criar um padrão que busque qualquer um range de letras entre as letras “a” até a “c”, para isto podemos usar:\n\nstr_view_all(Str_Teste_3, \"[a-c]\")\n\n\n\n\n\nExemplo 4:\nNeste exemplo, usaremos novamente a tabela frutas, criada quando descrevemos a função str_c.\nDigamos que precisamos filtrar nesta tabela, apenas as frutas que possuem nomes compostos, ou seja, separados por espaço ou uma pontuação (ex “-”).\nPodemos usar a função filter() passando o resultado da função str_detect() junto com um padrão. Há diversas maneiras de construir este padrão. Aqui optar por buscar por caracteres alfa-numéricos (letras e números) e usamos o alternador [^ ] para negar tais caracteres, portanto, iremos identificar se a string NÃO possui letras ou números.\n\nfrutas |> \n  filter (str_detect(name, \"[^[:alnum:]]\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nova_string\n    \n  \n  \n    Custard-Apple\ni_9_9_i\n    Java Plum\np_16_16_p\n  \n  \n  \n\n\n\n\n\n\n5.9.4 Ancoragem\nPara definir se a sequência do padrão de busca está no início ou fim da string, utilizamos as expressões de ancoragem:\n\n\n\nRegex\nBusca\n\n\n\n\n^\nInício da string\n\n\n$\nFim da string\n\n\n\nPara os exemplos a seguir utilizaremos a seguinte string de teste: Str_Teste_4 = “aaa”\n\nStr_Teste_4 <- \"aaa\"\n\nExemplo 1:\nPara criar um padrão que busque a letra “a” apenas no fim da string, usamos:\n\nstr_view_all(Str_Teste_4, \"a$\")\n\n\n\n\n\nExemplo 2:\nPara criar um padrão que busque a letra “a” apenas no início da string, usamos:\n\nstr_view_all(Str_Teste_4, \"^a\")\n\n\n\n\n\nExemplo 3:\nNeste exemplo, usaremos novamente a tabela frutas, criada quando descrevemos a função str_c.\nDigamos que queremos filtrar apenas as frutas que terminem com a letra “a” E também que terminem com a letra “o”. Podemos fazer:\n\nfrutas |> \n  filter (str_detect(name, \"[ao]$\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nova_string\n    \n  \n  \n    Avocado\nc_3_3_c\n    Banana\nd_4_4_d\n    Guava\nn_14_14_n\n    Mango\ns_19_19_s\n    Papaya\nw_23_23_w\n  \n  \n  \n\n\n\n\n\n\n5.9.5 Grupos\nVocê pode utilizar parênteses ( ) para definir expressões de precedência ou para serem referenciados posteriormente através da ordem de criação.\nPara os exemplos a seguir utilizaremos a seguinte string de teste: Str_Teste_5 = “abbaab”\n\nStr_Teste_5 <- \"abbaab\"\n\nExemplo 1:\nDigamos que tenhamos a string “Blueberry” e você queira criar um padrão que busque pela letra “e” precedida das letras “lu” OU “b”.\nNeste caso, devemos criar um grupo de precedência para “lu” OU “b”. Para isto iremos colocar esta parte da expressão entre parênteses (lu|b). agora podemos utilzar este grupo e concluir o padrão de busca conforme a seguir:\n\nstr_view_all(\"Blueberry\", \"(lu|b)e\")\n\n\n\n\n\nVeja que se nossa string fosse “Blueberry is special”, a letra “e” de “special” não seria encontrada:\n\nstr_view_all(\"Blueberry is special\", \"(lu|b)e\")\n\n\n\n\n\nSe quisermos criar um padrão que encontre a letra “e” precedida de qualquer letra, podemos fazer:\n\nstr_view_all(\"Blueberry is special\", \"([:alpha:])e\")\n\n\n\n\n\nExemplo 2:\nAo criar um grupo, como vimos no exemplo anterior, podemos fazer referência à este grupo usando \\\\n, on n é a ordem de criação do grupo.\nPor exemplo, digamos que criamos um grupo utilizando os parênteses ( ) que contenha apenas letra “a”. Seu código ficaria (a), e ele poderia ser referenciado com \\\\1, pois foi o primeiro grupo a ser criado.\nDigamos que agora, você crie um segundo grupo com a letra “b”, seu código ficaria (b) e poderia ser referenciado com \\\\2.\nSabendo como criar os grupos e como referênciá-los, podemos montar um padrão de busca utilizando tanto os grupos quanto suas referência. Veja este exemplo:\n\nstr_view_all(Str_Teste_5, \"(a)(b)\\\\2\\\\1\")\n\n\n\n\n\nNeste exemplo, nosso padrão busca por “ba”, atraveś de \\\\2\\\\1, desde que tenham precedência de “ab”, através dos grupos (a)(b).\nExemplo 3:\nDigamos que tenhamos a string “Tem uma banana na mesa”. Queremos criar uma padrão que busque as letras “nana”. Apesar de termos soluções mais simples, poderíamos criar um grupo contendo “na” e usar a ordem de referência para concluir a expressão:\n\nstr_view_all(\"Tem uma banana na mesa\", \"(na)\\\\1\")\n\n\n\n\n\nExemplo 4:\nNeste exemplo, usaremos novamente a tabela frutas, criada quando descrevemos a função str_c.\nAqui iremos obter o mesmo resultado para o Problema 4 descrito na seção Quantificadores.\nPorém agora vamos usar a função str_replace() e o suporte à grupos que acabamos de ver para atingir o mesmo resultado, ou seja, extrair apenas os números da coluna nova_string.\n\nfrutas |> \n  mutate (numeros = str_replace(nova_string, \".+([0-9]).?([0-9]).+\", \"\\\\1\\\\2\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nova_string\n      numeros\n    \n  \n  \n    Apple\na_1_1_a\n11\n    Apricot\nb_2_2_b\n22\n    Avocado\nc_3_3_c\n33\n    Banana\nd_4_4_d\n44\n    Blackberry\ne_5_5_e\n55\n    Blueberry\nf_6_6_f\n66\n    Cherry\ng_7_7_g\n77\n    Coconut\nh_8_8_h\n88\n    Custard-Apple\ni_9_9_i\n99\n    Dragonfruit\nj_10_10_j\n10\n    Fig\nk_11_11_k\n11\n    Gooseberry\nl_12_12_l\n12\n    Grapes\nm_13_13_m\n13\n    Guava\nn_14_14_n\n14\n    Jackfruit\no_15_15_o\n15\n    Java Plum\np_16_16_p\n16\n    Kiwifruit\nq_17_17_q\n17\n    Lime\nr_18_18_r\n18\n    Mango\ns_19_19_s\n19\n    MuskMelon\nt_20_20_t\n20\n    Olives\nu_21_21_u\n21\n    Orange\nv_22_22_v\n22\n    Papaya\nw_23_23_w\n23\n    Peach\nx_24_24_x\n24\n    Pear\ny_25_25_y\n25\n    Pineapple\nz_26_26_z\n26\n    Pomegranate\nA_27_27_A\n27\n    Strawberry\nB_28_28_B\n28\n    Tamarind\nC_29_29_C\n29\n    Watermelon\nD_30_30_D\n30\n  \n  \n  \n\n\n\n\nDetalhes do exemplo acima:\nObserve que a função str_replace(), recebe dois padrões, sendo o primeiro de busca e o segundo daquilo que iremos substituir o primeiro.\nNeste caso, nosso padrão de busca, encontra “qualquer caractere” “uma ou mais vezes”, depois cria um “grupo com números de 0 a 9”, seguido por “qualquer caractere zero ou uma vez” e depois cria o segundo “grupo com números de 0 à 9” e conclui com “qualquer caractere uma ou mais vezes”.\nCom nosso padrão de busca criado, iremos criar nosso padrão de substituição, ou seja, aquilo que for encontrado pelo padrão de busca, será substituído pelo padrão de substituição.\nNosso padrão de substituição ficou simples (“\\\\1\\\\2”). Veja que ele apenas pega o conteúdo do grupo 1 e grupo 2 criados no padrão de busca usando parênteses para substituir.\n\n\n5.9.6 Pesquisa ao Redor\nEm alguns casos, precisamos criar um padrão que olhe ao redor para encontrar o que buscamos.\nHá símbolos para definirmos grupos que estão precedendo o que buscamos e há símbolos para definirmos grupos que estão posteriores ao que buscamos. Há também símbolos para negar os casos anteriores e posteriores.\nVeja a tabela:\n\nPara os exemplos a seguir utilizaremos a seguinte string de teste: Str_Teste_6 = “bacad”\n\n\nRegex\nBusca\n\n\n\n\n(?= )\nSeguido por\n\n\n(?! )\nNão seguido por\n\n\n(?<= )\nPrecedido por\n\n\n(?<! )\nNão precedido por\n\n\n\n\nStr_Teste_6 <- \"bacad\"\n\nExemplo 1:\nVamos criar um padrão de busca que localize a letra “a”, mas queremos a(s) letra(s) “a” que são seguidas apenas pela letra “c”.\nPara isso iremos criar um grupo (“c”), mas como é um grupo que irá seguir aquilo que buscamos, ao invés dos parêntese apenas, iremos utilizar o símbolo da tabela anterior “?=”a fazer (?=c). Depois adicionamos a busca pela letra “a”.\n\nstr_view_all(Str_Teste_6, \"a(?=c)\")\n\n\n\n\n\nExemplo 2:\nVamos criar um padrão de busca que localize a letra “a”, mas queremos a(s) letra(s) “a” que são precedidas pela letra “b”. Usando a mesma tabela e raciocínio do exemplo anterior, podemos criar o grupo com a letra b, mas como é um grupo de precedência, temos que adicionar os símbolos “?<=” e fazer:\n\nstr_view_all(Str_Teste_6, \"(?<=b)a\")\n\n\n\n\n\nExemplo 4:\nNeste exemplo, usaremos novamente a tabela frutas, criada quando descrevemos a função str_c.\nDigamos que iremos filter as frutas que comecem com as letras “B” e “P” se forem seguidas das letras “e” e “l”. Desta forma, não teremos na saída frutas como “Banana” ou “Pineapple”\n\nfrutas |> \n  filter(str_detect(name, \"^[BP](?=[el])\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      nova_string\n    \n  \n  \n    Blackberry\ne_5_5_e\n    Blueberry\nf_6_6_f\n    Peach\nx_24_24_x\n    Pear\ny_25_25_y"
  },
  {
    "objectID": "Manipulacao_Strings/Manipulacao de strings com stringr.html#outras-interpretações",
    "href": "Manipulacao_Strings/Manipulacao de strings com stringr.html#outras-interpretações",
    "title": "5  Manipulacao de Strings com STRINGR",
    "section": "5.10 Outras Interpretações",
    "text": "5.10 Outras Interpretações\n\n5.10.0.1 regex\nConforme visto na seção Expressões Regulares, o interpretador padrão das funções do pacote stringr, é o regex, ou seja, sempre que tivermos o parâmetro pattern =, se não especificarmos nada, ele irá interpretar a string deste parêmetro como se fosse uma expressão regular (regex).\nA seguir, veremos como mudar este padrão e introduzir outros interpretadores disponíveis.\n\n\n5.10.0.2 fixed\nPara buscar bytes nativos (raw), podemos usar o interpretador fixed(). Esta opção é bastante rápida, mas pode perder alguns caracteres que podem estar representados de maneiras diferentes (ex não ASCII).\nExemplo:\n\nstr_detect(\"\\u0130\", fixed(\"i\"))\n\n[1] FALSE\n\n\n\n\n5.10.0.3 coll\nPara comparar strings respeitando seu agrupamento. Interessante para strings com localização e não sensíveis a maiúsculas ou minúsculas.\nExemplo:\n\nstr_detect(\"\\u0130\", coll(\"i\", TRUE, locale = \"tr\"))\n\n[1] TRUE\n\n\n\n\n5.10.0.4 boundary\nPara localizar fronterias entre caracteres. quebra de linhas, sentenças ou palavras.\n\n\n\n\n\n\nDica\n\n\n\nPara maiores informações veja os exemplo digitando ?stringr::modifiers"
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "",
    "text": "A seguir temos vários exemplos de transformação de dados utilizando o pacote DYPLR do R. Para saber mais sobre este pacote, acesse:\nhttps://cran.r-project.org/package=dplyr.\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\nPara os exemplos à seguir, iremos usar os seguintes pacotes:\n\ntidyverse\n\n\n\ngt\n\n\nlibrary(tidyverse)\nlibrary (gt)\n\n\n\nA maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na Folha de Referência do dyplr disponível no site do RStudio.\nPara a maioria dos exemplos utilizaremos as bases de dados mtcars e starwars provenientes do pacote datasets e dplyr.\n\n\n\n\n\n\nNota\n\n\n\nEm geral, ao final de cada comando, você verá a chamada à função gt(). Isto é apenas para a formatação da tabela de saída e não é necessário para que você entenda os comandos precedentes. Em alguns casos, onde o volume de dados de saída pode ser extenso, usamos também a função head() para mostrar apenas as linhas iniciais. Quando o exemplo possui muitas colunas de saída, eventualmente utilizamos a função select() para selecionar apenas algumas colunas.\n\n\n\nMTCARS: Dados de consumo de combustível, performance e design de 32 automóveis ( 1974 Motor Trend US magazine)\n\nmtcars |> \n  head () |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n  \n\n\n\n\n\nSTARWARS: Dados dos personagens de STAR WARS\n\nstarwars |> \n  select(1:8) |> \n  head() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      height\n      mass\n      hair_color\n      skin_color\n      eye_color\n      birth_year\n      sex\n    \n  \n  \n    Luke Skywalker\n172\n77\nblond\nfair\nblue\n19.0\nmale\n    C-3PO\n167\n75\nNA\ngold\nyellow\n112.0\nnone\n    R2-D2\n96\n32\nNA\nwhite, blue\nred\n33.0\nnone\n    Darth Vader\n202\n136\nnone\nwhite\nyellow\n41.9\nmale\n    Leia Organa\n150\n49\nbrown\nlight\nbrown\n19.0\nfemale\n    Owen Lars\n178\n120\nbrown, grey\nlight\nblue\n52.0\nmale\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nO termo data-frame descrito ao longo deste texto, é utilizado de forma livre para objetos do tipo data.frame, tibble, entre outros. Pense como se fosse uma tabela de um banco de dados e/ou uma planilha do MS Excel, contendo linhas e colunas. Apesar de não ser rigorosamente igual à uma tabela, muitas vezes usaremos estes termos de forma intercambiável para facilitar o entendimento de iniciantes.\n\n\n\n\n\nDados organizados (tidy) são estruturados onde:\nCada variável está em sua própria coluna e cada observação está em sua própria linha.\n\nCanalização (Piping) é uma forma de sequenciar as funções, facilitando a leitura de várias funções em conjunto. O símbolo |> ou %>% podem ser utilizados para esta finalidade.\nExemplo: x |> f(y), é o mesmo que f(x,y)"
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#resumindo-observações",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#resumindo-observações",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.2 Resumindo Observações",
    "text": "4.2 Resumindo Observações\nFunções de resumo recebem vetores como entrada e retornam um único valor.\n\n4.2.0.1 summarise\n\nsummarise (mtcars, media=mean(mpg)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      media\n    \n  \n  \n    20.09062\n  \n  \n  \n\n\n\n\nCria um novo data-frame. Ele gera uma linha para cada combinação de grupos de variáveis. Se não houver grupos, a saída será uma única linha resumindo todas as observações da entrada.\nNo exemplo acima, não especificamos nenhum grupo (mais na seção Agrupando Observações), por isso, ele retorna apenas uma linha resumindo todas as observações de mtcars. Como também especificamos a função de mean(), o valor retornado será a média da coluna mpg para todas as observações do data frame em uma única variável (coluna) chamada média.\nOutra format de se escrever o comando acima, utilizando a canalização (“pinping”) descrita acima, seria:\n\nmtcars |> \n  summarise(média = mean(mpg))\n\nVer a seção de Funções de Resumo para mais detalhes.\n\n\n4.2.0.2 count\nConta valores únicos de uma ou mais variáveis.\n\nmtcars |> \n  count (cyl) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      n\n    \n  \n  \n    4\n11\n    6\n7\n    8\n14\n  \n  \n  \n\n\n\n\nNo exemplo acima, contamos os valores únicos da variável cyl e mostramos na variável n. Um equivalente seria utilizar o summarise com o grupo criado na variável cyl: mtcars |> group_by(cyl) |> summarise(n = n()).\nMais sobre a função group_by na seção Agrupando Observações."
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#agrupando-observações",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#agrupando-observações",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.3 Agrupando Observações",
    "text": "4.3 Agrupando Observações\n\n4.3.0.1 group_by\nUse group_by (.data, …, .add = FALSE, .drop = TRUE) para criar uma cópia da tabela agrupada por colunas. As funções do dplyr irão manipular cada grupo separadamente e combinar os resultados.\n\n\n\n\n\n\nImportante\n\n\n\nSe compararmos o resultado de uma tabela antes e depois do agrupamento (group_by), apenas uma informação sobre o grupo será visível.\nIsto significa que o agrupamento só afetará o resultado de saída se utilizado em conjunto com funções que entendam esta mudança de contexto, como as funções do dyplr.\n\n\nPor exemplo, ANTES de agruparmos pela variável cyl (group_by(cyl)) temos:\n\nmtcars |> \n  as_tibble()\n\n\n\n  \n\n\n\nDEPOIS do group_by:\n\nmtcars |> \n  group_by(cyl) \n\n\n\n  \n\n\n\nVeja que, exceto pela informação :\n’# Groups: cyl [3]\nTodo o restante da saída é o mesmo. Por isso, é importante que utilizemos o contexto do grupo, junto com outra função.\nExemplo: Se quiser criar uma tabela com a função summarise() com apenas o grupo de cilindradas, podemos usar:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n    \n  \n  \n    4\n    6\n    8\n  \n  \n  \n\n\n\n\nSupondo que quiséssemos agora, saber o número de carros, agrupados pela variável cyl, podemos utilizar a função summarise, após o agrupamento, criando uma coluna através da função n().\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(num_automoveis = n()) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      num_automoveis\n    \n  \n  \n    4\n11\n    6\n7\n    8\n14\n  \n  \n  \n\n\n\n\nEm outro exemplo, podemos extrair o consumo médio (miles/gallon) dos veículos agrupado pelo número de cilindros destes veículos.\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(consumo_medio = mean(mpg)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      consumo_medio\n    \n  \n  \n    4\n26.66364\n    6\n19.74286\n    8\n15.10000\n  \n  \n  \n\n\n\n\nO agrupamento pode ser feito por mais de uma variável também. Por exemplo, se quisermos obter o consumo médio (miles/gallon) dos veículos agrupado pelo número de cilindros destes veículos e também por número de marchas, podemos ter:\n\n\n\n\n\n\nNota\n\n\n\nA saída da função summarise, dependendo do caso, irá ser agrupada também automaticamente, se quiser que isto não aconteça, utiliza a opção .groups=“drop”.\n\n\n\nmtcars |> \n  group_by(cyl, gear) |> \n  summarise(consumo_médio = mean(mpg), .groups = \"drop\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      gear\n      consumo_médio\n    \n  \n  \n    4\n3\n21.500\n    4\n4\n26.925\n    4\n5\n28.200\n    6\n3\n19.750\n    6\n4\n19.750\n    6\n5\n19.700\n    8\n3\n15.050\n    8\n5\n15.400\n  \n  \n  \n\n\n\n\nA função un_group() remove os grupos definidos em uma tabela. É uma boa prática, remover os grupos após efetuar uma sumarização, por exemplo, afim de evitar resultados indesejáveis em sumarizações futuras. Por exemplo:\n\nmtcars |> \n  group_by(cyl, gear) |> \n  summarise(numero_marchas = n()) |> \n  ungroup() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      gear\n      numero_marchas\n    \n  \n  \n    4\n3\n1\n    4\n4\n8\n    4\n5\n2\n    6\n3\n2\n    6\n4\n4\n    6\n5\n1\n    8\n3\n12\n    8\n5\n2\n  \n  \n  \n\n\n\n\nNo caso acima, se não tivessemos utilizado o desagrupamento (un_group), o resultado ainda teria os grupos demarcados.\n\n\n4.3.0.2 rowwise\nUse rowwise(.data, …) para agrupar dados em linhas individuais. Funções do dyplr irão computar os resultados para cada linha.\nNo exemplo abaixo, a tabela de dados startwars, possui uma variável (films) que é o tipo lista, ou seja, a coluna contém uma lista de filmes para cada personagem (observação).\nSupondo que quiséssemos saber em quantos filmes cada personagem aparece:\n\nstarwars |> \n  select(name, films) |>\n  rowwise() |>\n  mutate(quantos_filmes = length(films)) |> \n  head () |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      name\n      films\n      quantos_filmes\n    \n  \n  \n    Luke Skywalker\nThe Empire Strikes Back, Revenge of the Sith, Return of the Jedi, A New Hope, The Force Awakens\n5\n    C-3PO\nThe Empire Strikes Back, Attack of the Clones, The Phantom Menace, Revenge of the Sith, Return of the Jedi, A New Hope\n6\n    R2-D2\nThe Empire Strikes Back, Attack of the Clones, The Phantom Menace, Revenge of the Sith, Return of the Jedi, A New Hope, The Force Awakens\n7\n    Darth Vader\nThe Empire Strikes Back, Revenge of the Sith, Return of the Jedi, A New Hope\n4\n    Leia Organa\nThe Empire Strikes Back, Revenge of the Sith, Return of the Jedi, A New Hope, The Force Awakens\n5\n    Owen Lars\nAttack of the Clones, Revenge of the Sith, A New Hope\n3\n  \n  \n  \n\n\n\n\nEm geral, utilizamos a função rowwise quando não temos uma função vetorizada, isto é, que não retorna um vetor e precisamos aplicá-la em cada linha da tabela.\n\n\n\n\n\n\nNota\n\n\n\nAqui utilizamos também a função head () que retorna apenas as primeiras linhas de uma tablea e não todo seu conteúdo.\n\n\nVeja a seção de Funções Vetorizadaspara maiores informações."
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#manipulando-observações",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#manipulando-observações",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.4 Manipulando Observações",
    "text": "4.4 Manipulando Observações\n\n4.4.1 Extração de Observações\nO dplyr possui uma série de funções que nos ajudam a extrair observações (linhas) de uma tabela, dentre estas, temos:\n\n4.4.1.1 filter\nExtrai linhas de uma tablea que satisfazem o critério lógico.\nfilter(.data, …, .preserve = FALSE)\nExemplo: Para extrair apenas os veículos que possuem consumo (miles/galon) acima de 20, podemos usar:\n\nfilter(mtcars, mpg > 20) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n  \n  \n  \n\n\n\n\nPodemos utilizar operadores lógicos para ajustar os critérios do filtro, como por exemplo, os operadores abaixo:\n==, >, >=, &, |, !, xor(), is.na(), between(), near(), entre outros\nPor exemplo, para filtrar os veículos com consumo acima de 20 E com apenas 3 marchas, temos:\n\nmtcars |> \n  filter(mpg > 20 & gear == 3) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n  \n  \n  \n\n\n\n\n\n\n4.4.1.2 distinct\nRemove linhas com valores duplicados, retornando apenas os valores únicos da variável (coluna).\ndistinct(.data, …, .keep_all = FALSE) .\nPor exemplo, se precisarmos saber quais os valores da variável gear (marcha), podemos utilizar:\n\nmtcars |> \n  distinct(gear) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      gear\n    \n  \n  \n    4\n    3\n    5\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nSe utilizar o código acima, sem utilizar a função gt(), verá que o R possui um “nome” para as linhas. É importante ressaltar que este nome NÃO é uma variável da tabela, ou seja, não temos uma coluna com o “nome” do veículo, é por isso que você vê nomes de veículos, mesmo pedindo os valores únicos das marchas. Para maiores informações sobre isso, veja a seção Nome de Linhas.\n\n\n\n\n4.4.1.3 slice\nSeleciona linhas pelas suas respectivas posições nda tabela.\nslice(.data, …, .preserve = FALSE)\nPor exemplo, para selecionarmos apenas da linha 10 até a linha 15 da tabela usamos:\n\n mtcars |> \n   slice(10:15) |> \n   gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    19.2\n6\n167.6\n123\n3.92\n3.44\n18.30\n1\n0\n4\n4\n    17.8\n6\n167.6\n123\n3.92\n3.44\n18.90\n1\n0\n4\n4\n    16.4\n8\n275.8\n180\n3.07\n4.07\n17.40\n0\n0\n3\n3\n    17.3\n8\n275.8\n180\n3.07\n3.73\n17.60\n0\n0\n3\n3\n    15.2\n8\n275.8\n180\n3.07\n3.78\n18.00\n0\n0\n3\n3\n    10.4\n8\n472.0\n205\n2.93\n5.25\n17.98\n0\n0\n3\n4\n  \n  \n  \n\n\n\n\nVeja que em alguns casos, podemos utilizar um equivalente filtro para obter o mesmo resultado:\n\nmtcars |> \n  filter(between(row_number(), 10, 15)) |>  \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    19.2\n6\n167.6\n123\n3.92\n3.44\n18.30\n1\n0\n4\n4\n    17.8\n6\n167.6\n123\n3.92\n3.44\n18.90\n1\n0\n4\n4\n    16.4\n8\n275.8\n180\n3.07\n4.07\n17.40\n0\n0\n3\n3\n    17.3\n8\n275.8\n180\n3.07\n3.73\n17.60\n0\n0\n3\n3\n    15.2\n8\n275.8\n180\n3.07\n3.78\n18.00\n0\n0\n3\n3\n    10.4\n8\n472.0\n205\n2.93\n5.25\n17.98\n0\n0\n3\n4\n  \n  \n  \n\n\n\n\n\n\n4.4.1.4 slice_sample\nPara randomicamente selecionar linhas da tabela. Use n para selecionar o número de linhas ou prop para selecionar um percentual das linhas.\nslice_sample(.data, …, n, prop, weight_by = NULL, replace = FALSE) .\nPara selecionar 5 linhas randomicas da tabela usamos:\n\nmtcars |> \n  slice_sample(n = 5, replace = TRUE) |>  \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n  \n  \n  \n\n\n\n\nPara selecionar 25% do total de linhas da tabela de forma dandomica usamos:\n\nmtcars |> \n  slice_sample(prop = 0.25, replace = TRUE) |>  \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n  \n  \n  \n\n\n\n\n\n\n4.4.1.5 slice_min\nSeleciona linhas com valores minímo (slice_min) ou máximo (slice_max) de uma variável.\nslice_min(.data, order_by, …, n, prop, with_ties = TRUE) and slice_max() .\nPor exemplo, com base no menor valor da variável de consumo do veículo (mpg), retorne 25% da tabela.\n\nmtcars |> \n  slice_min(mpg, prop = 0.25) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n  \n  \n  \n\n\n\n\nOutro exemplo, poderia ser que você precise retornar os 5 veículos de maior consumo:\n\nmtcars |> \n  slice_max(mpg, n = 5) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n  \n  \n  \n\n\n\n\n\n\n4.4.1.6 slice_head\nSeleciona as primeiras (slice_head) or últimas (slide_tail) linhas de uma tabela.\nslice_head(.data, …, n, prop) and slice_tail() .\nPor exemplo, vamos selecionar as 5 primeiras linhas de mtcars:\n\n\n\n\n\n\nNota\n\n\n\nApenas para exemplificar, no código abaixo, deixamos a função gt “mostrar” os nomes das linhas em sua saída. Para maiores informações sobre isso, veja a seção Nome de Linhas.\n\n\n\nmtcars |> \n  slice_head(n = 5) |> \n  gt(rownames_to_stub = TRUE)\n\n\n\n\n\n  \n  \n    \n      \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    Mazda RX4\n21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    Mazda RX4 Wag\n21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    Datsun 710\n22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    Hornet 4 Drive\n21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    Hornet Sportabout\n18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n  \n  \n  \n\n\n\n\n\n\n\n4.4.2 Arranjar Observações\n\n4.4.2.1 arrange\nA função arrange ordena linhas por valores de uma coluna(s) (menor para maior), use com a função desc() para ordenar de maior para menor.\narrange(.data, …, .by_group = FALSE) arrange(mtcars, mpg) ou arrange(mtcars, desc(mpg))\nNo exemplo abaixo, vamos ordenar a variável mpg, de forma a mostrar primeiro os veículos com menor consumo de combustível até o de maior consumo:\n\nmtcars |> \n  arrange(mpg) |> \n  gt(rownames_to_stub = TRUE)\n\n\n\n\n\n  \n  \n    \n      \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    Cadillac Fleetwood\n10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n    Lincoln Continental\n10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n    Camaro Z28\n13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n    Duster 360\n14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n    Chrysler Imperial\n14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n    Maserati Bora\n15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n    Merc 450SLC\n15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n    AMC Javelin\n15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n    Dodge Challenger\n15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n    Ford Pantera L\n15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n    Merc 450SE\n16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n    Merc 450SL\n17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n    Merc 280C\n17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n    Valiant\n18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n    Hornet Sportabout\n18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    Merc 280\n19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n    Pontiac Firebird\n19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n    Ferrari Dino\n19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n    Mazda RX4\n21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    Mazda RX4 Wag\n21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    Hornet 4 Drive\n21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    Volvo 142E\n21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n    Toyota Corona\n21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n    Datsun 710\n22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    Merc 230\n22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n    Merc 240D\n24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n    Porsche 914-2\n26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n    Fiat X1-9\n27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n    Honda Civic\n30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    Lotus Europa\n30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n    Fiat 128\n32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n    Toyota Corolla\n33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n  \n  \n  \n\n\n\n\n\n\n\n4.4.3 Adicionar Observações\nAlgumas vezes precisamos adicionar observações (linhas) em uma tabela já existente, neste caso podemos utilizar a função add_row().\n\n4.4.3.1 add_row\nadd_row(cars, speed = 1, dist = 1).\nNeste caso, iremos adicionar uma nova linha na tables cars (não mtcars), que possui apenas duas variáveis (speed e dist).\n\ncars |> \n  add_row(speed = 1, dist = 1) |> \n  tail() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      speed\n      dist\n    \n  \n  \n    24\n70\n    24\n92\n    24\n93\n    24\n120\n    25\n85\n    1\n1"
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#manipulando-variáveis",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#manipulando-variáveis",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.5 Manipulando Variáveis",
    "text": "4.5 Manipulando Variáveis\n\n4.5.1 Extração de Variáveis\nO dplyr possui uma série de funções que nos ajudam a obter um conjunto de variáveis (colunas) como um novo vetor ou nova tabela:\n\n4.5.1.1 pull\nExtrai valores da coluna como um vetor, por nome ou índice.\npull(.data, var = -1, name = NULL, …)\n\nmtcars |> \n  pull (wt) \n\n [1] 2.620 2.875 2.320 3.215 3.440 3.460 3.570 3.190 3.150 3.440 3.440 4.070\n[13] 3.730 3.780 5.250 5.424 5.345 2.200 1.615 1.835 2.465 3.520 3.435 3.840\n[25] 3.845 1.935 2.140 1.513 3.170 2.770 3.570 2.780\n\n\nNo exemplo acima, a coluna peso (wt), é extraída da tabela e um obeto do tipo vetor é retornado na saída.\nPodemos extrair um vator de uma colunas também utilizando o número da coluna. Se utilizarmos valores negativos, podemos extrair um vetor das colunas contando a partir do lado direto.\nPor exemplo, se quisermos extratir um vetor da penúltima coluna de uma tabela, podemos usar:\n\nmtcars |> \n  pull (-2)\n\n [1] 4 4 4 3 3 3 3 4 4 4 4 3 3 3 3 3 3 4 4 4 3 3 3 3 3 4 5 5 5 5 5 4\n\n\n\n\n4.5.1.2 select\nExtrai valores de uma ou mais variáveis (colunas) e retorna uma nova tabela, por nome ou índice.\nselect(.data, …)\nPor exemplo, podemos obter uma nova tabela contendo apenas as variáveis mpg e wt usando:\n\nmtcars |> \n  select (mpg, wt) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      wt\n    \n  \n  \n    21.0\n2.620\n    21.0\n2.875\n    22.8\n2.320\n    21.4\n3.215\n    18.7\n3.440\n    18.1\n3.460\n    14.3\n3.570\n    24.4\n3.190\n    22.8\n3.150\n    19.2\n3.440\n    17.8\n3.440\n    16.4\n4.070\n    17.3\n3.730\n    15.2\n3.780\n    10.4\n5.250\n    10.4\n5.424\n    14.7\n5.345\n    32.4\n2.200\n    30.4\n1.615\n    33.9\n1.835\n    21.5\n2.465\n    15.5\n3.520\n    15.2\n3.435\n    13.3\n3.840\n    19.2\n3.845\n    27.3\n1.935\n    26.0\n2.140\n    30.4\n1.513\n    15.8\n3.170\n    19.7\n2.770\n    15.0\n3.570\n    21.4\n2.780\n  \n  \n  \n\n\n\n\nA função select possui um série de opções que tornam a seleção das counas mais fáceis. A seguir temos algumas delas. Consulte a ajuda do select usando “?select” para obter a lista completa.\n\n: para selecionar um range consecutivo de colunas\n! para pegar o complemento de uma conjunto de colunas\n& e | para selecionar a intersecção ou união (E OU) de um conjunto de colunas\nc() para combinar seleções\n\nAlém disso, possui também algumas funções que ajudam na seleção como:\n\neveything(), last_col(), starts_with(), ends_with(), contains(), matches(), num_range()\n\nPor exemplo, se quisermos selecionar toda a base mtcars, exceto as colunas wt e mpg, podemos usar:\n\nmtcars |> \n  select(!c(mpg, wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      disp\n      hp\n      drat\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    6\n160.0\n110\n3.90\n16.46\n0\n1\n4\n4\n    6\n160.0\n110\n3.90\n17.02\n0\n1\n4\n4\n    4\n108.0\n93\n3.85\n18.61\n1\n1\n4\n1\n    6\n258.0\n110\n3.08\n19.44\n1\n0\n3\n1\n    8\n360.0\n175\n3.15\n17.02\n0\n0\n3\n2\n    6\n225.0\n105\n2.76\n20.22\n1\n0\n3\n1\n    8\n360.0\n245\n3.21\n15.84\n0\n0\n3\n4\n    4\n146.7\n62\n3.69\n20.00\n1\n0\n4\n2\n    4\n140.8\n95\n3.92\n22.90\n1\n0\n4\n2\n    6\n167.6\n123\n3.92\n18.30\n1\n0\n4\n4\n    6\n167.6\n123\n3.92\n18.90\n1\n0\n4\n4\n    8\n275.8\n180\n3.07\n17.40\n0\n0\n3\n3\n    8\n275.8\n180\n3.07\n17.60\n0\n0\n3\n3\n    8\n275.8\n180\n3.07\n18.00\n0\n0\n3\n3\n    8\n472.0\n205\n2.93\n17.98\n0\n0\n3\n4\n    8\n460.0\n215\n3.00\n17.82\n0\n0\n3\n4\n    8\n440.0\n230\n3.23\n17.42\n0\n0\n3\n4\n    4\n78.7\n66\n4.08\n19.47\n1\n1\n4\n1\n    4\n75.7\n52\n4.93\n18.52\n1\n1\n4\n2\n    4\n71.1\n65\n4.22\n19.90\n1\n1\n4\n1\n    4\n120.1\n97\n3.70\n20.01\n1\n0\n3\n1\n    8\n318.0\n150\n2.76\n16.87\n0\n0\n3\n2\n    8\n304.0\n150\n3.15\n17.30\n0\n0\n3\n2\n    8\n350.0\n245\n3.73\n15.41\n0\n0\n3\n4\n    8\n400.0\n175\n3.08\n17.05\n0\n0\n3\n2\n    4\n79.0\n66\n4.08\n18.90\n1\n1\n4\n1\n    4\n120.3\n91\n4.43\n16.70\n0\n1\n5\n2\n    4\n95.1\n113\n3.77\n16.90\n1\n1\n5\n2\n    8\n351.0\n264\n4.22\n14.50\n0\n1\n5\n4\n    6\n145.0\n175\n3.62\n15.50\n0\n1\n5\n6\n    8\n301.0\n335\n3.54\n14.60\n0\n1\n5\n8\n    4\n121.0\n109\n4.11\n18.60\n1\n1\n4\n2\n  \n  \n  \n\n\n\n\nSe quisermos selecionar apenas as 4 primeiras colunas e também a coluna wt, podemos usar:\n\nmtcars |> \n  select ((1:4) | wt) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      wt\n    \n  \n  \n    21.0\n6\n160.0\n110\n2.620\n    21.0\n6\n160.0\n110\n2.875\n    22.8\n4\n108.0\n93\n2.320\n    21.4\n6\n258.0\n110\n3.215\n    18.7\n8\n360.0\n175\n3.440\n    18.1\n6\n225.0\n105\n3.460\n    14.3\n8\n360.0\n245\n3.570\n    24.4\n4\n146.7\n62\n3.190\n    22.8\n4\n140.8\n95\n3.150\n    19.2\n6\n167.6\n123\n3.440\n    17.8\n6\n167.6\n123\n3.440\n    16.4\n8\n275.8\n180\n4.070\n    17.3\n8\n275.8\n180\n3.730\n    15.2\n8\n275.8\n180\n3.780\n    10.4\n8\n472.0\n205\n5.250\n    10.4\n8\n460.0\n215\n5.424\n    14.7\n8\n440.0\n230\n5.345\n    32.4\n4\n78.7\n66\n2.200\n    30.4\n4\n75.7\n52\n1.615\n    33.9\n4\n71.1\n65\n1.835\n    21.5\n4\n120.1\n97\n2.465\n    15.5\n8\n318.0\n150\n3.520\n    15.2\n8\n304.0\n150\n3.435\n    13.3\n8\n350.0\n245\n3.840\n    19.2\n8\n400.0\n175\n3.845\n    27.3\n4\n79.0\n66\n1.935\n    26.0\n4\n120.3\n91\n2.140\n    30.4\n4\n95.1\n113\n1.513\n    15.8\n8\n351.0\n264\n3.170\n    19.7\n6\n145.0\n175\n2.770\n    15.0\n8\n301.0\n335\n3.570\n    21.4\n4\n121.0\n109\n2.780\n  \n  \n  \n\n\n\n\n\n\n4.5.1.3 relocate\nMove colunas para uma nova posição e retonar uma tabela com esta nova order de colunas.\nrelocate(.data, …, .before = NULL, .after = NULL)\n\nmtcars |> \n  relocate (mpg, cyl, .after = last_col()) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      mpg\n      cyl\n    \n  \n  \n    160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n21.0\n6\n    160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n21.0\n6\n    108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n22.8\n4\n    258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n21.4\n6\n    360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n18.7\n8\n    225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n18.1\n6\n    360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n14.3\n8\n    146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n24.4\n4\n    140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n22.8\n4\n    167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n19.2\n6\n    167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n17.8\n6\n    275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n16.4\n8\n    275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n17.3\n8\n    275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n15.2\n8\n    472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n10.4\n8\n    460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n10.4\n8\n    440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n14.7\n8\n    78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n32.4\n4\n    75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n30.4\n4\n    71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n33.9\n4\n    120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n21.5\n4\n    318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n15.5\n8\n    304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n15.2\n8\n    350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n13.3\n8\n    400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n19.2\n8\n    79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n27.3\n4\n    120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n26.0\n4\n    95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n30.4\n4\n    351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n15.8\n8\n    145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n19.7\n6\n    301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n15.0\n8\n    121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n21.4\n4\n  \n  \n  \n\n\n\n\nNo exemplo acima, escolhermos mover as colunas mpg e cyl para depois (à direita) da última coluna (last_col()).\n\n\n\n4.5.2 Manipular Várias Variáveis de Uma Vez\nEm algumas situações, desejamos manipular várias variáveis (colunas) de uma só vez ou invés de cada coluna de cada vez. Para estes casos ,podemos usar as funções across e c_across.\n\n4.5.2.1 across\nResume ou alterar múltiplas colunas da mesma maneira. across(.cols, .funs, …, .names = NULL)\n\nmtcars |> \n  summarise(across(everything(), mean)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    20.09062\n6.1875\n230.7219\n146.6875\n3.596563\n3.21725\n17.84875\n0.4375\n0.40625\n3.6875\n2.8125\n  \n  \n  \n\n\n\n\nNo exemplo acima, varremos todas (everything) as colunas da tabela e resumimos aplicando a função de média (mean) nestas colunas.\nNo exemplo a seguir, iremos “varrer” as colunas 5 até 7 e arredondar seus valores com apenas um digito usando a função round().\n\nmtcars |> \n  mutate(across(5:7, ~ round(.x, digits = 1) )) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.9\n2.6\n16.5\n0\n1\n4\n4\n    21.0\n6\n160.0\n110\n3.9\n2.9\n17.0\n0\n1\n4\n4\n    22.8\n4\n108.0\n93\n3.9\n2.3\n18.6\n1\n1\n4\n1\n    21.4\n6\n258.0\n110\n3.1\n3.2\n19.4\n1\n0\n3\n1\n    18.7\n8\n360.0\n175\n3.1\n3.4\n17.0\n0\n0\n3\n2\n    18.1\n6\n225.0\n105\n2.8\n3.5\n20.2\n1\n0\n3\n1\n    14.3\n8\n360.0\n245\n3.2\n3.6\n15.8\n0\n0\n3\n4\n    24.4\n4\n146.7\n62\n3.7\n3.2\n20.0\n1\n0\n4\n2\n    22.8\n4\n140.8\n95\n3.9\n3.1\n22.9\n1\n0\n4\n2\n    19.2\n6\n167.6\n123\n3.9\n3.4\n18.3\n1\n0\n4\n4\n    17.8\n6\n167.6\n123\n3.9\n3.4\n18.9\n1\n0\n4\n4\n    16.4\n8\n275.8\n180\n3.1\n4.1\n17.4\n0\n0\n3\n3\n    17.3\n8\n275.8\n180\n3.1\n3.7\n17.6\n0\n0\n3\n3\n    15.2\n8\n275.8\n180\n3.1\n3.8\n18.0\n0\n0\n3\n3\n    10.4\n8\n472.0\n205\n2.9\n5.2\n18.0\n0\n0\n3\n4\n    10.4\n8\n460.0\n215\n3.0\n5.4\n17.8\n0\n0\n3\n4\n    14.7\n8\n440.0\n230\n3.2\n5.3\n17.4\n0\n0\n3\n4\n    32.4\n4\n78.7\n66\n4.1\n2.2\n19.5\n1\n1\n4\n1\n    30.4\n4\n75.7\n52\n4.9\n1.6\n18.5\n1\n1\n4\n2\n    33.9\n4\n71.1\n65\n4.2\n1.8\n19.9\n1\n1\n4\n1\n    21.5\n4\n120.1\n97\n3.7\n2.5\n20.0\n1\n0\n3\n1\n    15.5\n8\n318.0\n150\n2.8\n3.5\n16.9\n0\n0\n3\n2\n    15.2\n8\n304.0\n150\n3.1\n3.4\n17.3\n0\n0\n3\n2\n    13.3\n8\n350.0\n245\n3.7\n3.8\n15.4\n0\n0\n3\n4\n    19.2\n8\n400.0\n175\n3.1\n3.8\n17.0\n0\n0\n3\n2\n    27.3\n4\n79.0\n66\n4.1\n1.9\n18.9\n1\n1\n4\n1\n    26.0\n4\n120.3\n91\n4.4\n2.1\n16.7\n0\n1\n5\n2\n    30.4\n4\n95.1\n113\n3.8\n1.5\n16.9\n1\n1\n5\n2\n    15.8\n8\n351.0\n264\n4.2\n3.2\n14.5\n0\n1\n5\n4\n    19.7\n6\n145.0\n175\n3.6\n2.8\n15.5\n0\n1\n5\n6\n    15.0\n8\n301.0\n335\n3.5\n3.6\n14.6\n0\n1\n5\n8\n    21.4\n4\n121.0\n109\n4.1\n2.8\n18.6\n1\n1\n4\n2\n  \n  \n  \n\n\n\n\n\n\n4.5.2.2 c_across\nComputa através das colunas os dados linha a linha. Em geral, esta função é utilizado em conjunto com a função rowwise().\nc_across(.cols)\n\nmtcars |> \n  rowwise() |> \n  transmute (total = sum(c_across(4:6))) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      total\n    \n  \n  \n    116.520\n    116.775\n    99.170\n    116.295\n    181.590\n    111.220\n    251.780\n    68.880\n    102.070\n    130.360\n    130.360\n    187.140\n    186.800\n    186.850\n    213.180\n    223.424\n    238.575\n    72.280\n    58.545\n    71.055\n    103.165\n    156.280\n    156.585\n    252.570\n    181.925\n    72.015\n    97.570\n    118.283\n    271.390\n    181.390\n    342.110\n    115.890\n  \n  \n  \n\n\n\n\nNo exemplo acima, “varremos” linha a linha da tabela e depois fazemos a soma da coluna 4 até a coluna 6.\n\n\n\n4.5.3 Criando novas variáveis\nO dyplr possui a habilidade de criar novas variáveis (colunas) ou alterar variáveis já existentes. Estes comandos, aplicam funções que são de um tipo especial chamadas “funções vetorizadas. Elas recebem vetores como entradas e retornam vetores do mesmo tamanho como. Para maiores detalhes veja a seção Funções Vetorizadas.\n\n4.5.3.1 mutate\nAltera ou cria uma nova variável.\nmutate(.data, …, .keep = “all”, .before = NULL, .after = NULL).\nPor exemplo, se quisermos utilizar a variável mpg (milhas por galão) e criar uma nova variável chamada gpm (galões por milha), usamos:\n\nmtcars |> \n  mutate (gpm = 1 / mpg) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      gpm\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n0.04761905\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n0.04761905\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n0.04385965\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n0.04672897\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n0.05347594\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n0.05524862\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n0.06993007\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n0.04098361\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n0.04385965\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n0.05208333\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n0.05617978\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n0.06097561\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n0.05780347\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n0.06578947\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n0.09615385\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n0.09615385\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n0.06802721\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n0.03086420\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n0.03289474\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n0.02949853\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n0.04651163\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n0.06451613\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n0.06578947\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n0.07518797\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n0.05208333\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n0.03663004\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n0.03846154\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n0.03289474\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n0.06329114\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n0.05076142\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n0.06666667\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n0.04672897\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nCuidado\n\n\n\nÉ importante observar que a função mutate() considera o agrupamento da tabela, caso houver. Em casos de funções de agregação e ranqueamento (ex. média, ranque, etc), os valores de mutate serão considerados a partir do agrupamento.\n\n\nPor exemplo, para criar uma coluna que mostra a diferença entre o consumo do veículo e o consumo médio de todos os veículos, podemos usar:\n\nmtcars |> \n  mutate (diferenca = mpg - mean(mpg)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      diferenca\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n0.909375\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n0.909375\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n2.709375\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n1.309375\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n-1.390625\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n-1.990625\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n-5.790625\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n4.309375\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n2.709375\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n-0.890625\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n-2.290625\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n-3.690625\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n-2.790625\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n-4.890625\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n-9.690625\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n-9.690625\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n-5.390625\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n12.309375\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n10.309375\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n13.809375\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n1.409375\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n-4.590625\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n-4.890625\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n-6.790625\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n-0.890625\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n7.209375\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n5.909375\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n10.309375\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n-4.290625\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n-0.390625\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n-5.090625\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n1.309375\n  \n  \n  \n\n\n\n\nMas se quisermos saber a diferença de consumo com a média dos veículos que possuem o mesmo número de cilindros, podemos fazer:\n\nmtcars |> \n  group_by(cyl) |> \n  mutate (diferenca = mpg - mean(mpg)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      diferenca\n    \n  \n  \n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n1.25714286\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n1.25714286\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n1.65714286\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n-1.64285714\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n-0.54285714\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n-1.94285714\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n-0.04285714\n    \n      4\n    \n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n-3.86363636\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n-2.26363636\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n-3.86363636\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n5.73636364\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n3.73636364\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n7.23636364\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n-5.16363636\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n0.63636364\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n-0.66363636\n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n3.73636364\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n-5.26363636\n    \n      8\n    \n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n3.60000000\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n-0.80000000\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n1.30000000\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n2.20000000\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n0.10000000\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n-4.70000000\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n-4.70000000\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n-0.40000000\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n0.40000000\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n0.10000000\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n-1.80000000\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n4.10000000\n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n0.70000000\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n-0.10000000\n  \n  \n  \n\n\n\n\n*Veja também add_column(), add_count(), e add_tally().\n\n\n4.5.3.2 transmutate\nA função transmutate funciona de forma similar a função mutate, porém ela cria/altera uma ou mais colunas e ignora todas as demais em suas saída.\n\n\n4.5.3.3 rename\nRenomeia variáveis (colunas).\nHá também a função rename_with() para chamar uma função para renomear a coluna.\nA função rename(.data, …)\n\ncars |> \n  rename (distancia = dist) |> \n  head () |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      speed\n      distancia\n    \n  \n  \n    4\n2\n    4\n10\n    7\n4\n    7\n22\n    8\n16\n    9\n10"
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#funções-vetorizadas",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#funções-vetorizadas",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.6 Funções Vetorizadas",
    "text": "4.6 Funções Vetorizadas\nAs funções mutate() e transmute() aplicam funções vetorizadas em colunas para criar novas colunas.\n\n\n\n\n\n\nNota\n\n\n\nFunções vetorizadas, são chamadas também de funções de janela (window functions) e recebem vetores como argumento de entrada e retornar vetores de mesmo tamanho como saída.\n\n\nA seguir temos algumas funções vetorizadas que auxiliam na manipulação de dados e, em geral, são utilizadas com mutate() ou filter().\n\n4.6.1 Deslocamento\nO dplyr possui funções para ajuste de deslocamento (offset). Estas funções são muito úteis para “encontrar” valores antes ou depois em relação aos valores atuais.\n\n4.6.1.1 lag\nDesloca elementos em n posições positivas. Usado para “encontrar o valor anterior em n posições”.\nSupondo que precisarmos criar uma coluna contendo o consumo do veiculo que aparece na linha anterior da tabela, podemos fazer:\n\nmtcars |> \n  mutate (mpg_anterior = lag(mpg)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      mpg_anterior\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\nNA\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n21.0\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n21.0\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n22.8\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n21.4\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n18.7\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n18.1\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n14.3\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n24.4\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n22.8\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n19.2\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n17.8\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n16.4\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n17.3\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n15.2\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n10.4\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n10.4\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n14.7\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n32.4\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n30.4\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n33.9\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n21.5\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n15.5\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n15.2\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n13.3\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n19.2\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n27.3\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n26.0\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n30.4\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n15.8\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n19.7\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n15.0\n  \n  \n  \n\n\n\n\nCaso os dados não estejam ordenados,\n\n\n4.6.1.2 lead\nDesloca elementos em n posições negativas. Usado para “encontrar o valor posterior em n posições”.\nSupondo que precisarmos criar uma coluna contendo o consumo do veiculo que aparece duas linhas posteriores da tabela, podemos fazer:\n\nmtcars |> \n  mutate (duas_linhas_posteriores = lead(mpg, n = 2)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      duas_linhas_posteriores\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n22.8\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n21.4\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n18.7\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n18.1\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n14.3\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n24.4\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n22.8\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n19.2\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n17.8\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n16.4\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n17.3\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n15.2\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n10.4\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n10.4\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n14.7\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n32.4\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n30.4\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n33.9\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n21.5\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n15.5\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n15.2\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n13.3\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n19.2\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n27.3\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n26.0\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n30.4\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n15.8\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n19.7\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n15.0\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n21.4\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\nNA\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\nNA\n  \n  \n  \n\n\n\n\n\n\n\n4.6.2 Agregação Acumulada\nO dplyr possui funções de agregações acumuladas. São versões vetorizadas de all, any e mean, enquanto outras são de soma e produtos acumulados e extremos (min/max).\n\n\n\n\n\n\nDica\n\n\n\nAs funções cumall() e cumany() são muito úteis quando usadas com filter(), pois avaliam uma expressão retornando um vetor lógico a partir do valor avaliado pela expressão:\n\n\n\n4.6.2.1 cumall\nRetorna todas as observações (linhas) até que o primeiro caso da expressão a ser avaliada seja falso.\nNo exemplo a seguir, iremos retornar todos os veículos até que encontre um veículo onde sua potência (hp) seja maior ou igual à 110. Quando encontrar esta linha, todas as demais à partir dela na tabela serão ignoradas, mesmo que atendam a expressão. Ou seja, mesmo que houver um veículo com potencia 110 na última linha, nexte exemplo ela será ignorada.\n\nmtcars |> \n  filter(cumall(hp <= 110)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n  \n  \n  \n\n\n\n\nSe quisermos ’varrer” a tabela até encontrarmos um veículo que tenha a potência (hp) menor que 90 e ignorar todas as linhas depois dela, podemos usar:\n\nmtcars |> \n  filter(cumall(!hp <= 90)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n    14.3\n8\n360\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n  \n  \n  \n\n\n\n\n\n\n4.6.2.2 cumany\nRetorna todas as observações (linhas) após o primeiro caso da expressão a ser avaliada seja verdadeiro.\nPor exemplo: Se quisermos “varrer” a tabela em busca do veículo com potência menor que 70 e obter esta e todas as demais linhas após, usamos:\n\nmtcars |> \n  filter (cumany(hp <70)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n  \n  \n  \n\n\n\n\n\n\n4.6.2.3 cummean\nA função cummean() é similar a função cumall ou cumany, porém retorna um vetor numérico contento as médias do vetor de entrada.\nPor exemplo, se quisermos criar uma coluna com o valor da média de potência conforme “varremos” a tabela, ou seja, conforme a potência de cada veículo é listada, usamos:\n\nmtcars |> \n  mutate (media_acumulada = cummean(hp)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      media_acumulada\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n110.0000\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n110.0000\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n104.3333\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n105.7500\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n119.6000\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n117.1667\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n135.4286\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n126.2500\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n122.7778\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n122.8000\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n122.8182\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n127.5833\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n131.6154\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n135.0714\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n139.7333\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n144.4375\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n149.4706\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n144.8333\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n139.9474\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n136.2000\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n134.3333\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n135.0455\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n135.6957\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n140.2500\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n141.6400\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n138.7308\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n136.9630\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n136.1071\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n140.5172\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n141.6667\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n147.9032\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n146.6875\n  \n  \n  \n\n\n\n\n\n\n4.6.2.4 cummax\nUse para saber o valor máximo acumulado até aquela linha.\nPor exemplo, se agruparmos os veículos de mtcars de acordo com a coluna de número de cilindros (cyl), podemos saber qual o maior valor acumulado da coluna potência (hp) por grupo de veículos conforme “varremos” a tabela:\n\nmtcars |> \n  group_by(cyl) |> \n  mutate (cummax = cummax(hp)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      cummax\n    \n  \n  \n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n110\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n110\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n110\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n110\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n123\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n123\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n175\n    \n      4\n    \n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n93\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n93\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n95\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n95\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n95\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n95\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n97\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n97\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n97\n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n113\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n113\n    \n      8\n    \n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n175\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n245\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n245\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n245\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n245\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n245\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n245\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n245\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n245\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n245\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n245\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n245\n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n264\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n335\n  \n  \n  \n\n\n\n\n\n\n4.6.2.5 cummin\nUse para saber o valor mínimo acumulado até aquela linha.\nPor exemplo, se agruparmos os veículos de mtcars de acordo com a coluna de número de cilindros (cyl), podemos saber qual o menor valor acumulado da coluna potência (hp) por grupo de veículos conforme “varremos” a tabela:\n\nmtcars |> \n  group_by(cyl) |> \n  mutate (cummin = cummin (hp)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      cummin\n    \n  \n  \n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n110\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n110\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n110\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n105\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n105\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n105\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n105\n    \n      4\n    \n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n93\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n62\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n62\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n62\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n52\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n52\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n52\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n52\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n52\n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n52\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n52\n    \n      8\n    \n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n175\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n175\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n175\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n175\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n175\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n175\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n175\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n175\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n150\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n150\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n150\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n150\n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n150\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n150\n  \n  \n  \n\n\n\n\n\n\n4.6.2.6 cumprod\nSimilar a cummin() ou cummax(). Use para saber o valor multiplicado acumulado até aquela linha.\nPor exemplo, para acumularmos a multiplicação dos pesos (wt) de cada veículo até a linha, usamos:\n\nmtcars |> \n  mutate (cumprod = cumprod (wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      cumprod\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n2.620000e+00\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n7.532500e+00\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n1.747540e+01\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n5.618341e+01\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n1.932709e+02\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n6.687174e+02\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n2.387321e+03\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n7.615555e+03\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n2.398900e+04\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n8.252215e+04\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n2.838762e+05\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n1.155376e+06\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n4.309553e+06\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n1.629011e+07\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n8.552308e+07\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n4.638772e+08\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n2.479424e+09\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n5.454732e+09\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n8.809392e+09\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n1.616523e+10\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n3.984730e+10\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n1.402625e+11\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n4.818017e+11\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n1.850118e+12\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n7.113706e+12\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n1.376502e+13\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n2.945714e+13\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n4.456866e+13\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n1.412826e+14\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n3.913529e+14\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n1.397130e+15\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n3.884021e+15\n  \n  \n  \n\n\n\n\n\n\n4.6.2.7 cumsum\nSimilar a cummin() ou cummax(). Use para saber o valor da soma acumulada até aquela linha.\nPor exemplo, para acumularmos a soma dos pesos (wt) de cada veículo até a linha, usamos:\n\nmtcars |> \n  mutate (cumsum = cumsum(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      cumsum\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n2.620\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n5.495\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n7.815\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n11.030\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n14.470\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n17.930\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n21.500\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n24.690\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n27.840\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n31.280\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n34.720\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n38.790\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n42.520\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n46.300\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n51.550\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n56.974\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n62.319\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n64.519\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n66.134\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n67.969\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n70.434\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n73.954\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n77.389\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n81.229\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n85.074\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n87.009\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n89.149\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n90.662\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n93.832\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n96.602\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n100.172\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n102.952\n  \n  \n  \n\n\n\n\n\n\n\n4.6.3 Ranqueamento\n\n4.6.3.1 row_number\nUse para adicionar o número da linha. Como as demais funções do dplyr, ela respeita os grupos da tabela quando houver.\nPor exemplo, para enumerar as linhas dos veículos agrupados por número de cilindros, podemos usar:\n\nmtcars |> \n  group_by(cyl) |> \n  mutate (num_linha = row_number()) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      num_linha\n    \n  \n  \n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n1\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n2\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n3\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n4\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n5\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n6\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n7\n    \n      4\n    \n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n1\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n2\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n3\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n4\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n5\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n6\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n7\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n8\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n9\n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n10\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n11\n    \n      8\n    \n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n1\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n2\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n3\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n4\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n5\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n6\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n7\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n8\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n9\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n10\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n11\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n12\n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n13\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n14\n  \n  \n  \n\n\n\n\n\n\n4.6.3.2 rank\nUse para criar um ranqueamento de uma variável.\nPor exemplo, para fazer um ranqueamento dos veículos mais leves entre grupos de mesma cilindragem, podemos usar:\n\nmtcars |> \n  group_by (cyl) |> \n  mutate (rank = rank(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      rank\n    \n  \n  \n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n1.0\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n3.0\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n4.0\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n7.0\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n5.5\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n5.5\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n2.0\n    \n      4\n    \n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n7.0\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n11.0\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n10.0\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n6.0\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n2.0\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n3.0\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n8.0\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n4.0\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n5.0\n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n1.0\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n9.0\n    \n      8\n    \n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n3.0\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n5.5\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n11.0\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n7.0\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n8.0\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n12.0\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n14.0\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n13.0\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n4.0\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n2.0\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n9.0\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n10.0\n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n1.0\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n5.5\n  \n  \n  \n\n\n\n\nObserve que para veículos de 8 cilindros, a segunda e última linha possuem o mesmo peso e portanto tiveram o mesmo ranqueamento (5.5).\n\n\n4.6.3.3 dense_rank\nUse para ajustar o ranqueamento sem pular lacunas em casos de empate.\nVejo abaixo como ele se compara ao ranqueamento da função rank().\n\nmtcars |> \n  group_by (cyl) |> \n  mutate (rank = rank(wt), dense_rank = dense_rank(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      rank\n      dense_rank\n    \n  \n  \n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n1.0\n1\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n3.0\n3\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n4.0\n4\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n7.0\n6\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n5.5\n5\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n5.5\n5\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n2.0\n2\n    \n      4\n    \n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n7.0\n7\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n11.0\n11\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n10.0\n10\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n6.0\n6\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n2.0\n2\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n3.0\n3\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n8.0\n8\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n4.0\n4\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n5.0\n5\n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n1.0\n1\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n9.0\n9\n    \n      8\n    \n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n3.0\n3\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n5.5\n5\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n11.0\n10\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n7.0\n6\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n8.0\n7\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n12.0\n11\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n14.0\n13\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n13.0\n12\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n4.0\n4\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n2.0\n2\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n9.0\n8\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n10.0\n9\n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n1.0\n1\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n5.5\n5\n  \n  \n  \n\n\n\n\nObserve que na segunda e última linha de 8 cilindros, empatam em 5.5 na função rank() e a posição 6 é pulada, sendo o próximo do ranqueamento o número 7. Já na função dense_rank(), o empate fica na posição 5 e o próximo na posição 6.\n\n\n4.6.3.4 percent_rank\nUse para retornar um número entre 0 e 1 (percentual) do ranqueamento mínimo.\nVeja abaixo como ela se compara com as funções rank e dense_rank:\n\nmtcars |> \n  group_by (cyl) |> \n  mutate (rank = rank(wt), dense_rank = dense_rank(wt), percent_rank = percent_rank(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      rank\n      dense_rank\n      percent_rank\n    \n  \n  \n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n1.0\n1\n0.00000000\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n3.0\n3\n0.33333333\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n4.0\n4\n0.50000000\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n7.0\n6\n1.00000000\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n5.5\n5\n0.66666667\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n5.5\n5\n0.66666667\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n2.0\n2\n0.16666667\n    \n      4\n    \n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n7.0\n7\n0.60000000\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n11.0\n11\n1.00000000\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n10.0\n10\n0.90000000\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n6.0\n6\n0.50000000\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n2.0\n2\n0.10000000\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n3.0\n3\n0.20000000\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n8.0\n8\n0.70000000\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n4.0\n4\n0.30000000\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n5.0\n5\n0.40000000\n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n1.0\n1\n0.00000000\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n9.0\n9\n0.80000000\n    \n      8\n    \n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n3.0\n3\n0.15384615\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n5.5\n5\n0.30769231\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n11.0\n10\n0.76923077\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n7.0\n6\n0.46153846\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n8.0\n7\n0.53846154\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n12.0\n11\n0.84615385\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n14.0\n13\n1.00000000\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n13.0\n12\n0.92307692\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n4.0\n4\n0.23076923\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n2.0\n2\n0.07692308\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n9.0\n8\n0.61538462\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n10.0\n9\n0.69230769\n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n1.0\n1\n0.00000000\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n5.5\n5\n0.30769231\n  \n  \n  \n\n\n\n\n\n\n4.6.3.5 cume_dist\nUse para saber a distribuição acumulada de acordo com o ranqueamento atribuído.\nPor exemplo, se agruparmos por número de cilindros (cyl), criarmos uma coluna de ranqueamento (rank) e outra coluna com a distribuição, podemos saber como o ranqueamento acumulado está distribuído.\n\nmtcars |> \n  group_by(cyl) |> \n  mutate (rank = rank(wt), cume_dist = cume_dist(wt)) |> \n  arrange (cume_dist) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      rank\n      cume_dist\n    \n  \n  \n    \n      8\n    \n    15.8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n1.0\n0.07142857\n    15.2\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n2.0\n0.14285714\n    18.7\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n3.0\n0.21428571\n    15.5\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n4.0\n0.28571429\n    14.3\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n5.5\n0.42857143\n    15.0\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n5.5\n0.42857143\n    17.3\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n7.0\n0.50000000\n    15.2\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n8.0\n0.57142857\n    13.3\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n9.0\n0.64285714\n    19.2\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n10.0\n0.71428571\n    16.4\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n11.0\n0.78571429\n    10.4\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n12.0\n0.85714286\n    14.7\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n13.0\n0.92857143\n    10.4\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n14.0\n1.00000000\n    \n      4\n    \n    30.4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n1.0\n0.09090909\n    30.4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n2.0\n0.18181818\n    33.9\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n3.0\n0.27272727\n    27.3\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n4.0\n0.36363636\n    26.0\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n5.0\n0.45454545\n    32.4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n6.0\n0.54545455\n    22.8\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n7.0\n0.63636364\n    21.5\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n8.0\n0.72727273\n    21.4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n9.0\n0.81818182\n    22.8\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n10.0\n0.90909091\n    24.4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n11.0\n1.00000000\n    \n      6\n    \n    21.0\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n1.0\n0.14285714\n    19.7\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n2.0\n0.28571429\n    21.0\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n3.0\n0.42857143\n    21.4\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n4.0\n0.57142857\n    19.2\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n5.5\n0.85714286\n    17.8\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n5.5\n0.85714286\n    18.1\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n7.0\n1.00000000\n  \n  \n  \n\n\n\n\n\n\n4.6.3.6 ntile\nUse para retornar um quantil (percentil, quartil, etc) de um vetor.\nPor exemplo, para segregarmos os veículos em quartis (quatro partes) (0-0.25-.50-.75-1), podemos usar:\n\nmtcars |> \n  mutate (quartil = ntile(wt, 4)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      quartil\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n2\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n2\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n1\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n2\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n3\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n3\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n3\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n2\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n2\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n3\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n3\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n4\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n4\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n4\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n4\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n4\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n4\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n1\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n1\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n1\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n1\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n3\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n3\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n4\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n4\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n1\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n1\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n1\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n2\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n2\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n3\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n2\n  \n  \n  \n\n\n\n\n\n\n\n4.6.4 Matemática\n\n4.6.4.1 operações e logs:\nSão símbolos para funções matemáticas mais comuns como:\n+, - , *, /, ^, %/%, %% - Usados para as oper. aritiméticas\nlog(), log2(), log10() - Usados para logaritmos\n\n\n4.6.4.2 between\nUse para retornar os valores do vetor entre dois valores. É o equivalente a escrever: x >= valor_esquerda & x <= valor_direita.\nPor exemplo, se quisermos obter os veículos com o peso entre 3 a 4 mil libras, podemos usar a função between() juntamente com a função filter().\n\nmtcars |>\n  filter (between(wt, 3, 4)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n  \n  \n  \n\n\n\n\n\n\n4.6.4.3 near\nUse para verificar se dois vetores de ponto fultuante são iguais:\nO exemplo abaixo, duplica a coluna de peso (wt –> wt2) dos veículos e altera o primeiro valor de 2.620 para 2.600, salvando em um novo data frame (mtcars_novo) que será usado em seguida;\n\nmtcars_novo <- mtcars |> \n  mutate(wt2 = wt) |> \n  mutate (wt2 = ifelse(row_number() == 1, 2.600, wt2))\n\nSe usarmos o igual ( == ) para validar ambas colunas, devido às diferenças nas casa decimais, teríamos FALSO:\n\nmtcars_novo$wt == mtcars_novo$wt2\n\n [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nSe usarmos a função near, por esta ter um parâmetro de tolerância que iremos definiar como acima de 0.020 (0.021 por exemplo), teríamos VERDADEIRO para todos os items do vetor:\n\nnear (mtcars_novo$wt, mtcars_novo$wt2, tol = 0.021)\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE\n\n\n\n\n\n4.6.5 Miscelânea\n\n4.6.5.1 if_else\nUse para fazer um “SE” (IF) vetorizado, ou seja, elemento por elemento.\nPor exemplo, se quisermos saber quais veículos percorrem 1/4 de milha em menos de 20 segundos, podemos usar a coluna qsec com a função if_else para criar uma nova coluna marcando como “MAIX VELOZ” os veículos que percorrem com menos de 20 segundos e “MENOS VELOZ” os que não atendem a este critério:\n\nmtcars |> \n  mutate (categoria_arranque = \n            ifelse(qsec < 20, \"MAIS VELOZ\", \"MENOS VELOZ\")) |> \n  gt() \n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      categoria_arranque\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\nMAIS VELOZ\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\nMAIS VELOZ\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\nMAIS VELOZ\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\nMAIS VELOZ\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\nMAIS VELOZ\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\nMENOS VELOZ\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\nMAIS VELOZ\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\nMENOS VELOZ\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\nMENOS VELOZ\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\nMAIS VELOZ\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\nMAIS VELOZ\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\nMAIS VELOZ\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\nMAIS VELOZ\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\nMAIS VELOZ\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\nMAIS VELOZ\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\nMAIS VELOZ\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\nMAIS VELOZ\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\nMAIS VELOZ\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\nMAIS VELOZ\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\nMAIS VELOZ\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\nMENOS VELOZ\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\nMAIS VELOZ\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\nMAIS VELOZ\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\nMAIS VELOZ\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\nMAIS VELOZ\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\nMAIS VELOZ\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\nMAIS VELOZ\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\nMAIS VELOZ\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\nMAIS VELOZ\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\nMAIS VELOZ\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\nMAIS VELOZ\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\nMAIS VELOZ\n  \n  \n  \n\n\n\n\n\n\n4.6.5.2 case_when\nUse quando quiser fazer um if_else com mais de dois casos, ou seja, ao invés de aninhá-los(nested if).\nUsando o mesmo exemplo da função if_else , porém gostaríamos de criar um terceira classificação chamada de “SUPER VELOZ” para os veículos com tempo abaixo de 16 segundos, teríamos:\n\nmtcars |> \n  mutate (categoria_arranque = case_when(\n    qsec < 17 ~ \"SUPER VELOZ\",\n    qsec < 20 ~ \"MAIS VELOZ\", \n    TRUE ~ \"MENOS VELOZ\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      categoria_arranque\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\nSUPER VELOZ\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\nMAIS VELOZ\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\nMAIS VELOZ\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\nMAIS VELOZ\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\nMAIS VELOZ\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\nMENOS VELOZ\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\nSUPER VELOZ\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\nMENOS VELOZ\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\nMENOS VELOZ\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\nMAIS VELOZ\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\nMAIS VELOZ\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\nMAIS VELOZ\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\nMAIS VELOZ\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\nMAIS VELOZ\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\nMAIS VELOZ\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\nMAIS VELOZ\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\nMAIS VELOZ\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\nMAIS VELOZ\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\nMAIS VELOZ\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\nMAIS VELOZ\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\nMENOS VELOZ\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\nSUPER VELOZ\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\nMAIS VELOZ\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\nSUPER VELOZ\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\nMAIS VELOZ\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\nMAIS VELOZ\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\nSUPER VELOZ\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\nSUPER VELOZ\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\nSUPER VELOZ\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\nSUPER VELOZ\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\nSUPER VELOZ\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\nMAIS VELOZ\n  \n  \n  \n\n\n\n\nA função case_when, também permite que você utilize diferentes colunas, e operações lógicas também.\nPor exemplo, se quisermos colocar a categoria “INVÁLIDO” para os veículos com 8 cilindros (cyl) OU consumo acima de 30 galões/milha (mpg), usamos:\n\nmtcars |> \n  mutate (categoria_arranque = \n            case_when(\n              cyl == 8 | mpg > 30 ~ \"INVALIDO\",\n              qsec < 17 ~ \"SUPER VELOZ\",\n              qsec < 20 ~ \"MAIS VELOZ\",\n              TRUE ~ \"MENOS VELOZ\")) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      categoria_arranque\n    \n  \n  \n    21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\nSUPER VELOZ\n    21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\nMAIS VELOZ\n    22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\nMAIS VELOZ\n    21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\nMAIS VELOZ\n    18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\nINVALIDO\n    18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\nMENOS VELOZ\n    14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\nINVALIDO\n    24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\nMENOS VELOZ\n    22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\nMENOS VELOZ\n    19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\nMAIS VELOZ\n    17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\nMAIS VELOZ\n    16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\nINVALIDO\n    17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\nINVALIDO\n    15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\nINVALIDO\n    10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\nINVALIDO\n    10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\nINVALIDO\n    14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\nINVALIDO\n    32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\nINVALIDO\n    30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\nINVALIDO\n    33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\nINVALIDO\n    21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\nMENOS VELOZ\n    15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\nINVALIDO\n    15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\nINVALIDO\n    13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\nINVALIDO\n    19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\nINVALIDO\n    27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\nMAIS VELOZ\n    26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\nSUPER VELOZ\n    30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\nINVALIDO\n    15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\nINVALIDO\n    19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\nSUPER VELOZ\n    15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\nINVALIDO\n    21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\nMAIS VELOZ\n  \n  \n  \n\n\n\n\n\n\n4.6.5.3 coalesce\nUse para sobrescrever os valores de NA em um vetor.\nO exemplo abaixo, sobrescreve com zeros os valores faltantes (missing) do vetor x:\n\nx <- sample(c(1:5, NA, NA, NA))\ncoalesce(x, 0L)\n\n[1] 0 5 4 1 2 0 3 0\n\n\n\n\n\n\n\n\nDica\n\n\n\nUse na_if() para sobrescrever um valor específico com NA e tidyr::replace_na() para sobrescrever os NAs com um valor.\n\n\n\n\n4.6.5.4 na_if\nUse para sobrescrever um valor específico com NA.\nPor exemplo, se quisermos colocar NAs na coluna de consumo (mpg) para os veículos com 8 cilindros (cyl), podemos usar a na_if() juntamente com a mutate():\n\nmtcars |> \n  mutate(mpg = na_if(cyl, 8)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    6\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    6\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    4\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    6\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    NA\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    6\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n    NA\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n    4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n    4\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n    6\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n    6\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n    NA\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n    NA\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n    NA\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n    NA\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n    NA\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n    NA\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n    4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n    4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    4\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n    4\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n    NA\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n    NA\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n    NA\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n    NA\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n    4\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n    4\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n    4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n    NA\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n    6\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n    NA\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n    4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n  \n  \n  \n\n\n\n\n\n\n4.6.5.5 pmax - max\nUse max() para retornar o máximo valor de um vetor ou pmax() para retornar o valor máximo entre elementos de vetores em paralelo.\nPor exemplo, se tiver um vetor dois vetores (x e y) com 5 elementos cada, a função max() irá retornar o maior vetor contido no vetor escolhido:\n\nx <- c(1, 2, 3, 4, 5)\ny <- c(1, 2, 10, 1, 20)\nmax(x)\n\n[1] 5\n\nmax(y)\n\n[1] 20\n\n\nJá se usarmos o pmax(), ele irá comparar cada elemento de x com seu respectivo elemento de y e retornar o máximo valor.\n\nx <- c(1, 2, 3, 4, 5)\ny <- c(1, 1, 10, 1, 20)\npmax(x, y)\n\n[1]  1  2 10  4 20\n\n\n\n\n4.6.5.6 pmin - min\nÉ idêntico às funções pmax - max (), porém ao invés de retornar o valor máximo ou o máximo do elemento em paralelo, estas funções retornam seus respectivos valores mínimos."
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#funções-de-resumo",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#funções-de-resumo",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.7 Funções de Resumo",
    "text": "4.7 Funções de Resumo\nsummarise() aplica funções de resumo em colunas para criar uma nova tabela. Funções de resumo recebem vetores como entrada e retornam um valor único na saída.\n\n\n\n\n\n\nCuidado\n\n\n\nEstas funções retornam informações sobre o grupo ou variável corrente, portanto só funcionam dentro de um contexto específico como summarise() ou mutate().\n\n\n\n4.7.1 Contagem\n\n4.7.1.1 n\nUse para retornar o tamanhio do grupo corrente.\nPor exemplo, para contar quantos veículos temos em cada grupo de cilindors, podemos usar a summarise() com o n() depois de agrupar pela coluna de cilindors (cyl).\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(numero_veículos = n()) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      numero_veículos\n    \n  \n  \n    4\n11\n    6\n7\n    8\n14\n  \n  \n  \n\n\n\n\n\n\n4.7.1.2 \n\n\n4.7.1.3 n_distinct\nUse para contar os valores unicos em um vetor.\nPor exemplo, para saber QUANTAS categorias de cilindros temos na tabela mtcars, podemos usar:\n\nmtcars |> \n  summarise (cat_cilindros = n_distinct(cyl)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cat_cilindros\n    \n  \n  \n    3\n  \n  \n  \n\n\n\n\nSe quisessemos saber QUAIS categoris de cilindros temos, podemos fazer usando a distinct:\nmtcars |> unique (cyl) ### Posição\n\nmtcars |>\n  distinct(cyl) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n    \n  \n  \n    6\n    4\n    8\n  \n  \n  \n\n\n\n\n\n\n4.7.1.4 sum\nUse para retornar a soma de todos os valores presentes em seu argumento.\nPor exemplo, para sabermos a soma dos pesos (wt) dos veículos agrupados pelo número de cilindros (cyl), podemos usar a função sum, juntamente com o summarise() e group_by().\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(soma_pesos = sum(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      soma_pesos\n    \n  \n  \n    4\n25.143\n    6\n21.820\n    8\n55.989\n  \n  \n  \n\n\n\n\nVeja que se houver NA na variável (coluna), a função sum irá retornar NA. Para ignorar os NAs e fazer a soma, use o argumento na.rm = TRUE.\n\n\n\n4.7.2 Posição\n\n4.7.2.1 mean\nUse para obter a média dos elementos do vetor. Por exemplo, se quisermos saber a média de peso de todos os veículos, podemos usar:\n\nmtcars |> \n  summarise (media_peso =mean(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      media_peso\n    \n  \n  \n    3.21725\n  \n  \n  \n\n\n\n\n\n\n4.7.2.2 median\nUse para obter a mediana dos elementos de um vetor. è similar à função mean, porém retorna a mediana ou invés da média.\n\n\n\n4.7.3 Ordem\n\n4.7.3.1 first\nUse para obter o primeiro elemento de um vetor.\nPor exemplo, se quisermos obter o peso do primeiro veículo de cada grupo de cilindros, podemos usar:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(primeiro_veiculo_do_grupo = first(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      primeiro_veiculo_do_grupo\n    \n  \n  \n    4\n2.32\n    6\n2.62\n    8\n3.44\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nUsando o parametro order_by = , podemos passar um vetor para determinar uma ordem.\n\n\nPor exemplo, se criarmos um agrupamento pelo numero de cilindros e criarmos um ranqueamento pelo consumo do veículo, podemos obter o peso do veículo de menor consumo usando:\n\nmtcars |> \n  group_by(cyl) |> \n  mutate (rank_peso = rank(mpg)) |> \n  summarise(primeiro_veiculo_ordenado_pelo_cosumo = \n      first(wt, order_by = rank_peso)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      primeiro_veiculo_ordenado_pelo_cosumo\n    \n  \n  \n    4\n2.78\n    6\n3.44\n    8\n5.25\n  \n  \n  \n\n\n\n\n\n\n4.7.3.2 last\nUse para obter o último elemento. É similar a função first, porém ao invés de retornar o primeiro elemento, irá retornar o último.\n\n\n4.7.3.3 nth\nUse para obter o n-ésimo elemento. É similar a função first, porém ao invés de retornar o primeiro elemento, irá retornar o n-ésimo elemento.\nPor exemplo, se quisermos obter o peso do segundo veículo de cada grupo de cilindros, podemos usar:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(segundo_veiculo_do_grupo = nth(wt,2)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      segundo_veiculo_do_grupo\n    \n  \n  \n    4\n3.190\n    6\n2.875\n    8\n3.570\n  \n  \n  \n\n\n\n\nUse valor negativo para contar a partir do último elemento.\nPor exemplo, se quisermos obter o peso do penúltimo veículo de cada grupo de cilindros, podemos usar:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(penultimo_veiculo_do_grupo = nth(wt,-2)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      penultimo_veiculo_do_grupo\n    \n  \n  \n    4\n1.513\n    6\n3.440\n    8\n3.170\n  \n  \n  \n\n\n\n\n\n\n\n4.7.4 Ranqueamento\n\n4.7.4.1 quantile\nUse para obter os quantils de um vetor. Por padrão retorna os quartis (0, 0.25, .5, .75 e 1) de um vetor.\nPor exemplo, se quisermos saber os quartis dos pesos dos grupos de cilindors dos veículos, podemos usar:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(q = quantile(mpg)) |> \n  ungroup() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      q\n    \n  \n  \n    4\n21.40\n    4\n22.80\n    4\n26.00\n    4\n30.40\n    4\n33.90\n    6\n17.80\n    6\n18.65\n    6\n19.70\n    6\n21.00\n    6\n21.40\n    8\n10.40\n    8\n14.40\n    8\n15.20\n    8\n16.25\n    8\n19.20\n  \n  \n  \n\n\n\n\nUsando o parâmeto probs = , podemos definir quanquer quantil.\nPor exemplo, se quisermos obter apenas o segundo (média) quartil e o último (valor máximo) do cosumo de grupo de cilindors dos veículos, podemos usar:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(q = quantile(mpg, probs = c(.5, 1))) |> \n  ungroup() |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      q\n    \n  \n  \n    4\n26.0\n    4\n33.9\n    6\n19.7\n    6\n21.4\n    8\n15.2\n    8\n19.2\n  \n  \n  \n\n\n\n\n\n\n4.7.4.2 min\nUse para obter o valor mínimo. Similar a quantile.\n\n\n4.7.4.3 max\nUse para obter o valor máximo. Similar a quantile.\n\n\n\n4.7.5 Dispersão\nO dyplr possuem algumas funções para avaliar o espalhamento dos dados (dispersão) em torno da média central. Estas funções vem do campo da estatística.\n\n4.7.5.1 var\nUse para calcular a variância dos dados.\nPor exemplo, par calcular a variância total dos pesos (wt) dos veículos de tabela mtcars agrupada pelo número de cilindros (cyl), podemos usa-la junto com a função summarise:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(varianca = var(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      varianca\n    \n  \n  \n    4\n0.3244028\n    6\n0.1269821\n    8\n0.5766956\n  \n  \n  \n\n\n\n\nNo exemplo acima, observamos que os veículos com 6cilindros possuem seus pesos mais próximos da média que os veículos com 4 ou 8 cilindros.\n\n\n4.7.5.2 sd\nUse para calcular o desvio padrão. É similar a função var, porém retorna o desvio padrão ao invés da variância.\nUsando o mesmo exemplo da função var, o código ficaria:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(desvio_padrao = sd(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      desvio_padrao\n    \n  \n  \n    4\n0.5695637\n    6\n0.3563455\n    8\n0.7594047\n  \n  \n  \n\n\n\n\n\n\n4.7.5.3 IQR\nUse para calcular a distância inter-quartil. É similar a função var, porém retorna o range entre os quartis ao invés da variância.\nUsando o mesmo exemplo da função var, o código ficaria:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(distancia_interquartil = IQR(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      distancia_interquartil\n    \n  \n  \n    4\n0.73750\n    6\n0.61750\n    8\n0.48125\n  \n  \n  \n\n\n\n\n\n\n4.7.5.4 mad\nUse para calcular a desvio absoluto da mediana. É similar a função var, porém o desvio absoluto da mediana ao invés da variância.\nUsando o mesmo exemplo da função var, o código ficaria:\n\nmtcars |> \n  group_by(cyl) |> \n  summarise(Desv_absolto_mediana = mad(wt)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      cyl\n      Desv_absolto_mediana\n    \n  \n  \n    4\n0.541149\n    6\n0.363237\n    8\n0.407715"
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#combinando-tabelas",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#combinando-tabelas",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.8 Combinando Tabelas",
    "text": "4.8 Combinando Tabelas\n\n4.8.1 Juntando Variáveis\nQuando você tem uma ou mais variáveis de um dataframe com o mesmo número de observações de outra(s) variável(eis), você pode uní-las diretamente atraveś da função bind_cols(), porém se o número de observações forem diferentes, é necessário utilizar funções de união transformadoras (mutating joins). Ver a seção Relacionando Dados para maiores detalhes sobre as uniões transformadoras.\n\n4.8.1.1 bind_cols\nUse para unir variáveis de mesmo número de observações.\nPor exemplo, no pacotes datasets, temos um dataframe (tabela), chamado state.names, que possui o nomes de todos os estados dos EUA. Há também o state.abb, que possui uma lista das abreviações dos estados americanos. Se quiser unir ambas variáveis, podemos usar:\n\nbind_cols(state.abb, state.name) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      ...1\n      ...2\n    \n  \n  \n    AL\nAlabama\n    AK\nAlaska\n    AZ\nArizona\n    AR\nArkansas\n    CA\nCalifornia\n    CO\nColorado\n    CT\nConnecticut\n    DE\nDelaware\n    FL\nFlorida\n    GA\nGeorgia\n    HI\nHawaii\n    ID\nIdaho\n    IL\nIllinois\n    IN\nIndiana\n    IA\nIowa\n    KS\nKansas\n    KY\nKentucky\n    LA\nLouisiana\n    ME\nMaine\n    MD\nMaryland\n    MA\nMassachusetts\n    MI\nMichigan\n    MN\nMinnesota\n    MS\nMississippi\n    MO\nMissouri\n    MT\nMontana\n    NE\nNebraska\n    NV\nNevada\n    NH\nNew Hampshire\n    NJ\nNew Jersey\n    NM\nNew Mexico\n    NY\nNew York\n    NC\nNorth Carolina\n    ND\nNorth Dakota\n    OH\nOhio\n    OK\nOklahoma\n    OR\nOregon\n    PA\nPennsylvania\n    RI\nRhode Island\n    SC\nSouth Carolina\n    SD\nSouth Dakota\n    TN\nTennessee\n    TX\nTexas\n    UT\nUtah\n    VT\nVermont\n    VA\nVirginia\n    WA\nWashington\n    WV\nWest Virginia\n    WI\nWisconsin\n    WY\nWyoming\n  \n  \n  \n\n\n\n\n\n\n\n4.8.2 Relacionando Dados\nQuando temos dois dataframes (tabelas) e queremos adicionar colunas de um à outro, usamos funções chamadas de uniões transformadoras (“mutating joins”). Estas funções transformam um tabela, adicionando coluna(s) de outra tabela de acordo com as linhas baseado em chaves (“keys”) definidas ao usar a função.\nPreprarando as tabelas de Exemplo:\nPara os exemplos a seguir, utilizaremos o dataframe state.x77, que possui 8 variáveis dos estados americanos com expectativa de vida, renda per capita, população, etc. Chamaremos esta tabela de X.\nChamaremos de Y, uma tabela states.abb e state.name, que possui as abreviações e nomes dos estados americanos respectivamente. Iremos unir estas variáveis com a função bind_cols, já que elas possuem o mesmo número de observações.\nPorém para exemplificar casos onde a tabela Y, não possui extamente o mesmo número de observações da tabela X, iremos excluir as abreviações que começam com as letras C, M, I e V. Com isto, nossa table Y final, irá contar apenas 37 observações, enquanto a tabela X irá conter todos os 50 estados americados.\nObserve que ambas as tabelas (X e Y) contém ao menos uma coluna em comum (coluna “Estado”). Esta coluna será utilizada como chave (key) para fazermos as uniões.\nPara criar as tabelas X e Y, usaremos:\n\nX <- state.x77 |> \n  as_tibble() |> \n  bind_cols(state.name) |> \n  rename(\"Estado\" = \"...9\")\ngt(X)\n\n\n\n\n\n  \n  \n    \n      Population\n      Income\n      Illiteracy\n      Life Exp\n      Murder\n      HS Grad\n      Frost\n      Area\n      Estado\n    \n  \n  \n    3615\n3624\n2.1\n69.05\n15.1\n41.3\n20\n50708\nAlabama\n    365\n6315\n1.5\n69.31\n11.3\n66.7\n152\n566432\nAlaska\n    2212\n4530\n1.8\n70.55\n7.8\n58.1\n15\n113417\nArizona\n    2110\n3378\n1.9\n70.66\n10.1\n39.9\n65\n51945\nArkansas\n    21198\n5114\n1.1\n71.71\n10.3\n62.6\n20\n156361\nCalifornia\n    2541\n4884\n0.7\n72.06\n6.8\n63.9\n166\n103766\nColorado\n    3100\n5348\n1.1\n72.48\n3.1\n56.0\n139\n4862\nConnecticut\n    579\n4809\n0.9\n70.06\n6.2\n54.6\n103\n1982\nDelaware\n    8277\n4815\n1.3\n70.66\n10.7\n52.6\n11\n54090\nFlorida\n    4931\n4091\n2.0\n68.54\n13.9\n40.6\n60\n58073\nGeorgia\n    868\n4963\n1.9\n73.60\n6.2\n61.9\n0\n6425\nHawaii\n    813\n4119\n0.6\n71.87\n5.3\n59.5\n126\n82677\nIdaho\n    11197\n5107\n0.9\n70.14\n10.3\n52.6\n127\n55748\nIllinois\n    5313\n4458\n0.7\n70.88\n7.1\n52.9\n122\n36097\nIndiana\n    2861\n4628\n0.5\n72.56\n2.3\n59.0\n140\n55941\nIowa\n    2280\n4669\n0.6\n72.58\n4.5\n59.9\n114\n81787\nKansas\n    3387\n3712\n1.6\n70.10\n10.6\n38.5\n95\n39650\nKentucky\n    3806\n3545\n2.8\n68.76\n13.2\n42.2\n12\n44930\nLouisiana\n    1058\n3694\n0.7\n70.39\n2.7\n54.7\n161\n30920\nMaine\n    4122\n5299\n0.9\n70.22\n8.5\n52.3\n101\n9891\nMaryland\n    5814\n4755\n1.1\n71.83\n3.3\n58.5\n103\n7826\nMassachusetts\n    9111\n4751\n0.9\n70.63\n11.1\n52.8\n125\n56817\nMichigan\n    3921\n4675\n0.6\n72.96\n2.3\n57.6\n160\n79289\nMinnesota\n    2341\n3098\n2.4\n68.09\n12.5\n41.0\n50\n47296\nMississippi\n    4767\n4254\n0.8\n70.69\n9.3\n48.8\n108\n68995\nMissouri\n    746\n4347\n0.6\n70.56\n5.0\n59.2\n155\n145587\nMontana\n    1544\n4508\n0.6\n72.60\n2.9\n59.3\n139\n76483\nNebraska\n    590\n5149\n0.5\n69.03\n11.5\n65.2\n188\n109889\nNevada\n    812\n4281\n0.7\n71.23\n3.3\n57.6\n174\n9027\nNew Hampshire\n    7333\n5237\n1.1\n70.93\n5.2\n52.5\n115\n7521\nNew Jersey\n    1144\n3601\n2.2\n70.32\n9.7\n55.2\n120\n121412\nNew Mexico\n    18076\n4903\n1.4\n70.55\n10.9\n52.7\n82\n47831\nNew York\n    5441\n3875\n1.8\n69.21\n11.1\n38.5\n80\n48798\nNorth Carolina\n    637\n5087\n0.8\n72.78\n1.4\n50.3\n186\n69273\nNorth Dakota\n    10735\n4561\n0.8\n70.82\n7.4\n53.2\n124\n40975\nOhio\n    2715\n3983\n1.1\n71.42\n6.4\n51.6\n82\n68782\nOklahoma\n    2284\n4660\n0.6\n72.13\n4.2\n60.0\n44\n96184\nOregon\n    11860\n4449\n1.0\n70.43\n6.1\n50.2\n126\n44966\nPennsylvania\n    931\n4558\n1.3\n71.90\n2.4\n46.4\n127\n1049\nRhode Island\n    2816\n3635\n2.3\n67.96\n11.6\n37.8\n65\n30225\nSouth Carolina\n    681\n4167\n0.5\n72.08\n1.7\n53.3\n172\n75955\nSouth Dakota\n    4173\n3821\n1.7\n70.11\n11.0\n41.8\n70\n41328\nTennessee\n    12237\n4188\n2.2\n70.90\n12.2\n47.4\n35\n262134\nTexas\n    1203\n4022\n0.6\n72.90\n4.5\n67.3\n137\n82096\nUtah\n    472\n3907\n0.6\n71.64\n5.5\n57.1\n168\n9267\nVermont\n    4981\n4701\n1.4\n70.08\n9.5\n47.8\n85\n39780\nVirginia\n    3559\n4864\n0.6\n71.72\n4.3\n63.5\n32\n66570\nWashington\n    1799\n3617\n1.4\n69.48\n6.7\n41.6\n100\n24070\nWest Virginia\n    4589\n4468\n0.7\n72.48\n3.0\n54.5\n149\n54464\nWisconsin\n    376\n4566\n0.6\n70.29\n6.9\n62.9\n173\n97203\nWyoming\n  \n  \n  \n\n\n\n\n\nY <- bind_cols(state.abb, state.name) |> \n  as_tibble() |> \n  rename(\"Abreviacao\" = \"...1\", \"Estado\" = \"...2\") |> \n  filter(!str_detect(Abreviacao, \"^[CMIV]\"))  \n  gt(Y)\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      Estado\n    \n  \n  \n    AL\nAlabama\n    AK\nAlaska\n    AZ\nArizona\n    AR\nArkansas\n    DE\nDelaware\n    FL\nFlorida\n    GA\nGeorgia\n    HI\nHawaii\n    KS\nKansas\n    KY\nKentucky\n    LA\nLouisiana\n    NE\nNebraska\n    NV\nNevada\n    NH\nNew Hampshire\n    NJ\nNew Jersey\n    NM\nNew Mexico\n    NY\nNew York\n    NC\nNorth Carolina\n    ND\nNorth Dakota\n    OH\nOhio\n    OK\nOklahoma\n    OR\nOregon\n    PA\nPennsylvania\n    RI\nRhode Island\n    SC\nSouth Carolina\n    SD\nSouth Dakota\n    TN\nTennessee\n    TX\nTexas\n    UT\nUtah\n    WA\nWashington\n    WV\nWest Virginia\n    WI\nWisconsin\n    WY\nWyoming\n  \n  \n  \n\n\n\n\n\n4.8.2.1 left_join\nUse para unir valores iguais de X em Y.\nPor exemplo, usando as tabelas X e Y preparadas no início da seção Relacionando Dados, podemos unir a variável população (population) que está na tabela X na tabela Y.\n\n\n\n\n\n\nImportante\n\n\n\nA coluna que será usada como chave (key) na união e as variáveis que você quer unir devem ser selecionadas (função select()). Se não houver uma seleção explícita, todas as colunas da tabela X serão unídas.\n\n\n\nleft_join(Y, select(X, Estado, Population)) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      Estado\n      Population\n    \n  \n  \n    AL\nAlabama\n3615\n    AK\nAlaska\n365\n    AZ\nArizona\n2212\n    AR\nArkansas\n2110\n    DE\nDelaware\n579\n    FL\nFlorida\n8277\n    GA\nGeorgia\n4931\n    HI\nHawaii\n868\n    KS\nKansas\n2280\n    KY\nKentucky\n3387\n    LA\nLouisiana\n3806\n    NE\nNebraska\n1544\n    NV\nNevada\n590\n    NH\nNew Hampshire\n812\n    NJ\nNew Jersey\n7333\n    NM\nNew Mexico\n1144\n    NY\nNew York\n18076\n    NC\nNorth Carolina\n5441\n    ND\nNorth Dakota\n637\n    OH\nOhio\n10735\n    OK\nOklahoma\n2715\n    OR\nOregon\n2284\n    PA\nPennsylvania\n11860\n    RI\nRhode Island\n931\n    SC\nSouth Carolina\n2816\n    SD\nSouth Dakota\n681\n    TN\nTennessee\n4173\n    TX\nTexas\n12237\n    UT\nUtah\n1203\n    WA\nWashington\n3559\n    WV\nWest Virginia\n1799\n    WI\nWisconsin\n4589\n    WY\nWyoming\n376\n  \n  \n  \n\n\n\n\nVeja que no exemplo acima, foram retornadas apenas 37 observações. Isto porque definimos como tabela “base” a tabela Y. Se fizermos o inverso, ou seja, left_join (X, Y), a saída irá conter todos os 50 registros de X e os que ele encontrar na tabela Y. Os que não forem encontrados de acordo com a chave escolhida (neste caso a coluna Estado), será preenchido com N/A. Veja exemplo abaixo:\n\nleft_join(X, Y, by = \"Estado\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Population\n      Income\n      Illiteracy\n      Life Exp\n      Murder\n      HS Grad\n      Frost\n      Area\n      Estado\n      Abreviacao\n    \n  \n  \n    3615\n3624\n2.1\n69.05\n15.1\n41.3\n20\n50708\nAlabama\nAL\n    365\n6315\n1.5\n69.31\n11.3\n66.7\n152\n566432\nAlaska\nAK\n    2212\n4530\n1.8\n70.55\n7.8\n58.1\n15\n113417\nArizona\nAZ\n    2110\n3378\n1.9\n70.66\n10.1\n39.9\n65\n51945\nArkansas\nAR\n    21198\n5114\n1.1\n71.71\n10.3\n62.6\n20\n156361\nCalifornia\nNA\n    2541\n4884\n0.7\n72.06\n6.8\n63.9\n166\n103766\nColorado\nNA\n    3100\n5348\n1.1\n72.48\n3.1\n56.0\n139\n4862\nConnecticut\nNA\n    579\n4809\n0.9\n70.06\n6.2\n54.6\n103\n1982\nDelaware\nDE\n    8277\n4815\n1.3\n70.66\n10.7\n52.6\n11\n54090\nFlorida\nFL\n    4931\n4091\n2.0\n68.54\n13.9\n40.6\n60\n58073\nGeorgia\nGA\n    868\n4963\n1.9\n73.60\n6.2\n61.9\n0\n6425\nHawaii\nHI\n    813\n4119\n0.6\n71.87\n5.3\n59.5\n126\n82677\nIdaho\nNA\n    11197\n5107\n0.9\n70.14\n10.3\n52.6\n127\n55748\nIllinois\nNA\n    5313\n4458\n0.7\n70.88\n7.1\n52.9\n122\n36097\nIndiana\nNA\n    2861\n4628\n0.5\n72.56\n2.3\n59.0\n140\n55941\nIowa\nNA\n    2280\n4669\n0.6\n72.58\n4.5\n59.9\n114\n81787\nKansas\nKS\n    3387\n3712\n1.6\n70.10\n10.6\n38.5\n95\n39650\nKentucky\nKY\n    3806\n3545\n2.8\n68.76\n13.2\n42.2\n12\n44930\nLouisiana\nLA\n    1058\n3694\n0.7\n70.39\n2.7\n54.7\n161\n30920\nMaine\nNA\n    4122\n5299\n0.9\n70.22\n8.5\n52.3\n101\n9891\nMaryland\nNA\n    5814\n4755\n1.1\n71.83\n3.3\n58.5\n103\n7826\nMassachusetts\nNA\n    9111\n4751\n0.9\n70.63\n11.1\n52.8\n125\n56817\nMichigan\nNA\n    3921\n4675\n0.6\n72.96\n2.3\n57.6\n160\n79289\nMinnesota\nNA\n    2341\n3098\n2.4\n68.09\n12.5\n41.0\n50\n47296\nMississippi\nNA\n    4767\n4254\n0.8\n70.69\n9.3\n48.8\n108\n68995\nMissouri\nNA\n    746\n4347\n0.6\n70.56\n5.0\n59.2\n155\n145587\nMontana\nNA\n    1544\n4508\n0.6\n72.60\n2.9\n59.3\n139\n76483\nNebraska\nNE\n    590\n5149\n0.5\n69.03\n11.5\n65.2\n188\n109889\nNevada\nNV\n    812\n4281\n0.7\n71.23\n3.3\n57.6\n174\n9027\nNew Hampshire\nNH\n    7333\n5237\n1.1\n70.93\n5.2\n52.5\n115\n7521\nNew Jersey\nNJ\n    1144\n3601\n2.2\n70.32\n9.7\n55.2\n120\n121412\nNew Mexico\nNM\n    18076\n4903\n1.4\n70.55\n10.9\n52.7\n82\n47831\nNew York\nNY\n    5441\n3875\n1.8\n69.21\n11.1\n38.5\n80\n48798\nNorth Carolina\nNC\n    637\n5087\n0.8\n72.78\n1.4\n50.3\n186\n69273\nNorth Dakota\nND\n    10735\n4561\n0.8\n70.82\n7.4\n53.2\n124\n40975\nOhio\nOH\n    2715\n3983\n1.1\n71.42\n6.4\n51.6\n82\n68782\nOklahoma\nOK\n    2284\n4660\n0.6\n72.13\n4.2\n60.0\n44\n96184\nOregon\nOR\n    11860\n4449\n1.0\n70.43\n6.1\n50.2\n126\n44966\nPennsylvania\nPA\n    931\n4558\n1.3\n71.90\n2.4\n46.4\n127\n1049\nRhode Island\nRI\n    2816\n3635\n2.3\n67.96\n11.6\n37.8\n65\n30225\nSouth Carolina\nSC\n    681\n4167\n0.5\n72.08\n1.7\n53.3\n172\n75955\nSouth Dakota\nSD\n    4173\n3821\n1.7\n70.11\n11.0\n41.8\n70\n41328\nTennessee\nTN\n    12237\n4188\n2.2\n70.90\n12.2\n47.4\n35\n262134\nTexas\nTX\n    1203\n4022\n0.6\n72.90\n4.5\n67.3\n137\n82096\nUtah\nUT\n    472\n3907\n0.6\n71.64\n5.5\n57.1\n168\n9267\nVermont\nNA\n    4981\n4701\n1.4\n70.08\n9.5\n47.8\n85\n39780\nVirginia\nNA\n    3559\n4864\n0.6\n71.72\n4.3\n63.5\n32\n66570\nWashington\nWA\n    1799\n3617\n1.4\n69.48\n6.7\n41.6\n100\n24070\nWest Virginia\nWV\n    4589\n4468\n0.7\n72.48\n3.0\n54.5\n149\n54464\nWisconsin\nWI\n    376\n4566\n0.6\n70.29\n6.9\n62.9\n173\n97203\nWyoming\nWY\n  \n  \n  \n\n\n\n\nAs colunas unidas da tabela Y, são adicionadas ao lado direito da tabela X.\n\n\n\n\n\n\nNota\n\n\n\nSe não for definido o parâmetro “by =”, a função irá automaticamente selecionar todas as colunas com o mesmo nome para definir uma chave. Veja mais detalhes na seção Combinando colunas para uniões.\n\n\n\n\n4.8.2.2 right_join\nUse para unir valores iguais de Y em X. Veja que right_join(Y, X) , é o mesmo que escrever left_join(X, Y). Veja a função left_join para mais informações.\n\n\n4.8.2.3 inner_join\nUse para unir todos os dados de X em Y e retornar somente as linhas em comum.\nPor exemplo, se quisermos obter todas as linhas da tabela X (com 50 registros) unindo-as com as linhas correspondentes em Y (com 37 registros), fazemos:\n\ninner_join(X, Y) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Population\n      Income\n      Illiteracy\n      Life Exp\n      Murder\n      HS Grad\n      Frost\n      Area\n      Estado\n      Abreviacao\n    \n  \n  \n    3615\n3624\n2.1\n69.05\n15.1\n41.3\n20\n50708\nAlabama\nAL\n    365\n6315\n1.5\n69.31\n11.3\n66.7\n152\n566432\nAlaska\nAK\n    2212\n4530\n1.8\n70.55\n7.8\n58.1\n15\n113417\nArizona\nAZ\n    2110\n3378\n1.9\n70.66\n10.1\n39.9\n65\n51945\nArkansas\nAR\n    579\n4809\n0.9\n70.06\n6.2\n54.6\n103\n1982\nDelaware\nDE\n    8277\n4815\n1.3\n70.66\n10.7\n52.6\n11\n54090\nFlorida\nFL\n    4931\n4091\n2.0\n68.54\n13.9\n40.6\n60\n58073\nGeorgia\nGA\n    868\n4963\n1.9\n73.60\n6.2\n61.9\n0\n6425\nHawaii\nHI\n    2280\n4669\n0.6\n72.58\n4.5\n59.9\n114\n81787\nKansas\nKS\n    3387\n3712\n1.6\n70.10\n10.6\n38.5\n95\n39650\nKentucky\nKY\n    3806\n3545\n2.8\n68.76\n13.2\n42.2\n12\n44930\nLouisiana\nLA\n    1544\n4508\n0.6\n72.60\n2.9\n59.3\n139\n76483\nNebraska\nNE\n    590\n5149\n0.5\n69.03\n11.5\n65.2\n188\n109889\nNevada\nNV\n    812\n4281\n0.7\n71.23\n3.3\n57.6\n174\n9027\nNew Hampshire\nNH\n    7333\n5237\n1.1\n70.93\n5.2\n52.5\n115\n7521\nNew Jersey\nNJ\n    1144\n3601\n2.2\n70.32\n9.7\n55.2\n120\n121412\nNew Mexico\nNM\n    18076\n4903\n1.4\n70.55\n10.9\n52.7\n82\n47831\nNew York\nNY\n    5441\n3875\n1.8\n69.21\n11.1\n38.5\n80\n48798\nNorth Carolina\nNC\n    637\n5087\n0.8\n72.78\n1.4\n50.3\n186\n69273\nNorth Dakota\nND\n    10735\n4561\n0.8\n70.82\n7.4\n53.2\n124\n40975\nOhio\nOH\n    2715\n3983\n1.1\n71.42\n6.4\n51.6\n82\n68782\nOklahoma\nOK\n    2284\n4660\n0.6\n72.13\n4.2\n60.0\n44\n96184\nOregon\nOR\n    11860\n4449\n1.0\n70.43\n6.1\n50.2\n126\n44966\nPennsylvania\nPA\n    931\n4558\n1.3\n71.90\n2.4\n46.4\n127\n1049\nRhode Island\nRI\n    2816\n3635\n2.3\n67.96\n11.6\n37.8\n65\n30225\nSouth Carolina\nSC\n    681\n4167\n0.5\n72.08\n1.7\n53.3\n172\n75955\nSouth Dakota\nSD\n    4173\n3821\n1.7\n70.11\n11.0\n41.8\n70\n41328\nTennessee\nTN\n    12237\n4188\n2.2\n70.90\n12.2\n47.4\n35\n262134\nTexas\nTX\n    1203\n4022\n0.6\n72.90\n4.5\n67.3\n137\n82096\nUtah\nUT\n    3559\n4864\n0.6\n71.72\n4.3\n63.5\n32\n66570\nWashington\nWA\n    1799\n3617\n1.4\n69.48\n6.7\n41.6\n100\n24070\nWest Virginia\nWV\n    4589\n4468\n0.7\n72.48\n3.0\n54.5\n149\n54464\nWisconsin\nWI\n    376\n4566\n0.6\n70.29\n6.9\n62.9\n173\n97203\nWyoming\nWY\n  \n  \n  \n\n\n\n\n\n\n4.8.2.4 full_join\nUse para unir os dados de X e Y, mantendo todas as linhas e todas as variáveis.\nPara este exemplo, iremos incluir uma linha (add_row) na tabela Y, que não possui um valores correspondente em X.\n\nY <- add_row(Y, Abreviacao = \"XX\", Estado = \"Estado inexistente\")\nfull_join(X, Y) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Population\n      Income\n      Illiteracy\n      Life Exp\n      Murder\n      HS Grad\n      Frost\n      Area\n      Estado\n      Abreviacao\n    \n  \n  \n    3615\n3624\n2.1\n69.05\n15.1\n41.3\n20\n50708\nAlabama\nAL\n    365\n6315\n1.5\n69.31\n11.3\n66.7\n152\n566432\nAlaska\nAK\n    2212\n4530\n1.8\n70.55\n7.8\n58.1\n15\n113417\nArizona\nAZ\n    2110\n3378\n1.9\n70.66\n10.1\n39.9\n65\n51945\nArkansas\nAR\n    21198\n5114\n1.1\n71.71\n10.3\n62.6\n20\n156361\nCalifornia\nNA\n    2541\n4884\n0.7\n72.06\n6.8\n63.9\n166\n103766\nColorado\nNA\n    3100\n5348\n1.1\n72.48\n3.1\n56.0\n139\n4862\nConnecticut\nNA\n    579\n4809\n0.9\n70.06\n6.2\n54.6\n103\n1982\nDelaware\nDE\n    8277\n4815\n1.3\n70.66\n10.7\n52.6\n11\n54090\nFlorida\nFL\n    4931\n4091\n2.0\n68.54\n13.9\n40.6\n60\n58073\nGeorgia\nGA\n    868\n4963\n1.9\n73.60\n6.2\n61.9\n0\n6425\nHawaii\nHI\n    813\n4119\n0.6\n71.87\n5.3\n59.5\n126\n82677\nIdaho\nNA\n    11197\n5107\n0.9\n70.14\n10.3\n52.6\n127\n55748\nIllinois\nNA\n    5313\n4458\n0.7\n70.88\n7.1\n52.9\n122\n36097\nIndiana\nNA\n    2861\n4628\n0.5\n72.56\n2.3\n59.0\n140\n55941\nIowa\nNA\n    2280\n4669\n0.6\n72.58\n4.5\n59.9\n114\n81787\nKansas\nKS\n    3387\n3712\n1.6\n70.10\n10.6\n38.5\n95\n39650\nKentucky\nKY\n    3806\n3545\n2.8\n68.76\n13.2\n42.2\n12\n44930\nLouisiana\nLA\n    1058\n3694\n0.7\n70.39\n2.7\n54.7\n161\n30920\nMaine\nNA\n    4122\n5299\n0.9\n70.22\n8.5\n52.3\n101\n9891\nMaryland\nNA\n    5814\n4755\n1.1\n71.83\n3.3\n58.5\n103\n7826\nMassachusetts\nNA\n    9111\n4751\n0.9\n70.63\n11.1\n52.8\n125\n56817\nMichigan\nNA\n    3921\n4675\n0.6\n72.96\n2.3\n57.6\n160\n79289\nMinnesota\nNA\n    2341\n3098\n2.4\n68.09\n12.5\n41.0\n50\n47296\nMississippi\nNA\n    4767\n4254\n0.8\n70.69\n9.3\n48.8\n108\n68995\nMissouri\nNA\n    746\n4347\n0.6\n70.56\n5.0\n59.2\n155\n145587\nMontana\nNA\n    1544\n4508\n0.6\n72.60\n2.9\n59.3\n139\n76483\nNebraska\nNE\n    590\n5149\n0.5\n69.03\n11.5\n65.2\n188\n109889\nNevada\nNV\n    812\n4281\n0.7\n71.23\n3.3\n57.6\n174\n9027\nNew Hampshire\nNH\n    7333\n5237\n1.1\n70.93\n5.2\n52.5\n115\n7521\nNew Jersey\nNJ\n    1144\n3601\n2.2\n70.32\n9.7\n55.2\n120\n121412\nNew Mexico\nNM\n    18076\n4903\n1.4\n70.55\n10.9\n52.7\n82\n47831\nNew York\nNY\n    5441\n3875\n1.8\n69.21\n11.1\n38.5\n80\n48798\nNorth Carolina\nNC\n    637\n5087\n0.8\n72.78\n1.4\n50.3\n186\n69273\nNorth Dakota\nND\n    10735\n4561\n0.8\n70.82\n7.4\n53.2\n124\n40975\nOhio\nOH\n    2715\n3983\n1.1\n71.42\n6.4\n51.6\n82\n68782\nOklahoma\nOK\n    2284\n4660\n0.6\n72.13\n4.2\n60.0\n44\n96184\nOregon\nOR\n    11860\n4449\n1.0\n70.43\n6.1\n50.2\n126\n44966\nPennsylvania\nPA\n    931\n4558\n1.3\n71.90\n2.4\n46.4\n127\n1049\nRhode Island\nRI\n    2816\n3635\n2.3\n67.96\n11.6\n37.8\n65\n30225\nSouth Carolina\nSC\n    681\n4167\n0.5\n72.08\n1.7\n53.3\n172\n75955\nSouth Dakota\nSD\n    4173\n3821\n1.7\n70.11\n11.0\n41.8\n70\n41328\nTennessee\nTN\n    12237\n4188\n2.2\n70.90\n12.2\n47.4\n35\n262134\nTexas\nTX\n    1203\n4022\n0.6\n72.90\n4.5\n67.3\n137\n82096\nUtah\nUT\n    472\n3907\n0.6\n71.64\n5.5\n57.1\n168\n9267\nVermont\nNA\n    4981\n4701\n1.4\n70.08\n9.5\n47.8\n85\n39780\nVirginia\nNA\n    3559\n4864\n0.6\n71.72\n4.3\n63.5\n32\n66570\nWashington\nWA\n    1799\n3617\n1.4\n69.48\n6.7\n41.6\n100\n24070\nWest Virginia\nWV\n    4589\n4468\n0.7\n72.48\n3.0\n54.5\n149\n54464\nWisconsin\nWI\n    376\n4566\n0.6\n70.29\n6.9\n62.9\n173\n97203\nWyoming\nWY\n    NA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nEstado inexistente\nXX\n  \n  \n  \n\n\n\n\nVeja que no exemplo acima, temos agora 51 registros, já que uma linha adicional foi criada com o novo registro de Y que não existia em X.\n\n\n4.8.2.5 Combinando colunas para uniões\nSe não for definido o parâmetro “by =”, a função irá automaticamente selecionar todas as colunas com o mesmo nome para definir uma chave.\nSe usarmos by = vetor, por exemplo, by = c(“Estado”), estamos definindo a chave de maneira explícita. Podemos definir uma chave contendo mais que uma colunas usando c(“coluna1”, “coluna2”), com isto, a união será feita encontrando os valores comuns em ambas as colunas das duas tabelas.\nSe quisermos definir uma chave que não possui o mesmo nome nas duas tabelas, podemos ainda usar o parametro by = c(“coluna de X” = “aa”, “coluna de Y” = “bb”).\nPara exemplificar este caso, vamos renomear a coluna “Estado” da tabela Y para “State” e salvarmos numa tabela Z. Depois iremos usar o parametro by = para definir esta coluna como chave e então podermos efetuar uma união (ex, left_join()).\n\nZ <- rename(Y, State = Estado)\nleft_join (Z, X, by = c(\"State\" = \"Estado\"))  \n\n\n\n  \n\n\ngt(Z)\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      State\n    \n  \n  \n    AL\nAlabama\n    AK\nAlaska\n    AZ\nArizona\n    AR\nArkansas\n    DE\nDelaware\n    FL\nFlorida\n    GA\nGeorgia\n    HI\nHawaii\n    KS\nKansas\n    KY\nKentucky\n    LA\nLouisiana\n    NE\nNebraska\n    NV\nNevada\n    NH\nNew Hampshire\n    NJ\nNew Jersey\n    NM\nNew Mexico\n    NY\nNew York\n    NC\nNorth Carolina\n    ND\nNorth Dakota\n    OH\nOhio\n    OK\nOklahoma\n    OR\nOregon\n    PA\nPennsylvania\n    RI\nRhode Island\n    SC\nSouth Carolina\n    SD\nSouth Dakota\n    TN\nTennessee\n    TX\nTexas\n    UT\nUtah\n    WA\nWashington\n    WV\nWest Virginia\n    WI\nWisconsin\n    WY\nWyoming\n    XX\nEstado inexistente\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nCaso tenhamos colunas com o mesmo nome que não seja a chave, as uniões irão colocar automaticamento um sufixo (.x e .y). Se quiser alterar este sufixo, use o parametro suffix = (ex: suffix c(“Tabela_1”, “Tabela_2”)).\n\n\n\n\n\n4.8.3 Juntando Observações\nQuando tivermos linhas em tabelas diferentes para serem unidas, podemos fazê-lo usndo a função bind_rows(). Em alguns casos, desejamos filtrar linhas de uma tabela, baseada em linhas em comum de outra tabela, para estes casos, iremos usar as uniões de filtro (filtering joins).\n\n\n\n\n\n\nNota\n\n\n\nAs tabelas usadas nos exemplos a seguir são as mesmas utilizadas na seção Relacionando Dados.\n\n\n\n4.8.3.1 bind_rows\nUse para unir observações (linhas) que possuem o mesmo número de colunas.\nPor exemplo, usando as tabelas X e Y preparadas no início da seção Relacionando Dados, podemos criar uma tabela Z, com mais 3 observações e uní-la na tabela Y.\nTabela Z\n\nZ <- tibble(\n  Abreviacao = c(\"01\", \"02\", \"03\"), \n  Estado = c(\"Estado01\", \"Estado02\", \"Estado03\"))\ngt(Z)\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      Estado\n    \n  \n  \n    01\nEstado01\n    02\nEstado02\n    03\nEstado03\n  \n  \n  \n\n\n\n\nAgora, podemos unir as tabela Y com a tabela Z usando bind_rows():\n\nbind_rows(Y, Z) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      Estado\n    \n  \n  \n    AL\nAlabama\n    AK\nAlaska\n    AZ\nArizona\n    AR\nArkansas\n    DE\nDelaware\n    FL\nFlorida\n    GA\nGeorgia\n    HI\nHawaii\n    KS\nKansas\n    KY\nKentucky\n    LA\nLouisiana\n    NE\nNebraska\n    NV\nNevada\n    NH\nNew Hampshire\n    NJ\nNew Jersey\n    NM\nNew Mexico\n    NY\nNew York\n    NC\nNorth Carolina\n    ND\nNorth Dakota\n    OH\nOhio\n    OK\nOklahoma\n    OR\nOregon\n    PA\nPennsylvania\n    RI\nRhode Island\n    SC\nSouth Carolina\n    SD\nSouth Dakota\n    TN\nTennessee\n    TX\nTexas\n    UT\nUtah\n    WA\nWashington\n    WV\nWest Virginia\n    WI\nWisconsin\n    WY\nWyoming\n    XX\nEstado inexistente\n    01\nEstado01\n    02\nEstado02\n    03\nEstado03\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nImportante\n\n\n\nObserve que, se tivermos alguma coluna que não é comum entre as tabelas, esta coluna será criada automaticamente. Por exemplo:\n\n\n\nZ <- mutate (Z, Coluna_Extra = c(\"Valor01\", \"Valor02\", \"Valor03\"))\nbind_rows(Y, Z) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      Estado\n      Coluna_Extra\n    \n  \n  \n    AL\nAlabama\nNA\n    AK\nAlaska\nNA\n    AZ\nArizona\nNA\n    AR\nArkansas\nNA\n    DE\nDelaware\nNA\n    FL\nFlorida\nNA\n    GA\nGeorgia\nNA\n    HI\nHawaii\nNA\n    KS\nKansas\nNA\n    KY\nKentucky\nNA\n    LA\nLouisiana\nNA\n    NE\nNebraska\nNA\n    NV\nNevada\nNA\n    NH\nNew Hampshire\nNA\n    NJ\nNew Jersey\nNA\n    NM\nNew Mexico\nNA\n    NY\nNew York\nNA\n    NC\nNorth Carolina\nNA\n    ND\nNorth Dakota\nNA\n    OH\nOhio\nNA\n    OK\nOklahoma\nNA\n    OR\nOregon\nNA\n    PA\nPennsylvania\nNA\n    RI\nRhode Island\nNA\n    SC\nSouth Carolina\nNA\n    SD\nSouth Dakota\nNA\n    TN\nTennessee\nNA\n    TX\nTexas\nNA\n    UT\nUtah\nNA\n    WA\nWashington\nNA\n    WV\nWest Virginia\nNA\n    WI\nWisconsin\nNA\n    WY\nWyoming\nNA\n    XX\nEstado inexistente\nNA\n    01\nEstado01\nValor01\n    02\nEstado02\nValor02\n    03\nEstado03\nValor03\n  \n  \n  \n\n\n\n\n\n\n4.8.3.2 semi_join\nUse para retornar todas as linhas da tabela X que são comuns na tabela Y.\nPor exemplo, para filtrar a tabela Y com apenas os valores presentes na tabela X, usamos:\n\nsemi_join(Y, X) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      Estado\n    \n  \n  \n    AL\nAlabama\n    AK\nAlaska\n    AZ\nArizona\n    AR\nArkansas\n    DE\nDelaware\n    FL\nFlorida\n    GA\nGeorgia\n    HI\nHawaii\n    KS\nKansas\n    KY\nKentucky\n    LA\nLouisiana\n    NE\nNebraska\n    NV\nNevada\n    NH\nNew Hampshire\n    NJ\nNew Jersey\n    NM\nNew Mexico\n    NY\nNew York\n    NC\nNorth Carolina\n    ND\nNorth Dakota\n    OH\nOhio\n    OK\nOklahoma\n    OR\nOregon\n    PA\nPennsylvania\n    RI\nRhode Island\n    SC\nSouth Carolina\n    SD\nSouth Dakota\n    TN\nTennessee\n    TX\nTexas\n    UT\nUtah\n    WA\nWashington\n    WV\nWest Virginia\n    WI\nWisconsin\n    WY\nWyoming\n  \n  \n  \n\n\n\n\n\n\n4.8.3.3 anti_join\nUse para retornar todas as linhas da tabela X que são NÃO comuns na tabela Y.\nPor exemplo, para filtrar a tabela Y com apenas os valores NÃO presentes na tabela X, usamos:\n\nanti_join(Y, X) |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Abreviacao\n      Estado\n    \n  \n  \n    XX\nEstado inexistente\n  \n  \n  \n\n\n\n\n\n\n4.8.3.4 nest_join\nUse para retornar todas as linhas e colunas de X em uma nova coluna contendo todos os valores encontrados em Y.\nPor exemplo, para criar uma colunas na tabela Y, contendo os registros encontrados na tabela X que são comuns entre elas, ou seja, que possuem a coluna Estado com valores comuns entre elas:\n\nnest_join(Y, X, by = \"Estado\", name = \"Dados de X\") \n\n\n\n  \n\n\n\n\n\n\n\n\n\nDica\n\n\n\nPodemos usar a função tidyr::unnest() para desaninhar a coluna.\n\n\n\n\n4.8.3.5 Operações de Definição\nO pacote generics, possui também algumas funções que ajudam a identificar uniões (union), intersecções (intersect) e diferenças entre dois vetores. Esta funções podem ser úteis para obter estão operações em dois data-frames.\n\n\n4.8.3.6 intersect\nUse para obter a intersecção de dois conjuntos de dados.\nPor exemplo, se quisermos saber quais linhas estão presentes no vetor v (1,2,3,4,5) e w(2,4) , podemos fazer:\n\nv <- c(1:5)\nw <- c(2,4)\n\nintersect(v,w) \n\n[1] 2 4\n\n\n\n\n4.8.3.7 setdiff\nUse para saber quais elementos de v NÃO estão presentes em w.\n\nv <- c(1:5)\nw <- c(2,4)\n\nsetdiff(v,w)\n\n[1] 1 3 5\n\n\n\n\n4.8.3.8 union\nUse para fazer a união de dois conjuntos de dados.\n\nv <- c(1:5)\nw <- c(2,4,\"a\",\"b\")\nunion (v,w)\n\n[1] \"1\" \"2\" \"3\" \"4\" \"5\" \"a\" \"b\""
  },
  {
    "objectID": "Transformacao/Transformacao_de_dados_com_dplyr.html#nome-de-linhas",
    "href": "Transformacao/Transformacao_de_dados_com_dplyr.html#nome-de-linhas",
    "title": "4  Transformação de Dados com DPLYR",
    "section": "4.9 Nome de Linhas",
    "text": "4.9 Nome de Linhas\nDados organizados (tidy) não usam nomes de linhas (que contém uma variável fora das colunas). Para trabalhar com este nomes, mova para uma coluna.\nPor exemplo, quando usamos a função head() para obter as primeiras linhas da tabela mtcars, obtemos a seguinte resposta:\n\nmtcars |> \n  head()\n\n\n\n  \n\n\n\nObserve que na lista acima, o nome de cada veículo aparece na saída.\nPorém, se pedirmos para mostrar os nomes as variáveis da table usando a função names(), não há nenhuma coluna que comporta o nome dos veículos.\nIsto acontece porque o nomes dos veículos está associado ao nomes das linhas e não a coluna.\n\n4.9.0.1 rownames_to_column\nSe quisermos mover os nomes das linha para uma coluna, usamos a função rownames_to_column do pacote tibble:\n\ntibble::rownames_to_column(mtcars, var = \"Nomes_Veiculos\") |> \n  gt()\n\n\n\n\n\n  \n  \n    \n      Nomes_Veiculos\n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    Mazda RX4\n21.0\n6\n160.0\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    Mazda RX4 Wag\n21.0\n6\n160.0\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    Datsun 710\n22.8\n4\n108.0\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    Hornet 4 Drive\n21.4\n6\n258.0\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    Hornet Sportabout\n18.7\n8\n360.0\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    Valiant\n18.1\n6\n225.0\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n    Duster 360\n14.3\n8\n360.0\n245\n3.21\n3.570\n15.84\n0\n0\n3\n4\n    Merc 240D\n24.4\n4\n146.7\n62\n3.69\n3.190\n20.00\n1\n0\n4\n2\n    Merc 230\n22.8\n4\n140.8\n95\n3.92\n3.150\n22.90\n1\n0\n4\n2\n    Merc 280\n19.2\n6\n167.6\n123\n3.92\n3.440\n18.30\n1\n0\n4\n4\n    Merc 280C\n17.8\n6\n167.6\n123\n3.92\n3.440\n18.90\n1\n0\n4\n4\n    Merc 450SE\n16.4\n8\n275.8\n180\n3.07\n4.070\n17.40\n0\n0\n3\n3\n    Merc 450SL\n17.3\n8\n275.8\n180\n3.07\n3.730\n17.60\n0\n0\n3\n3\n    Merc 450SLC\n15.2\n8\n275.8\n180\n3.07\n3.780\n18.00\n0\n0\n3\n3\n    Cadillac Fleetwood\n10.4\n8\n472.0\n205\n2.93\n5.250\n17.98\n0\n0\n3\n4\n    Lincoln Continental\n10.4\n8\n460.0\n215\n3.00\n5.424\n17.82\n0\n0\n3\n4\n    Chrysler Imperial\n14.7\n8\n440.0\n230\n3.23\n5.345\n17.42\n0\n0\n3\n4\n    Fiat 128\n32.4\n4\n78.7\n66\n4.08\n2.200\n19.47\n1\n1\n4\n1\n    Honda Civic\n30.4\n4\n75.7\n52\n4.93\n1.615\n18.52\n1\n1\n4\n2\n    Toyota Corolla\n33.9\n4\n71.1\n65\n4.22\n1.835\n19.90\n1\n1\n4\n1\n    Toyota Corona\n21.5\n4\n120.1\n97\n3.70\n2.465\n20.01\n1\n0\n3\n1\n    Dodge Challenger\n15.5\n8\n318.0\n150\n2.76\n3.520\n16.87\n0\n0\n3\n2\n    AMC Javelin\n15.2\n8\n304.0\n150\n3.15\n3.435\n17.30\n0\n0\n3\n2\n    Camaro Z28\n13.3\n8\n350.0\n245\n3.73\n3.840\n15.41\n0\n0\n3\n4\n    Pontiac Firebird\n19.2\n8\n400.0\n175\n3.08\n3.845\n17.05\n0\n0\n3\n2\n    Fiat X1-9\n27.3\n4\n79.0\n66\n4.08\n1.935\n18.90\n1\n1\n4\n1\n    Porsche 914-2\n26.0\n4\n120.3\n91\n4.43\n2.140\n16.70\n0\n1\n5\n2\n    Lotus Europa\n30.4\n4\n95.1\n113\n3.77\n1.513\n16.90\n1\n1\n5\n2\n    Ford Pantera L\n15.8\n8\n351.0\n264\n4.22\n3.170\n14.50\n0\n1\n5\n4\n    Ferrari Dino\n19.7\n6\n145.0\n175\n3.62\n2.770\n15.50\n0\n1\n5\n6\n    Maserati Bora\n15.0\n8\n301.0\n335\n3.54\n3.570\n14.60\n0\n1\n5\n8\n    Volvo 142E\n21.4\n4\n121.0\n109\n4.11\n2.780\n18.60\n1\n1\n4\n2\n  \n  \n  \n\n\n\n\n\n\n4.9.0.2 column_to_rownames\nUse para nomear as linhas de acordo com uma variável já existente. Digamos que esta função faz o oposto da rownames_to_column, pois ao invés de pegar os nomes das linhas e colocar em uma variável, ela pega uma variável e a transforma em nomes para as linha."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Transformação e Manipulação de Dados com a linguagem R",
    "section": "",
    "text": "Este livro contém uma série de informações sobre transformação e manipulação de dados utilizando a linguagem R, mais especificamente o pacote tidyverse.\nEstas são etapas muito importantes no ciclo de vida de um projeto de ciência de dados ou mesmo para utilização em áreas de negócio das organizações, que estão cada vez mais, buscando tomar decisão com base em dados.\nA comunidade R tem produzido ao longo dos anos uma série Folhas de Referências(cheatsheets)que fazem parte também da ferramenta de desenvolvimento RStudio.\nEstas Folhas de Referências, são anotações de 2 páginas que visam resumir as principais informações sobre determinado tema ou pacote do R.\nEste livro se baseia nestas folhas de referências, que apesar de extremamente úteis, podem ser de difícil interpretação para usuários iniciantes.\nAleḿ disso, a escassez de documentação sobre o tema em lingua Portuguesa, foi outro motivador para este trabalho.\nOs temas abordados neste livro são:\n\nImportação de Dados: Trata sobre importação de dados .csv, excel e Google Sheets, com o pacote tidyverse (readr, readxl and googlesheets4). Ver folha de referência: data-import cheatsheet.\nOrganização de Dados: Sobre organização de dados com o pacote tidyr. Ver folha de referência: tidyr cheatsheet.\nTransformação de dados : Apresenta a transformação de dados com o pacote dplyr. Ver folha de referência: data transformation cheatsheet\nManipulação de strings: Fala sobre manipulação de strings com o pacote stringr. Apresenta também um bom conteúdo sobre expressões regulares (regex). Ver folha de referência: stringr cheatsheet\nDatas e horas: Sobre a formatação e cálculos de variáveis com datas e horas com o pacote lubridate. Ver folhe da refrência: lubridate cheatsheet.\n\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar o conteúdo deste livro, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\n\n\n\n\n\n\nNota\n\n\n\nEste livro é de conteúdo público. Para acessar o código-fonte e/ou contribuir com correções ou sugestões acesse:\nhttps://github.com/scopinho/Livro_Transform_Dados_R"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introdução",
    "section": "",
    "text": "Para saber mais sobre este pacote, acesse:\nhttps://cran.r-project.org/package=tidyverse.\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\nPara os exemplos, iremos carregar inicialmente os seguintes pacotes:\n\ntidyverse\ngt\n\n\nlibrary (tidyverse)\nlibrary (gt)\n\n\n1.0.1 Folhas de Referências\nA maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na Folha de Referência dos pacotes (cheatsheets) disponível no site do RStudio.\nA seguir, um exemplo de uma “Folha de Referência” do pacote DPLYR:\n\n\n\n\n\n\n\nNota\n\n\n\nEm geral, ao final de cada seção de código, você pderá ver a chamada à função gt().\nIsto é apenas para a formatação da tabela de saída e não é necessário para que você entenda os comandos precedentes.\nEm alguns casos, onde o volume de dados de saída pode ser extenso, usamos também a função head() para mostrar apenas as linhas iniciais. Quando o exemplo possui muitas colunas de saída, eventualmente utilizamos a função select() para selecionar apenas algumas colunas. A função print() também pode estar presente afim de apresentar o resultado de alguma linha de código relevante para o entendimento."
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#introdução",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#introdução",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "7.2 Introdução",
    "text": "7.2 Introdução\nA seguir temos vários exemplos de visualização de dados utilizando o pacote GGPLOT2 do R.\n\n\n\n\n\n\nNota\n\n\n\nApesar de visualização de dados não ser especificamente parte das etapas de transformação e manipulação de dados, acreditamos ser importante um conhecimento básico sobre o tema, pois muitas vezes, para explicarmos aquilo que estamos transformando ou manipulando, o fazemos de forma gráfica para melhor compreensão.\n\n\nPara saber mais sobre este pacote, acesse:\nhttps://cran.r-project.org/package=ggplot2.\n\n\n\n\n\n\nAviso\n\n\n\nPara melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:\nhttps://education.rstudio.com/learn/beginner/.\n\n\nPara os exemplos, iremos carregar os seguintes pacotes:\n\ntidyverse\ngt\n\n\nlibrary (tidyverse)\nlibrary (gt)\n\n\n7.2.1 Exemplos da Folha de Referência\nA maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na Folha de Referência do stringr disponível no site do RStudio."
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#gramática-dos-gráficos",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#gramática-dos-gráficos",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "7.3 Gramática dos Gráficos",
    "text": "7.3 Gramática dos Gráficos\nO pacote ggplot2 é uma implementação do livro “Grammar of Graphics”, que apresenta um conceito de quais seriam os elementos de um gráfico e suas interconexões. O modelo teórico proposto no livro é que através de camadas definidas qualquer gráfico pode ser construído. Abaixo o modelo, que deve ser interpretado de baixo para cima.\n\nDe uma forma bem resumida, a idéia é que você possa construir qualquer gráfico com base nestes mesmos elementos: um conjunto de dados, um sistema de coordenadas e geoms, que seriam marcas visuais que representas os pontos dos dados.\n\nNo caso do ggplot2, para mostrar valores no gráfico, as varíaveis do conjunto de dados são mapeadas em propriedadas visuais da geometria (geom).\nEste mapeamento de estética (aesthetic) é feito através da função aes() e podemos fazer mapeamentos estéticos como cor ou tamanho."
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-propósito-geral",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-propósito-geral",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "12.1 ESCALAS DE PROPÓSITO GERAL",
    "text": "12.1 ESCALAS DE PROPÓSITO GERAL"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-localização-x-y",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-localização-x-y",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "12.2 ESCALAS DE LOCALIZAÇÃO X & Y",
    "text": "12.2 ESCALAS DE LOCALIZAÇÃO X & Y"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-cor-e-preenchimento-discretas",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-cor-e-preenchimento-discretas",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "12.3 ESCALAS DE COR E PREENCHIMENTO (DISCRETAS)",
    "text": "12.3 ESCALAS DE COR E PREENCHIMENTO (DISCRETAS)"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-cor-e-preenchimento-contínuas",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-cor-e-preenchimento-contínuas",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "12.4 ESCALAS DE COR E PREENCHIMENTO (CONTÍNUAS)",
    "text": "12.4 ESCALAS DE COR E PREENCHIMENTO (CONTÍNUAS)"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-forma-e-tamanho",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#escalas-de-forma-e-tamanho",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "12.5 ESCALAS DE FORMA E TAMANHO",
    "text": "12.5 ESCALAS DE FORMA E TAMANHO"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#gráficos-primitivos",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#gráficos-primitivos",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.1 Gráficos Primitivos",
    "text": "10.1 Gráficos Primitivos\nPara os exemplos a seguir, utilizaremos duas bases de dados, uma chamada economics e outra chamada seals.\n\nEconomicsSeals\n\n\n\neconomics\n\n\n\n  \n\n\n\n\n\n\nseals\n\n\n\n  \n\n\n\n\n\n\nPara simplificar o código dos próximos exemplos, iremos criar dois objetos gráfico do ggplot:\nO primeiro chamado “a”, irá conter um objeto ggplot com os dados de economics, mapeando a estética de x para a variável “date” e y para a variável “unemployed”.\nO segundo chamado “b”, irá conter um objeto ggplot com os dados de seals, mapeando a estética de x para a variável “long” e y para a variável “lat”.\nDesta forma trabalharemos com os mesmos objetos base e adicionaremos apenas novas camadas afim de identificar os detalhes das diversas funções de geometria.\n\na <- ggplot(economics, aes(date, unemploy))\nb <- ggplot(seals, aes(x = long, y = lat))\n\n\n\n\n\n\n\nNota\n\n\n\nPara simplificar o código, em algum momentos podemos omitir o argumento, como data=, mapping = , x = , y = . Isto porque já estamos os valores na ordem da função.\n\n\nAgora com os objetos inicialmente criados, iremos adicionar novas camadas afim de obtermos os gráficos e entendermos algumas das funções de geometria para gráficos primitivos.\n\n10.1.0.1 geom_blank\nUse para garantir limites para todos os gráficos de acordo com os dados.\n\na + geom_blank()\n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nUse a função expand_limits() para expandir os limites do gráfico usando dados. Ver ?expand_limits para mais detalhes.\n\n\n\n\n10.1.0.2 geom_curve\nUse para criar curvas.\n\nb + geom_curve(aes(yend = lat + 1, xend = long + 1), curvature = 1)\n\n\n\n\n\n\n10.1.0.3 geom_path\nUse para conectar observações.\n\na + geom_path(lineend = \"butt\", linejoin = \"round\", linemitre = 1)\n\n\n\n\n\n\n10.1.0.4 geom_polygon\nUse para criar poligonos. É similar a geom_path(), porém a parte interna é preenchida com argumento fill =.\n\na + geom_polygon(aes(alpha = 50))\n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nO argumento alpha = , é muito comum na definição de cores. De maneira simplificada, ele indica o nível de transparência de uma cor, sendo 0, nenhuma transparência e 1 transparência total.\n\n\n\n\n10.1.0.5 geom_rect\nUse para criar retângulos.\n\nb + geom_rect(aes(xmin = long, ymin = lat,\nxmax = long + 1, ymax = lat + 1))\n\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nA função geom_title() fazem a mesma coisa, porém são parametrizadas de forma diferente. A geom_rect usa a localização dos 4 cantos do quadrado, enquanto a geom_tile usa o centro e seu tamanho (largura e altura) para dimensionar.\n\n\n\n\n10.1.0.6 geom_ribbon\nUse para criar uma “fita”. Para cada valor de x, ela mostra um intervalo y, definido por ymin e ymax. Veja que geom_area() é um caso especial do geom_ribbon(), onde o ymin é fixo em 0 e y é usado no lugar de ymax.\n\na + geom_ribbon (aes(ymin = unemploy - 900,\nymax = unemploy + 900))"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#segmentos-de-linhas",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#segmentos-de-linhas",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.2 Segmentos de Linhas",
    "text": "10.2 Segmentos de Linhas\nEstas funções de geometrias, permitem criar diversos tipo de segmentos de linha e são úteis quando precisamos “marcar” ou definir algo no gráfico, com linhas verticais ou horizontais por exemplo.\n\n10.2.0.1 geom_abline\nUse para criar uma linha de um ponto “a” até um ponto “b”, passando o intercepto e a inclinação da reta.\n\nb +  geom_abline(aes(intercept = 0, slope = 1))\n\n\n\n\n\n\n10.2.0.2 geom_hline\nUse para criar uma ou mais linhas horizontais.\n\nb + geom_hline(aes(yintercept = lat))\n\n\n\n\n\n\n10.2.0.3 geom_vline\nUse para criar uma ou mais linhas horizontais.\n\nb + geom_vline(aes(xintercept = long))\n\n\n\n\ngeom_segment\nÉ similar ao geom_curve, porém ao invés de criar uma curva, criar um segmento de reta.\n\nb + geom_segment(aes(yend = lat + 1, xend = long + 1))\n\n\n\n\ngeom_spoke\nUse para criar um segmento, parametrizado pela localização, direção e distância.\n\nb + geom_spoke(aes(angle = 1:1155, radius = 1))"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#uma-variável-contínua",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#uma-variável-contínua",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.3 Uma Variável Contínua",
    "text": "10.3 Uma Variável Contínua\nNovamente, iremos preparar nossos objetos básicos para evitar repetição de código. Agora teremos um objeto “c” e outro “c2”, aos quais iremos adicionar novas camadas. Similar ao que fizemos anteriormente, porém agora utilizaremos a base de dados “mpg”.\n\nmpg\n\n\n\n  \n\n\n\nCriando os objetos ggplot:\n\nc <- ggplot(mpg, aes(hwy))\nc2 <- ggplot(mpg)\n\n\n\n\n\n\n\nImportante\n\n\n\nObserve que o objeto “c”, usa a base “mpg” já atribuindo a variável “hwy” para x= da estética. Esta configuração será aplicada para qualquer funções geom_*() a não ser que explicitamente tenhamos uma estética redefinindo isso dentro de outra camanda de geometria.\nJá para o objeto “c2”, não temos a estética de x definida, portanto, teremos que definí-la em nas próximas camadas com a funções de geometria (geom_*()).\n\n\n\n10.3.0.1 geom_area\nUse para criar uma geometria de área.\nVocê verá um argument (stat = “bin”) abaixo. Veremos as estatísticas na seção ESTATÍSTICAS (STATS). Por hora, pense apenas que é uma forma de definirmos os valores que iremos mostrar para o eixo y. Por padrão o número de agrupamento (bin) é 30.\n\nc + geom_area(stat = \"bin\")\n\n\n\n\n\n\n10.3.0.2 geom_density\nUse para fazer um gráfico de densidade de um variável contínua.\nHá a possibilidade de configurar vários kernels das funções de densidade, como “gaussian”, “rectangular”, “triangular”, “epanechnikov”, “biweight”, “cosine” ou “optcosine”.\n\nc + geom_density(kernel = \"gaussian\")\n\n\n\n\n\n\n10.3.0.3 geom_dotplot\nUse para criar uma geometria de pontos, com a largura dos pontos correspondem à largura do agrupamento e os pontos são empilhados. Cada ponto corresponde à uma observação dos dados.\n\nc + geom_dotplot()\n\n\n\n\n\n\n10.3.0.4 geom_freqpoly\n\nc + geom_freqpoly()\n\n\n\n\n\n\n10.3.0.5 geom_histogram\nUse para criar histogramas. O argumento binwidth = define o tamanho do agrupamento da variável.\n\nc + geom_histogram(binwidth = 5)\n\n\n\n\n\n\n10.3.0.6 geom_qq\nUse para criar um gráfico de quantil-quantil. Em geral utilizado para confirmar se uma variável tem uma distribuição gaussiana.\n\nc2 + geom_qq(aes(sample = hwy))"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#section",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#section",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.4 ",
    "text": "10.4"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#uma-variável-discreta",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#uma-variável-discreta",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.4 Uma Variável Discreta",
    "text": "10.4 Uma Variável Discreta"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#duas-variáveis-contínuas",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#duas-variáveis-contínuas",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.5 Duas Variáveis Contínuas",
    "text": "10.5 Duas Variáveis Contínuas"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#duas-variáveis-distribuição-bivariada-contínua",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#duas-variáveis-distribuição-bivariada-contínua",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.6 Duas Variáveis Distribuição Bivariada Contínua",
    "text": "10.6 Duas Variáveis Distribuição Bivariada Contínua"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#uma-variável-contínua-e-outra-discreta",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#uma-variável-contínua-e-outra-discreta",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.7 Uma Variável Contínua e Outra Discreta",
    "text": "10.7 Uma Variável Contínua e Outra Discreta"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#duas-variáveis-discretas",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#duas-variáveis-discretas",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.8 Duas Variáveis Discretas",
    "text": "10.8 Duas Variáveis Discretas"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#mapas",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#mapas",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.9 Mapas",
    "text": "10.9 Mapas"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#visualizando-erros",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#visualizando-erros",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.10 Visualizando Erros",
    "text": "10.10 Visualizando Erros"
  },
  {
    "objectID": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#três-variáveis",
    "href": "Visualizacao/Visualizacao_de_dados_com_ggplot2.html#três-variáveis",
    "title": "7  Visualização de Dados com GGPLOT2",
    "section": "10.11 Três Variáveis",
    "text": "10.11 Três Variáveis"
  }
]