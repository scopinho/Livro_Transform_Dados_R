<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Transformação e Manipulação de Dados com a linguagem R - 5&nbsp; Datas e horas com LUBRIDATE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Visualizacao/Visualizacao_de_dados_com_ggplot2.html" rel="next">
<link href="../Manipulacao_Strings/Manipulacao de strings com stringr.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar"
  }
}</script>

<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Transformação e Manipulação de Dados com a linguagem R</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="http://github.com/scopinho/Livro_Transform_Dados_R"><i class="bi bi-github" role="img" aria-label="Github">
</i> 
 </a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datas e horas com LUBRIDATE</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Bem-Vindo</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro.html" class="sidebar-item-text sidebar-link">Introdução</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">Parte 1 - Obtendo e Manipulando os Dados</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Importacao/Importacao_de_dados_com_tidyverse.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Importação de Dados com TIDYVERSE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Organizacao/Organizacao_de_dados_com_tidyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Organização de Dados com TIDYR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Transformacao/Transformacao_de_dados_com_dplyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Transformação de Dados com DPLYR</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Parte 2 -Trabalhando com Strings e Datas</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manipulacao_Strings/Manipulacao de strings com stringr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Manipulacao de Strings com STRINGR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../DataHora/Datas_e_horas_com_lubridate.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datas e horas com LUBRIDATE</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Parte 3 - Gráficos</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Visualizacao/Visualizacao_de_dados_com_ggplot2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Visualização de Dados com GGPLOT2</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#introdução" id="toc-introdução" class="nav-link active" data-scroll-target="#introdução"> <span class="header-section-number">5.1</span> Introdução</a></li>
  <li><a href="#tipos-de-objetos-de-data-e-hora" id="toc-tipos-de-objetos-de-data-e-hora" class="nav-link" data-scroll-target="#tipos-de-objetos-de-data-e-hora"> <span class="header-section-number">5.2</span> Tipos de objetos de data e hora</a>
  <ul class="collapse">
  <li><a href="#datetime" id="toc-datetime" class="nav-link" data-scroll-target="#datetime"> <span class="header-section-number">5.2.0.1</span> Datetime</a></li>
  <li><a href="#date" id="toc-date" class="nav-link" data-scroll-target="#date"> <span class="header-section-number">5.2.0.2</span> Date</a></li>
  <li><a href="#time" id="toc-time" class="nav-link" data-scroll-target="#time"> <span class="header-section-number">5.2.0.3</span> <strong>Time</strong></a></li>
  <li><a href="#exemplos-da-folha-de-referência" id="toc-exemplos-da-folha-de-referência" class="nav-link" data-scroll-target="#exemplos-da-folha-de-referência"> <span class="header-section-number">5.2.1</span> Exemplos da Folha de Referência</a></li>
  </ul></li>
  <li><a href="#validando-data-e-hora" id="toc-validando-data-e-hora" class="nav-link" data-scroll-target="#validando-data-e-hora"> <span class="header-section-number">5.3</span> Validando Data e Hora</a>
  <ul class="collapse">
  <li><a href="#outras-funções-úteis" id="toc-outras-funções-úteis" class="nav-link" data-scroll-target="#outras-funções-úteis"> <span class="header-section-number">5.3.1</span> Outras funções úteis</a>
  <ul class="collapse">
  <li><a href="#date_decimal" id="toc-date_decimal" class="nav-link" data-scroll-target="#date_decimal"> <span class="header-section-number">5.3.1.1</span> date_decimal</a></li>
  <li><a href="#now" id="toc-now" class="nav-link" data-scroll-target="#now"> <span class="header-section-number">5.3.1.2</span> now</a></li>
  <li><a href="#today" id="toc-today" class="nav-link" data-scroll-target="#today"> <span class="header-section-number">5.3.1.3</span> today</a></li>
  <li><a href="#fast_strptime" id="toc-fast_strptime" class="nav-link" data-scroll-target="#fast_strptime"> <span class="header-section-number">5.3.1.4</span> fast_strptime</a></li>
  <li><a href="#parse_date_time" id="toc-parse_date_time" class="nav-link" data-scroll-target="#parse_date_time"> <span class="header-section-number">5.3.1.5</span> parse_date_time</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#obtendo-e-definindo-componentes-de-data-e-hora" id="toc-obtendo-e-definindo-componentes-de-data-e-hora" class="nav-link" data-scroll-target="#obtendo-e-definindo-componentes-de-data-e-hora"> <span class="header-section-number">5.4</span> Obtendo e Definindo Componentes de Data e Hora</a></li>
  <li><a href="#arredondando-data-e-hora" id="toc-arredondando-data-e-hora" class="nav-link" data-scroll-target="#arredondando-data-e-hora"> <span class="header-section-number">5.5</span> Arredondando Data e Hora</a>
  <ul class="collapse">
  <li><a href="#floor_date" id="toc-floor_date" class="nav-link" data-scroll-target="#floor_date"> <span class="header-section-number">5.5.0.1</span> floor_date</a></li>
  <li><a href="#ceiling_date" id="toc-ceiling_date" class="nav-link" data-scroll-target="#ceiling_date"> <span class="header-section-number">5.5.0.2</span> ceiling_date</a></li>
  </ul></li>
  <li><a href="#imprimindo-data-e-hora" id="toc-imprimindo-data-e-hora" class="nav-link" data-scroll-target="#imprimindo-data-e-hora"> <span class="header-section-number">5.6</span> Imprimindo data e hora</a>
  <ul class="collapse">
  <li><a href="#stamp" id="toc-stamp" class="nav-link" data-scroll-target="#stamp"> <span class="header-section-number">5.6.0.1</span> stamp</a></li>
  </ul></li>
  <li><a href="#fuso-horários" id="toc-fuso-horários" class="nav-link" data-scroll-target="#fuso-horários"> <span class="header-section-number">5.7</span> Fuso-Horários</a>
  <ul class="collapse">
  <li><a href="#sys.timezone" id="toc-sys.timezone" class="nav-link" data-scroll-target="#sys.timezone"> <span class="header-section-number">5.7.0.1</span> Sys.timezone</a></li>
  <li><a href="#with_tz" id="toc-with_tz" class="nav-link" data-scroll-target="#with_tz"> <span class="header-section-number">5.7.0.2</span> with_tz</a></li>
  <li><a href="#local_time" id="toc-local_time" class="nav-link" data-scroll-target="#local_time"> <span class="header-section-number">5.7.0.3</span> local_time</a></li>
  <li><a href="#force_tz" id="toc-force_tz" class="nav-link" data-scroll-target="#force_tz"> <span class="header-section-number">5.7.0.4</span> force_tz</a></li>
  </ul></li>
  <li><a href="#matemática-com-data-e-hora" id="toc-matemática-com-data-e-hora" class="nav-link" data-scroll-target="#matemática-com-data-e-hora"> <span class="header-section-number">5.8</span> Matemática com Data e Hora</a>
  <ul class="collapse">
  <li><a href="#introdução-1" id="toc-introdução-1" class="nav-link" data-scroll-target="#introdução-1"> <span class="header-section-number">5.8.1</span> Introdução</a></li>
  <li><a href="#períodos" id="toc-períodos" class="nav-link" data-scroll-target="#períodos"> <span class="header-section-number">5.8.2</span> <strong>Períodos</strong></a>
  <ul class="collapse">
  <li><a href="#period" id="toc-period" class="nav-link" data-scroll-target="#period"> <span class="header-section-number">5.8.2.1</span> period</a></li>
  <li><a href="#as.period" id="toc-as.period" class="nav-link" data-scroll-target="#as.period"> <span class="header-section-number">5.8.2.2</span> as.period</a></li>
  <li><a href="#period_to_seconds" id="toc-period_to_seconds" class="nav-link" data-scroll-target="#period_to_seconds"> <span class="header-section-number">5.8.2.3</span> period_to_seconds</a></li>
  </ul></li>
  <li><a href="#duração" id="toc-duração" class="nav-link" data-scroll-target="#duração"> <span class="header-section-number">5.8.3</span> <strong>Duração</strong></a>
  <ul class="collapse">
  <li><a href="#duration" id="toc-duration" class="nav-link" data-scroll-target="#duration"> <span class="header-section-number">5.8.3.1</span> duration</a></li>
  <li><a href="#as.duration" id="toc-as.duration" class="nav-link" data-scroll-target="#as.duration"> <span class="header-section-number">5.8.3.2</span> as.duration</a></li>
  <li><a href="#make_difftime" id="toc-make_difftime" class="nav-link" data-scroll-target="#make_difftime"> <span class="header-section-number">5.8.3.3</span> make_difftime</a></li>
  </ul></li>
  <li><a href="#intervalo" id="toc-intervalo" class="nav-link" data-scroll-target="#intervalo"> <span class="header-section-number">5.8.4</span> <strong>Intervalo</strong></a>
  <ul class="collapse">
  <li><a href="#within" id="toc-within" class="nav-link" data-scroll-target="#within"> <span class="header-section-number">5.8.4.1</span> %within%</a></li>
  <li><a href="#int_start" id="toc-int_start" class="nav-link" data-scroll-target="#int_start"> <span class="header-section-number">5.8.4.2</span> int_start</a></li>
  <li><a href="#int_diff" id="toc-int_diff" class="nav-link" data-scroll-target="#int_diff"> <span class="header-section-number">5.8.4.3</span> int_diff</a></li>
  <li><a href="#int_length" id="toc-int_length" class="nav-link" data-scroll-target="#int_length"> <span class="header-section-number">5.8.4.4</span> int_length</a></li>
  <li><a href="#int_shift" id="toc-int_shift" class="nav-link" data-scroll-target="#int_shift"> <span class="header-section-number">5.8.4.5</span> int_shift</a></li>
  <li><a href="#as.interval" id="toc-as.interval" class="nav-link" data-scroll-target="#as.interval"> <span class="header-section-number">5.8.4.6</span> as.interval</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#datas-imaginárias" id="toc-datas-imaginárias" class="nav-link" data-scroll-target="#datas-imaginárias"> <span class="header-section-number">5.9</span> Datas Imaginárias</a>
  <ul class="collapse">
  <li><a href="#aritmética-dos-meses" id="toc-aritmética-dos-meses" class="nav-link" data-scroll-target="#aritmética-dos-meses"> <span class="header-section-number">5.9.1</span> Aritmética dos meses</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datas e horas com LUBRIDATE</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="introdução" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="introdução"><span class="header-section-number">5.1</span> Introdução</h2>
<p>A seguir temos vários exemplos de manipulação de <strong>variáveis</strong> <strong>data e hora</strong> utilizando o pacote LUBRIDATE do R. Para saber mais sobre este pacote, acesse:</p>
<p><a href="https://cran.r-project.org/package=lubridate" class="uri">https://cran.r-project.org/package=lubridate</a>.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Aviso
</div>
</div>
<div class="callout-body-container callout-body">
<p>Para melhor utilizar este material, é importante que você tenha uma introdução à linguagem R e saiba carregar pacotes (packages) no R. Para mais informações acesse:</p>
<p><a href="https://education.rstudio.com/learn/beginner/" class="uri">https://education.rstudio.com/learn/beginner/</a>.</p>
</div>
</div>
<p>Para os exemplos, iremos carregar os seguintes pacotes:</p>
<ul>
<li><p><strong>tidyverse</strong></p></li>
<li><p><strong>gt</strong></p></li>
<li><p><strong>lubridate</strong></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (gt)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (lubridate)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tipos-de-objetos-de-data-e-hora" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="tipos-de-objetos-de-data-e-hora"><span class="header-section-number">5.2</span> Tipos de objetos de data e hora</h2>
<section id="datetime" class="level4" data-number="5.2.0.1">
<h4 data-number="5.2.0.1" class="anchored" data-anchor-id="datetime"><span class="header-section-number">5.2.0.1</span> Datetime</h4>
<p>Uma variável do tipo “<strong>datetime</strong>” (<em>data e hora</em>) representa um ponto na linha do tempo armazenado em um número que representa o número de <strong>segundos</strong> desde <strong>01-01-1970 00:00:00 (UTC)</strong>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Universal Time Coordinated (<strong>UTC</strong>), é uma escala coordenada de tempo, mantida pelo “Bureau International des Poids et Mesures (BIPM)”. Até 1972, era chamado de (<strong>GTM</strong> ou <em>Greenwich Mean Time</em>). É também conhecida como “Z time” ou “Zulu Time”.</p>
</div>
</div>
</section>
<section id="date" class="level4" data-number="5.2.0.2">
<h4 data-number="5.2.0.2" class="anchored" data-anchor-id="date"><span class="header-section-number">5.2.0.2</span> Date</h4>
<p>Quando nos referimos à uma variável “<strong>date</strong>”(<em>data</em>), significa que ela armazena um número inteiro que representa o número de <strong>dias</strong> <strong>desde 01-01-1970.</strong></p>
</section>
<section id="time" class="level4" data-number="5.2.0.3">
<h4 data-number="5.2.0.3" class="anchored" data-anchor-id="time"><span class="header-section-number">5.2.0.3</span> <strong>Time</strong></h4>
<p>Quando nos referimos à uma variável “<strong>time</strong>” (tempo em segundos), ela armazena um número inteiro que representa o número de <strong>segundos</strong> <strong>desde às</strong> <strong>00:00:00</strong> (hms).</p>
<p>Para os vários exemplos a seguir, utilizaremos os seguintes objetos data e hora:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span>  <span class="fu">as_datetime</span>(<span class="dv">1511870400</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="dv">17498</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span>hms<span class="sc">::</span><span class="fu">as_hms</span>(<span class="dv">85</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>dt; d; t</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28 12:00:00 UTC"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>00:01:25</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Dica
</div>
</div>
<div class="callout-body-container callout-body">
<p>Os objetos gerados pela maioria das funções do lubridate usam os padrões POSIXct, POSIXlt, Date, Period ou objetos que podem ser convertidos para o POSIXlt. Para maiores informações sobre estas classes, digite:</p>
<p>?DateTimeClasses</p>
<p>POSIXct: armazena segundos desde 01-01-1970 00:00:00 (Unix epoch) POSIXlt: armazena uma lista de dia, mês, ano, hora, min, segundos, etc.</p>
</div>
</div>
</section>
<section id="exemplos-da-folha-de-referência" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="exemplos-da-folha-de-referência"><span class="header-section-number">5.2.1</span> Exemplos da Folha de Referência</h3>
<p>A maioria dos exemplos, visam ajudar na interpretação dos exemplos e funções encontradas na <a href="https://github.com/scopinho/R-cheatsheets/blob/main/translations/portuguese/lubridate_pt_br.pdf"><strong>Folha de Referência</strong></a> do lubridate disponível no site do <a href="rstudio.com">RStudio</a>.</p>
<hr>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Em geral, ao final de cada comando, as vezes você verá a chamada à função <strong>gt()</strong>. Isto é apenas para a formatação da tabela de saída e não é necessário para que você entenda os comandos precedentes. Em alguns casos, onde o volume de dados de saída pode ser extenso, usamos também a função <strong>head()</strong> para mostrar apenas as linhas iniciais. Quando o exemplo possui muitas colunas de saída, eventualmente utilizamos a função <strong>select()</strong> para selecionar apenas algumas colunas.</em></p>
<p>Em alguns casos usaremos funções de manipulação de dados do pacote <strong>dplyr,</strong> como <strong>mutate</strong> () ou <strong>count</strong>()<strong>.</strong></p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>O termo <u>data-frame</u> descrito ao longo deste texto, é utilizado de forma livre para objetos do tipo data.frame, tibble, entre outros. Pense como se fosse uma tabela de um banco de dados e/ou uma planilha do MS Excel, contendo linhas e colunas. Apesar de não ser rigorosamente igual à uma tabela, muitas vezes usaremos estes termos de forma intercambiável para facilitar o entendimento de iniciantes.</em></p>
</div>
</div>
</section>
</section>
<section id="validando-data-e-hora" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="validando-data-e-hora"><span class="header-section-number">5.3</span> Validando Data e Hora</h2>
<p>O pacote lubridate possui uma série de funções para obter e definir os elementos de ano, mês, dia, hora, minuto e segundos de um objeto data e hora.</p>
<p>Use as funções a seguir servem para identificar estes elementos em seus dados a partir de uma string. Cada uma delas aceita o argumento “tz” para definir o fuso-horário (<em>timezone</em>), se este não for definido, UTC é utilizado.</p>
<p>Estas funções são nomeadas conforme a tabela abaixo e sua ordem obedece tal nomenclatura:</p>
<table class="table">
<thead>
<tr class="header">
<th>Elemento</th>
<th>Letra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>y</td>
<td>ano (<em>year</em>)</td>
</tr>
<tr class="even">
<td>m</td>
<td>mês (<em>month</em>)</td>
</tr>
<tr class="odd">
<td>d</td>
<td>dia (<em>day</em>)</td>
</tr>
<tr class="even">
<td>h</td>
<td>hora (<em>hour</em>)</td>
</tr>
<tr class="odd">
<td>m</td>
<td>minuto (<em>minute</em>)</td>
</tr>
<tr class="even">
<td>s</td>
<td>segundos (<em>seconds</em>)</td>
</tr>
</tbody>
</table>
<p>Por exemplo, para criar um objeto <strong>datetime</strong> passando a string “<strong>2017-11-28T14:02:00</strong>”, utilzamos a função <strong>ymd_hms</strong>(). Isto porque ao montar a string de data e hora, colocamos como ordem o ano, mês, dia, hora, minuto e segundo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd_hms</span>(<span class="st">"2017-11-28T14:02:00"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28 14:02:00 UTC"</code></pre>
</div>
</div>
<p>Se passarmos a string trocando o ano pela dia, devemos usar a função dmy_hms():</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy_hms</span>(<span class="st">"28-11-2017T14:02:00"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28 14:02:00 UTC"</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Veja que tanto a função ymd_hms() quanto a dmy_hms(), geraram o mesmo objeto datetime. Se quisermos obter o valor inteiro que representa este objeto desde 01-01-1970 00:00:00, podemos usar a função <strong>decimal_date</strong>()</p>
</div>
</div>
<p>Veja o código abaixo com mais alguns exemplos das funções validando os elementos da string passada para a função:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ymd_hms(), ymd_hm(), ymd_h().</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd_hms</span>(<span class="st">"2017-11-28T14:02:00"</span>) <span class="sc">|&gt;</span> <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28 14:02:00 UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ydm_hms(), ydm_hm(), ydm_h().</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ydm_hms</span>(<span class="st">"2017-22-12 10:00:00"</span>) <span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-12-22 10:00:00 UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mdy_hms(), mdy_hm(), mdy_h(). </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy_hms</span>(<span class="st">"11/28/2017 1:02:03"</span>) <span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28 01:02:03 UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dmy_hms(), dmy_hm(), dmy_h().</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy_hms</span>(<span class="st">"1 Jan 2017 23:59:59"</span>)<span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-01-01 23:59:59 UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ymd(), ydm(). </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="dv">20170131</span>)<span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-01-31"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mdy(), myd(). </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy</span>(<span class="st">"July 4th, 2000"</span>)<span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2000-07-04"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dmy(), dym(). </span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">"4th of July '99"</span>)<span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1999-07-04"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># yq() Q para quartil. </span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">yq</span>(<span class="st">"2001: Q3"</span>)<span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2001-07-01"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># my(), ym(). </span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">my</span>(<span class="st">"07-2020"</span>)<span class="sc">|&gt;</span>  <span class="fu">print</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2020-07-01"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#hms::hms() ou lubridate::hms(), ms() ou hm() para períodos.</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>hms<span class="sc">::</span><span class="fu">hms</span>(<span class="at">sec =</span> <span class="dv">0</span>, <span class="at">min =</span> <span class="dv">1</span>, <span class="at">hours =</span> <span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>02:01:00</code></pre>
</div>
</div>
<section id="outras-funções-úteis" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="outras-funções-úteis"><span class="header-section-number">5.3.1</span> Outras funções úteis</h3>
<section id="date_decimal" class="level4" data-number="5.3.1.1">
<h4 data-number="5.3.1.1" class="anchored" data-anchor-id="date_decimal"><span class="header-section-number">5.3.1.1</span> date_decimal</h4>
<p>Use para converter um número decimala para data e hora:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">date_decimal</span>(<span class="fl">2017.5</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-07-02 12:00:00 UTC"</code></pre>
</div>
</div>
</section>
<section id="now" class="level4" data-number="5.3.1.2">
<h4 data-number="5.3.1.2" class="anchored" data-anchor-id="now"><span class="header-section-number">5.3.1.2</span> now</h4>
<p>Use para obter um objeto data e hora do instante:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>(<span class="at">tzone =</span> <span class="st">"America/Sao_Paulo"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022-09-01 11:14:37 -03"</code></pre>
</div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Importante
</div>
</div>
<div class="callout-body-container callout-body">
<p>Se o fuso-horário (tzone =) não for informado, a função utilizará aquele utilzado pelo sitema operacional em execução.</p>
</div>
</div>
</section>
<section id="today" class="level4" data-number="5.3.1.3">
<h4 data-number="5.3.1.3" class="anchored" data-anchor-id="today"><span class="header-section-number">5.3.1.3</span> today</h4>
<p>Use para obter a data atual.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">today</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022-09-01"</code></pre>
</div>
</div>
</section>
<section id="fast_strptime" class="level4" data-number="5.3.1.4">
<h4 data-number="5.3.1.4" class="anchored" data-anchor-id="fast_strptime"><span class="header-section-number">5.3.1.4</span> fast_strptime</h4>
<p>Use para converter vetores de caracteres para objetos data e hora (POSIXlt) de forma rápida.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fast_strptime</span>(<span class="st">'9/1/01'</span>, <span class="st">'%y/%m/%d'</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2009-01-01 UTC"</code></pre>
</div>
</div>
</section>
<section id="parse_date_time" class="level4" data-number="5.3.1.5">
<h4 data-number="5.3.1.5" class="anchored" data-anchor-id="parse_date_time"><span class="header-section-number">5.3.1.5</span> parse_date_time</h4>
<p>Use para converter vetores de caracteres para objetos data e hora (POSIXct) de forma mais simplificada.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_date_time</span>(<span class="st">"19/1/1"</span>, <span class="st">"ymd"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2019-01-01 UTC"</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="obtendo-e-definindo-componentes-de-data-e-hora" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="obtendo-e-definindo-componentes-de-data-e-hora"><span class="header-section-number">5.4</span> Obtendo e Definindo Componentes de Data e Hora</h2>
<p>Use as funções abaixo para obter um componente de um objeto data e hora.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o "DIA" de um objeto "datetime"</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter a "DATA"</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter a "ANO".</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Para obter o "ANO ISO 8610 use isoyear()</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Para obter o "ANO Epidemiológico use epiyear()</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2017</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o "MÊS". </span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use argumentos label= e addr= para obter o nome ou abreviação do mês.</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o "DIA DA SEMANA".</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use argumentos label= e addr= para obter o nome ou abreviação do dia.</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(dt, <span class="at">label =</span> <span class="cn">TRUE</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ter
Levels: dom &lt; seg &lt; ter &lt; qua &lt; qui &lt; sex &lt; sáb</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o "DIA DO TRIMESTRE".</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qday</span>(dt) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter a HORA". </span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hour</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter os "MINUTOS". </span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">minute</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter os "SEGUNDOS". </span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">second</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o "FUSO-HORÁRIO. </span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tz</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter a "SEMANA DO ANO". </span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 48</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ara obter a "SEMANA DO ANO" ISO 8160 use isoyear()</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Para obter a "SEMANA DO ANO" Epidemiológico use epiyear()</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o "TRIMESTRE". </span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu">quarter</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o "SEMESTRE". </span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">semester</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saber se é "MANHÃ (am). </span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">am</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saber se é "TARDE" (pm).</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pm</span>(dt)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saber se é "HORÁRIO DE VERÃO" </span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dst</span>(d)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saber se é "ANO BISEXTO"</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">leap_year</span>(d)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Para definir um componente de um objeto, podemos utilzar as funções acima, porém com o sinal de atribuição.</p>
<p>Por exemplo, para alterar o dia de “28” do objeto “d”, para dia “1”, podemos fazer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(d) <span class="sc">|&gt;</span>  <span class="fu">print</span>() </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(d) <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(d) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-01"</code></pre>
</div>
</div>
<p>Podemos também atualizar um componente do objeto data e hora:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Atualizar um componente do objeto</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span>(dt, <span class="at">mday =</span> <span class="dv">2</span>, <span class="at">hour =</span> <span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-02 01:00:00 UTC"</code></pre>
</div>
</div>
<p>O exemplo acima, altera o dia do mês para 2 e a hora para 01.</p>
</section>
<section id="arredondando-data-e-hora" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="arredondando-data-e-hora"><span class="header-section-number">5.5</span> Arredondando Data e Hora</h2>
<p>Use as funções a seguir para “arredondar” ou aproximar um objeto data e hora para unidades de ajuste. As unidades válidas são:</p>
<ul>
<li><em>second, minute, hour, day, week, month, bimonth, quarter, season, halfyear e year.</em></li>
</ul>
<section id="floor_date" class="level4" data-number="5.5.0.1">
<h4 data-number="5.5.0.1" class="anchored" data-anchor-id="floor_date"><span class="header-section-number">5.5.0.1</span> floor_date</h4>
<p>Use para “<strong>arredondar para baixo</strong>” a data e hora para a unidade mais próxima.</p>
<p>Por exemplo, digamos que temos um objeto data = “2017-11-28” e queremos arredondar para baixo, sendo que a unidade é mês, ou seja, arredondar para o início do mês:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor_date</span>(dt, <span class="at">unit=</span><span class="st">"month"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-01 UTC"</code></pre>
</div>
</div>
<p>round_date</p>
<p>Use para “<strong>arredondar</strong>” a data para a unidade mais próxima.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round_date</span>(dt, <span class="at">unit=</span><span class="st">"month"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-12-01 UTC"</code></pre>
</div>
</div>
<p>Veja que no exemplo acima, como tínhamos dia 28/11 e pedimos para arredondar na unidade “month”, ele arredondou para o mês 01/12.</p>
<p>Se o dia fosse 14/11, a função arredondaria para 01/11.</p>
</section>
<section id="ceiling_date" class="level4" data-number="5.5.0.2">
<h4 data-number="5.5.0.2" class="anchored" data-anchor-id="ceiling_date"><span class="header-section-number">5.5.0.2</span> ceiling_date</h4>
<p>Use para “<strong>arredondar para cima</strong>” a data e hora para a unidade mais próxima.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling_date</span>(dt, <span class="at">unit=</span><span class="st">"month"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-12-01 UTC"</code></pre>
</div>
</div>
</section>
</section>
<section id="imprimindo-data-e-hora" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="imprimindo-data-e-hora"><span class="header-section-number">5.6</span> Imprimindo data e hora</h2>
<p>Em alguns casos, desejamos imprimir um objeto data e hora de uma maneira específica e/ou mais amigável. O pacote lubridate tem a capacidade de utilizar “templates” e ainda permite modificá-los para customizar como a impressão do objeto será feita.</p>
<section id="stamp" class="level4" data-number="5.6.0.1">
<h4 data-number="5.6.0.1" class="anchored" data-anchor-id="stamp"><span class="header-section-number">5.6.0.1</span> stamp</h4>
<p>Use para criar um “template” mais amigável à partir de uma string de exemplo. Veja também as função stamp_date() e stamp_time() que são funções específicas para lidar com datas e horas respectivamente.</p>
<p>Em geral criamos uma função que utiliza a função stamp() e depois a utilizamos em nosso script passando o objeto data e hora. Veja este exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>sf <span class="ot">&lt;-</span> <span class="fu">stamp</span>(<span class="st">"Criado terça-feira, 17 de janeiro de 2022 às 3:34"</span>) </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sf</span>(<span class="fu">ymd</span>(<span class="st">"2020-04-05"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Criado domingo-feira, 05 de abril de 2020 às 00:00"</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Dica
</div>
</div>
<div class="callout-body-container callout-body">
<p>Procure usar o <strong>dia maior que 12</strong> na hora de criar o template. Isto facilita para função distinguir que parte do template é o mês e qual parte é o dia.</p>
</div>
</div>
</section>
</section>
<section id="fuso-horários" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="fuso-horários"><span class="header-section-number">5.7</span> Fuso-Horários</h2>
<p>O R reconhece ~600 fuso-horários. Cada um deles, tem iformações sobre o fuso-horário, horário de verão e variações de calendário históricas de uma área. O R define apenas um fuso-horário por vetor.</p>
<p>Use o fuso-horário “UTC” para evitar horários-de-verão nos objetos.</p>
<p>Para obter uma lista dos fuso-horários disponíveis, use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OlsonNames</span>() <span class="sc">|&gt;</span> </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["value"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa/Abidjan"},{"1":"Africa/Accra"},{"1":"Africa/Addis_Ababa"},{"1":"Africa/Algiers"},{"1":"Africa/Asmara"},{"1":"Africa/Asmera"},{"1":"Africa/Bamako"},{"1":"Africa/Bangui"},{"1":"Africa/Banjul"},{"1":"Africa/Bissau"},{"1":"Africa/Blantyre"},{"1":"Africa/Brazzaville"},{"1":"Africa/Bujumbura"},{"1":"Africa/Cairo"},{"1":"Africa/Casablanca"},{"1":"Africa/Ceuta"},{"1":"Africa/Conakry"},{"1":"Africa/Dakar"},{"1":"Africa/Dar_es_Salaam"},{"1":"Africa/Djibouti"},{"1":"Africa/Douala"},{"1":"Africa/El_Aaiun"},{"1":"Africa/Freetown"},{"1":"Africa/Gaborone"},{"1":"Africa/Harare"},{"1":"Africa/Johannesburg"},{"1":"Africa/Juba"},{"1":"Africa/Kampala"},{"1":"Africa/Khartoum"},{"1":"Africa/Kigali"},{"1":"Africa/Kinshasa"},{"1":"Africa/Lagos"},{"1":"Africa/Libreville"},{"1":"Africa/Lome"},{"1":"Africa/Luanda"},{"1":"Africa/Lubumbashi"},{"1":"Africa/Lusaka"},{"1":"Africa/Malabo"},{"1":"Africa/Maputo"},{"1":"Africa/Maseru"},{"1":"Africa/Mbabane"},{"1":"Africa/Mogadishu"},{"1":"Africa/Monrovia"},{"1":"Africa/Nairobi"},{"1":"Africa/Ndjamena"},{"1":"Africa/Niamey"},{"1":"Africa/Nouakchott"},{"1":"Africa/Ouagadougou"},{"1":"Africa/Porto-Novo"},{"1":"Africa/Sao_Tome"},{"1":"Africa/Timbuktu"},{"1":"Africa/Tripoli"},{"1":"Africa/Tunis"},{"1":"Africa/Windhoek"},{"1":"America/Adak"},{"1":"America/Anchorage"},{"1":"America/Anguilla"},{"1":"America/Antigua"},{"1":"America/Araguaina"},{"1":"America/Argentina/Buenos_Aires"},{"1":"America/Argentina/Catamarca"},{"1":"America/Argentina/ComodRivadavia"},{"1":"America/Argentina/Cordoba"},{"1":"America/Argentina/Jujuy"},{"1":"America/Argentina/La_Rioja"},{"1":"America/Argentina/Mendoza"},{"1":"America/Argentina/Rio_Gallegos"},{"1":"America/Argentina/Salta"},{"1":"America/Argentina/San_Juan"},{"1":"America/Argentina/San_Luis"},{"1":"America/Argentina/Tucuman"},{"1":"America/Argentina/Ushuaia"},{"1":"America/Aruba"},{"1":"America/Asuncion"},{"1":"America/Atikokan"},{"1":"America/Atka"},{"1":"America/Bahia"},{"1":"America/Bahia_Banderas"},{"1":"America/Barbados"},{"1":"America/Belem"},{"1":"America/Belize"},{"1":"America/Blanc-Sablon"},{"1":"America/Boa_Vista"},{"1":"America/Bogota"},{"1":"America/Boise"},{"1":"America/Buenos_Aires"},{"1":"America/Cambridge_Bay"},{"1":"America/Campo_Grande"},{"1":"America/Cancun"},{"1":"America/Caracas"},{"1":"America/Catamarca"},{"1":"America/Cayenne"},{"1":"America/Cayman"},{"1":"America/Chicago"},{"1":"America/Chihuahua"},{"1":"America/Coral_Harbour"},{"1":"America/Cordoba"},{"1":"America/Costa_Rica"},{"1":"America/Creston"},{"1":"America/Cuiaba"},{"1":"America/Curacao"},{"1":"America/Danmarkshavn"},{"1":"America/Dawson"},{"1":"America/Dawson_Creek"},{"1":"America/Denver"},{"1":"America/Detroit"},{"1":"America/Dominica"},{"1":"America/Edmonton"},{"1":"America/Eirunepe"},{"1":"America/El_Salvador"},{"1":"America/Ensenada"},{"1":"America/Fort_Nelson"},{"1":"America/Fort_Wayne"},{"1":"America/Fortaleza"},{"1":"America/Glace_Bay"},{"1":"America/Godthab"},{"1":"America/Goose_Bay"},{"1":"America/Grand_Turk"},{"1":"America/Grenada"},{"1":"America/Guadeloupe"},{"1":"America/Guatemala"},{"1":"America/Guayaquil"},{"1":"America/Guyana"},{"1":"America/Halifax"},{"1":"America/Havana"},{"1":"America/Hermosillo"},{"1":"America/Indiana/Indianapolis"},{"1":"America/Indiana/Knox"},{"1":"America/Indiana/Marengo"},{"1":"America/Indiana/Petersburg"},{"1":"America/Indiana/Tell_City"},{"1":"America/Indiana/Vevay"},{"1":"America/Indiana/Vincennes"},{"1":"America/Indiana/Winamac"},{"1":"America/Indianapolis"},{"1":"America/Inuvik"},{"1":"America/Iqaluit"},{"1":"America/Jamaica"},{"1":"America/Jujuy"},{"1":"America/Juneau"},{"1":"America/Kentucky/Louisville"},{"1":"America/Kentucky/Monticello"},{"1":"America/Knox_IN"},{"1":"America/Kralendijk"},{"1":"America/La_Paz"},{"1":"America/Lima"},{"1":"America/Los_Angeles"},{"1":"America/Louisville"},{"1":"America/Lower_Princes"},{"1":"America/Maceio"},{"1":"America/Managua"},{"1":"America/Manaus"},{"1":"America/Marigot"},{"1":"America/Martinique"},{"1":"America/Matamoros"},{"1":"America/Mazatlan"},{"1":"America/Mendoza"},{"1":"America/Menominee"},{"1":"America/Merida"},{"1":"America/Metlakatla"},{"1":"America/Mexico_City"},{"1":"America/Miquelon"},{"1":"America/Moncton"},{"1":"America/Monterrey"},{"1":"America/Montevideo"},{"1":"America/Montreal"},{"1":"America/Montserrat"},{"1":"America/Nassau"},{"1":"America/New_York"},{"1":"America/Nipigon"},{"1":"America/Nome"},{"1":"America/Noronha"},{"1":"America/North_Dakota/Beulah"},{"1":"America/North_Dakota/Center"},{"1":"America/North_Dakota/New_Salem"},{"1":"America/Nuuk"},{"1":"America/Ojinaga"},{"1":"America/Panama"},{"1":"America/Pangnirtung"},{"1":"America/Paramaribo"},{"1":"America/Phoenix"},{"1":"America/Port_of_Spain"},{"1":"America/Port-au-Prince"},{"1":"America/Porto_Acre"},{"1":"America/Porto_Velho"},{"1":"America/Puerto_Rico"},{"1":"America/Punta_Arenas"},{"1":"America/Rainy_River"},{"1":"America/Rankin_Inlet"},{"1":"America/Recife"},{"1":"America/Regina"},{"1":"America/Resolute"},{"1":"America/Rio_Branco"},{"1":"America/Rosario"},{"1":"America/Santa_Isabel"},{"1":"America/Santarem"},{"1":"America/Santiago"},{"1":"America/Santo_Domingo"},{"1":"America/Sao_Paulo"},{"1":"America/Scoresbysund"},{"1":"America/Shiprock"},{"1":"America/Sitka"},{"1":"America/St_Barthelemy"},{"1":"America/St_Johns"},{"1":"America/St_Kitts"},{"1":"America/St_Lucia"},{"1":"America/St_Thomas"},{"1":"America/St_Vincent"},{"1":"America/Swift_Current"},{"1":"America/Tegucigalpa"},{"1":"America/Thule"},{"1":"America/Thunder_Bay"},{"1":"America/Tijuana"},{"1":"America/Toronto"},{"1":"America/Tortola"},{"1":"America/Vancouver"},{"1":"America/Virgin"},{"1":"America/Whitehorse"},{"1":"America/Winnipeg"},{"1":"America/Yakutat"},{"1":"America/Yellowknife"},{"1":"Antarctica/Casey"},{"1":"Antarctica/Davis"},{"1":"Antarctica/DumontDUrville"},{"1":"Antarctica/Macquarie"},{"1":"Antarctica/Mawson"},{"1":"Antarctica/McMurdo"},{"1":"Antarctica/Palmer"},{"1":"Antarctica/Rothera"},{"1":"Antarctica/South_Pole"},{"1":"Antarctica/Syowa"},{"1":"Antarctica/Troll"},{"1":"Antarctica/Vostok"},{"1":"Arctic/Longyearbyen"},{"1":"Asia/Aden"},{"1":"Asia/Almaty"},{"1":"Asia/Amman"},{"1":"Asia/Anadyr"},{"1":"Asia/Aqtau"},{"1":"Asia/Aqtobe"},{"1":"Asia/Ashgabat"},{"1":"Asia/Ashkhabad"},{"1":"Asia/Atyrau"},{"1":"Asia/Baghdad"},{"1":"Asia/Bahrain"},{"1":"Asia/Baku"},{"1":"Asia/Bangkok"},{"1":"Asia/Barnaul"},{"1":"Asia/Beirut"},{"1":"Asia/Bishkek"},{"1":"Asia/Brunei"},{"1":"Asia/Calcutta"},{"1":"Asia/Chita"},{"1":"Asia/Choibalsan"},{"1":"Asia/Chongqing"},{"1":"Asia/Chungking"},{"1":"Asia/Colombo"},{"1":"Asia/Dacca"},{"1":"Asia/Damascus"},{"1":"Asia/Dhaka"},{"1":"Asia/Dili"},{"1":"Asia/Dubai"},{"1":"Asia/Dushanbe"},{"1":"Asia/Famagusta"},{"1":"Asia/Gaza"},{"1":"Asia/Harbin"},{"1":"Asia/Hebron"},{"1":"Asia/Ho_Chi_Minh"},{"1":"Asia/Hong_Kong"},{"1":"Asia/Hovd"},{"1":"Asia/Irkutsk"},{"1":"Asia/Istanbul"},{"1":"Asia/Jakarta"},{"1":"Asia/Jayapura"},{"1":"Asia/Jerusalem"},{"1":"Asia/Kabul"},{"1":"Asia/Kamchatka"},{"1":"Asia/Karachi"},{"1":"Asia/Kashgar"},{"1":"Asia/Kathmandu"},{"1":"Asia/Katmandu"},{"1":"Asia/Khandyga"},{"1":"Asia/Kolkata"},{"1":"Asia/Krasnoyarsk"},{"1":"Asia/Kuala_Lumpur"},{"1":"Asia/Kuching"},{"1":"Asia/Kuwait"},{"1":"Asia/Macao"},{"1":"Asia/Macau"},{"1":"Asia/Magadan"},{"1":"Asia/Makassar"},{"1":"Asia/Manila"},{"1":"Asia/Muscat"},{"1":"Asia/Nicosia"},{"1":"Asia/Novokuznetsk"},{"1":"Asia/Novosibirsk"},{"1":"Asia/Omsk"},{"1":"Asia/Oral"},{"1":"Asia/Phnom_Penh"},{"1":"Asia/Pontianak"},{"1":"Asia/Pyongyang"},{"1":"Asia/Qatar"},{"1":"Asia/Qostanay"},{"1":"Asia/Qyzylorda"},{"1":"Asia/Rangoon"},{"1":"Asia/Riyadh"},{"1":"Asia/Saigon"},{"1":"Asia/Sakhalin"},{"1":"Asia/Samarkand"},{"1":"Asia/Seoul"},{"1":"Asia/Shanghai"},{"1":"Asia/Singapore"},{"1":"Asia/Srednekolymsk"},{"1":"Asia/Taipei"},{"1":"Asia/Tashkent"},{"1":"Asia/Tbilisi"},{"1":"Asia/Tehran"},{"1":"Asia/Tel_Aviv"},{"1":"Asia/Thimbu"},{"1":"Asia/Thimphu"},{"1":"Asia/Tokyo"},{"1":"Asia/Tomsk"},{"1":"Asia/Ujung_Pandang"},{"1":"Asia/Ulaanbaatar"},{"1":"Asia/Ulan_Bator"},{"1":"Asia/Urumqi"},{"1":"Asia/Ust-Nera"},{"1":"Asia/Vientiane"},{"1":"Asia/Vladivostok"},{"1":"Asia/Yakutsk"},{"1":"Asia/Yangon"},{"1":"Asia/Yekaterinburg"},{"1":"Asia/Yerevan"},{"1":"Atlantic/Azores"},{"1":"Atlantic/Bermuda"},{"1":"Atlantic/Canary"},{"1":"Atlantic/Cape_Verde"},{"1":"Atlantic/Faeroe"},{"1":"Atlantic/Faroe"},{"1":"Atlantic/Jan_Mayen"},{"1":"Atlantic/Madeira"},{"1":"Atlantic/Reykjavik"},{"1":"Atlantic/South_Georgia"},{"1":"Atlantic/St_Helena"},{"1":"Atlantic/Stanley"},{"1":"Australia/ACT"},{"1":"Australia/Adelaide"},{"1":"Australia/Brisbane"},{"1":"Australia/Broken_Hill"},{"1":"Australia/Canberra"},{"1":"Australia/Currie"},{"1":"Australia/Darwin"},{"1":"Australia/Eucla"},{"1":"Australia/Hobart"},{"1":"Australia/LHI"},{"1":"Australia/Lindeman"},{"1":"Australia/Lord_Howe"},{"1":"Australia/Melbourne"},{"1":"Australia/North"},{"1":"Australia/NSW"},{"1":"Australia/Perth"},{"1":"Australia/Queensland"},{"1":"Australia/South"},{"1":"Australia/Sydney"},{"1":"Australia/Tasmania"},{"1":"Australia/Victoria"},{"1":"Australia/West"},{"1":"Australia/Yancowinna"},{"1":"Brazil/Acre"},{"1":"Brazil/DeNoronha"},{"1":"Brazil/East"},{"1":"Brazil/West"},{"1":"Canada/Atlantic"},{"1":"Canada/Central"},{"1":"Canada/Eastern"},{"1":"Canada/Mountain"},{"1":"Canada/Newfoundland"},{"1":"Canada/Pacific"},{"1":"Canada/Saskatchewan"},{"1":"Canada/Yukon"},{"1":"CET"},{"1":"Chile/Continental"},{"1":"Chile/EasterIsland"},{"1":"CST6CDT"},{"1":"Cuba"},{"1":"EET"},{"1":"Egypt"},{"1":"Eire"},{"1":"EST"},{"1":"EST5EDT"},{"1":"Etc/GMT"},{"1":"Etc/GMT-0"},{"1":"Etc/GMT-1"},{"1":"Etc/GMT-10"},{"1":"Etc/GMT-11"},{"1":"Etc/GMT-12"},{"1":"Etc/GMT-13"},{"1":"Etc/GMT-14"},{"1":"Etc/GMT-2"},{"1":"Etc/GMT-3"},{"1":"Etc/GMT-4"},{"1":"Etc/GMT-5"},{"1":"Etc/GMT-6"},{"1":"Etc/GMT-7"},{"1":"Etc/GMT-8"},{"1":"Etc/GMT-9"},{"1":"Etc/GMT+0"},{"1":"Etc/GMT+1"},{"1":"Etc/GMT+10"},{"1":"Etc/GMT+11"},{"1":"Etc/GMT+12"},{"1":"Etc/GMT+2"},{"1":"Etc/GMT+3"},{"1":"Etc/GMT+4"},{"1":"Etc/GMT+5"},{"1":"Etc/GMT+6"},{"1":"Etc/GMT+7"},{"1":"Etc/GMT+8"},{"1":"Etc/GMT+9"},{"1":"Etc/GMT0"},{"1":"Etc/Greenwich"},{"1":"Etc/UCT"},{"1":"Etc/Universal"},{"1":"Etc/UTC"},{"1":"Etc/Zulu"},{"1":"Europe/Amsterdam"},{"1":"Europe/Andorra"},{"1":"Europe/Astrakhan"},{"1":"Europe/Athens"},{"1":"Europe/Belfast"},{"1":"Europe/Belgrade"},{"1":"Europe/Berlin"},{"1":"Europe/Bratislava"},{"1":"Europe/Brussels"},{"1":"Europe/Bucharest"},{"1":"Europe/Budapest"},{"1":"Europe/Busingen"},{"1":"Europe/Chisinau"},{"1":"Europe/Copenhagen"},{"1":"Europe/Dublin"},{"1":"Europe/Gibraltar"},{"1":"Europe/Guernsey"},{"1":"Europe/Helsinki"},{"1":"Europe/Isle_of_Man"},{"1":"Europe/Istanbul"},{"1":"Europe/Jersey"},{"1":"Europe/Kaliningrad"},{"1":"Europe/Kiev"},{"1":"Europe/Kirov"},{"1":"Europe/Lisbon"},{"1":"Europe/Ljubljana"},{"1":"Europe/London"},{"1":"Europe/Luxembourg"},{"1":"Europe/Madrid"},{"1":"Europe/Malta"},{"1":"Europe/Mariehamn"},{"1":"Europe/Minsk"},{"1":"Europe/Monaco"},{"1":"Europe/Moscow"},{"1":"Europe/Nicosia"},{"1":"Europe/Oslo"},{"1":"Europe/Paris"},{"1":"Europe/Podgorica"},{"1":"Europe/Prague"},{"1":"Europe/Riga"},{"1":"Europe/Rome"},{"1":"Europe/Samara"},{"1":"Europe/San_Marino"},{"1":"Europe/Sarajevo"},{"1":"Europe/Saratov"},{"1":"Europe/Simferopol"},{"1":"Europe/Skopje"},{"1":"Europe/Sofia"},{"1":"Europe/Stockholm"},{"1":"Europe/Tallinn"},{"1":"Europe/Tirane"},{"1":"Europe/Tiraspol"},{"1":"Europe/Ulyanovsk"},{"1":"Europe/Uzhgorod"},{"1":"Europe/Vaduz"},{"1":"Europe/Vatican"},{"1":"Europe/Vienna"},{"1":"Europe/Vilnius"},{"1":"Europe/Volgograd"},{"1":"Europe/Warsaw"},{"1":"Europe/Zagreb"},{"1":"Europe/Zaporozhye"},{"1":"Europe/Zurich"},{"1":"Factory"},{"1":"GB"},{"1":"GB-Eire"},{"1":"GMT"},{"1":"GMT-0"},{"1":"GMT+0"},{"1":"GMT0"},{"1":"Greenwich"},{"1":"Hongkong"},{"1":"HST"},{"1":"Iceland"},{"1":"Indian/Antananarivo"},{"1":"Indian/Chagos"},{"1":"Indian/Christmas"},{"1":"Indian/Cocos"},{"1":"Indian/Comoro"},{"1":"Indian/Kerguelen"},{"1":"Indian/Mahe"},{"1":"Indian/Maldives"},{"1":"Indian/Mauritius"},{"1":"Indian/Mayotte"},{"1":"Indian/Reunion"},{"1":"Iran"},{"1":"Israel"},{"1":"Jamaica"},{"1":"Japan"},{"1":"Kwajalein"},{"1":"Libya"},{"1":"MET"},{"1":"Mexico/BajaNorte"},{"1":"Mexico/BajaSur"},{"1":"Mexico/General"},{"1":"MST"},{"1":"MST7MDT"},{"1":"Navajo"},{"1":"NZ"},{"1":"NZ-CHAT"},{"1":"Pacific/Apia"},{"1":"Pacific/Auckland"},{"1":"Pacific/Bougainville"},{"1":"Pacific/Chatham"},{"1":"Pacific/Chuuk"},{"1":"Pacific/Easter"},{"1":"Pacific/Efate"},{"1":"Pacific/Enderbury"},{"1":"Pacific/Fakaofo"},{"1":"Pacific/Fiji"},{"1":"Pacific/Funafuti"},{"1":"Pacific/Galapagos"},{"1":"Pacific/Gambier"},{"1":"Pacific/Guadalcanal"},{"1":"Pacific/Guam"},{"1":"Pacific/Honolulu"},{"1":"Pacific/Johnston"},{"1":"Pacific/Kanton"},{"1":"Pacific/Kiritimati"},{"1":"Pacific/Kosrae"},{"1":"Pacific/Kwajalein"},{"1":"Pacific/Majuro"},{"1":"Pacific/Marquesas"},{"1":"Pacific/Midway"},{"1":"Pacific/Nauru"},{"1":"Pacific/Niue"},{"1":"Pacific/Norfolk"},{"1":"Pacific/Noumea"},{"1":"Pacific/Pago_Pago"},{"1":"Pacific/Palau"},{"1":"Pacific/Pitcairn"},{"1":"Pacific/Pohnpei"},{"1":"Pacific/Ponape"},{"1":"Pacific/Port_Moresby"},{"1":"Pacific/Rarotonga"},{"1":"Pacific/Saipan"},{"1":"Pacific/Samoa"},{"1":"Pacific/Tahiti"},{"1":"Pacific/Tarawa"},{"1":"Pacific/Tongatapu"},{"1":"Pacific/Truk"},{"1":"Pacific/Wake"},{"1":"Pacific/Wallis"},{"1":"Pacific/Yap"},{"1":"Poland"},{"1":"Portugal"},{"1":"PRC"},{"1":"PST8PDT"},{"1":"ROC"},{"1":"ROK"},{"1":"Singapore"},{"1":"Turkey"},{"1":"UCT"},{"1":"Universal"},{"1":"US/Alaska"},{"1":"US/Aleutian"},{"1":"US/Arizona"},{"1":"US/Central"},{"1":"US/East-Indiana"},{"1":"US/Eastern"},{"1":"US/Hawaii"},{"1":"US/Indiana-Starke"},{"1":"US/Michigan"},{"1":"US/Mountain"},{"1":"US/Pacific"},{"1":"US/Samoa"},{"1":"UTC"},{"1":"W-SU"},{"1":"WET"},{"1":"Zulu"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="sys.timezone" class="level4" data-number="5.7.0.1">
<h4 data-number="5.7.0.1" class="anchored" data-anchor-id="sys.timezone"><span class="header-section-number">5.7.0.1</span> Sys.timezone</h4>
<p>Use para obter o fuso-horário atual, use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "America/Sao_Paulo"</code></pre>
</div>
</div>
</section>
<section id="with_tz" class="level4" data-number="5.7.0.2">
<h4 data-number="5.7.0.2" class="anchored" data-anchor-id="with_tz"><span class="header-section-number">5.7.0.2</span> with_tz</h4>
<p>Use para obter <strong>o mesmo objeto</strong> data e hora em um novo fuso-horário (<strong>novo relógio</strong>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with_tz</span>(dt, <span class="at">tzone =</span> <span class="st">"US/Alaska"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28 03:00:00 AKST"</code></pre>
</div>
</div>
</section>
<section id="local_time" class="level4" data-number="5.7.0.3">
<h4 data-number="5.7.0.3" class="anchored" data-anchor-id="local_time"><span class="header-section-number">5.7.0.3</span> local_time</h4>
<p>Para saber a diferença entre fuso-horários, podemos usar a função local_time e definir a unidade. Por exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">local_time</span>(dt, <span class="at">tz =</span> <span class="st">"US/Alaska"</span>, <span class="at">units =</span> <span class="st">"hours"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 3 hours</code></pre>
</div>
</div>
</section>
<section id="force_tz" class="level4" data-number="5.7.0.4">
<h4 data-number="5.7.0.4" class="anchored" data-anchor-id="force_tz"><span class="header-section-number">5.7.0.4</span> force_tz</h4>
<p>Use para obter <strong>o mesmo objeto</strong> data e hora em um novo fuso-horário (<strong>novo data e hora</strong>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">force_tz</span>(dt, <span class="st">"US/Pacific"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-11-28 12:00:00 PST"</code></pre>
</div>
</div>
</section>
</section>
<section id="matemática-com-data-e-hora" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="matemática-com-data-e-hora"><span class="header-section-number">5.8</span> Matemática com Data e Hora</h2>
<section id="introdução-1" class="level3" data-number="5.8.1">
<h3 data-number="5.8.1" class="anchored" data-anchor-id="introdução-1"><span class="header-section-number">5.8.1</span> Introdução</h3>
<p>O pacote lubridate fornece três classes de intervalo de tempo para fazer cálculos com data e hora.</p>
<ul>
<li><p><strong>Períodos</strong>: Acompanham mudanças no horário do relógio, isto ignora irregularidades na “linha do tempo”.</p></li>
<li><p><strong>Durações</strong>: Acompanham a passagem do “tempo físico”, o que diverge do horário do relógio quando irregularidades na “linha do tempo” acontecem.</p></li>
<li><p><strong>Intervalos</strong>: Representam um intervalo específico da “linha do tempo”, limitado pelo início e fim da data e hora.</p></li>
</ul>
<p>Este três formas de enchergam a “linha do tempo” é necessário pois cálculos de data e hora usando a “linha do tempo” são inconsistentes.</p>
<p>Sabemos que nem todos os anos têm 365 dias, com no caso do ano bi-sexto. Ou no caso de minutos de um retorno do horário de verão tem 60 segundos.</p>
<p>Pense nos seguintes cenários:</p>
<p>Se tivermos um dia normal, a “linha do tempo” ficaria algo como:</p>
<p><img src="images/timeline01.png" class="img-fluid"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>nor <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2018-01-01 01:30:00"</span>,<span class="at">tz=</span><span class="st">"US/Eastern"</span>) </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(nor)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-01-01 01:30:00 EST"</code></pre>
</div>
</div>
<p>Já, quando o horário de verão se inicia, termos o seguinte cenário na linha do tempo:</p>
<p><img src="images/timeline02.png" class="img-fluid"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>gap <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2018-03-11 01:30:00"</span>,<span class="at">tz=</span><span class="st">"US/Eastern"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quando o horário então se encerra, temos na linha do tempo este cenário:</p>
<p><img src="images/timeline03.png" class="img-fluid"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>lap <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2018-11-04 00:30:00"</span>,<span class="at">tz=</span><span class="st">"US/Eastern"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E ainda temos o “ano-bisexto”, que também causa inconsistência na linha do tempo:</p>
<p><img src="images/timeline04.png" class="img-fluid"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>leap <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2019-03-01"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para os casos acima, criamos quarto objetos data e hora: <strong>nor</strong>, <strong>gap</strong>, <strong>lap</strong> e <strong>leap</strong> para representar cada cenário de inconsistência na linha do tempo.</p>
<p>Agora veremos com as três classes do lubridate citadas anteriormente reagem em cada situação:</p>
</section>
<section id="períodos" class="level3" data-number="5.8.2">
<h3 data-number="5.8.2" class="anchored" data-anchor-id="períodos"><span class="header-section-number">5.8.2</span> <strong>Períodos</strong></h3>
<p>Vimos que os períodos acompanham as mudanças no horário do relógio, isto ignora irregularidades na “linha do tempo”.</p>
<p>Por exemplo, se quisermos adicionar 90 minutos ao objeto nor criado anteriormente, teremos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>nor <span class="sc">+</span> <span class="fu">minutes</span>(<span class="dv">90</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-01-01 03:00:00 EST"</code></pre>
</div>
</div>
<p><img src="images/period01.png" class="img-fluid"></p>
<p>Já, se quisermos adicionar 90 minutos no dia do início do horário de verão (objeto gap), teremos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>gap <span class="sc">+</span> <span class="fu">minutes</span>(<span class="dv">90</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-03-11 03:00:00 EDT"</code></pre>
</div>
</div>
<p><img src="images/period02.png" class="img-fluid"></p>
<p>Veja que o período ignorou a inconsistência na linha do linha e trouxe o resultado como ela não existisse.</p>
<p>O mesmo aconteceria com a data e hora do objeto lap criado no fim do horário de verão:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>lap <span class="sc">+</span> <span class="fu">minutes</span>(<span class="dv">90</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-11-04 02:00:00 EST"</code></pre>
</div>
</div>
<p><img src="images/period03.png" class="img-fluid"></p>
<p>Situação identica aconteceria para o objeto leap criado em ano bisexto. Por exemplo, digamos que queremos somar um período de 1 ano.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>leap <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2020-03-01"</code></pre>
</div>
</div>
<p><img src="images/period04.png" class="img-fluid"></p>
<p>As funções de períodos para adicionar ou subtrair data e hora, tem o nome da unidade seguido de um “s”. Nos exemplos anterior somamos minutos usando minutes() e anos usando years().</p>
<p>A lista abaixo traz as funções que criam objetos períodos, ou sejam, que modelam eventos que acontecem em horário específico do relógio.</p>
<p>Podemos utilzar estes objetos para somar ou subtrair de objetos data ae hora.</p>
<table class="table">
<thead>
<tr class="header">
<th>Função</th>
<th>Objeto Período</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>years(x = 1)</td>
<td>x anos</td>
</tr>
<tr class="even">
<td>months(x)</td>
<td>x meses</td>
</tr>
<tr class="odd">
<td>weeks(x = 1)</td>
<td>x semanas</td>
</tr>
<tr class="even">
<td>days(x = 1)</td>
<td>x dias</td>
</tr>
<tr class="odd">
<td>hours(x = 1)</td>
<td>x horas</td>
</tr>
<tr class="even">
<td>minutes(x = 1)</td>
<td>x minutos</td>
</tr>
<tr class="odd">
<td>seconds(x = 1)</td>
<td>x segundos</td>
</tr>
<tr class="even">
<td>milliseconds(x = 1)</td>
<td>x milisegundos</td>
</tr>
<tr class="odd">
<td>microseconds(x = 1)</td>
<td>x microsegundos</td>
</tr>
<tr class="even">
<td>nanoseconds(x = 1)</td>
<td>x nanosegundos</td>
</tr>
<tr class="odd">
<td>picoseconds(x = 1)</td>
<td>x picosegundos</td>
</tr>
</tbody>
</table>
<p>Por exemplo, se quisermos criar um objeto período com 3 meses e 12 dias, fazemos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">months</span>(<span class="dv">3</span>) <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">12</span>)</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "3m 12d 0H 0M 0S"</code></pre>
</div>
</div>
<p>Para subtrair este período de um objeto data e hora, fazemos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">-</span> p</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-08-16 12:00:00 UTC"</code></pre>
</div>
</div>
<p>Podemos também usar as funções abaixo para criar objetos período:</p>
<section id="period" class="level4" data-number="5.8.2.1">
<h4 data-number="5.8.2.1" class="anchored" data-anchor-id="period"><span class="header-section-number">5.8.2.1</span> period</h4>
<p>Use para automatizar a criação de períodos.</p>
<p>Por exemplo, para criar um objeto com período de 5 anos, podemos usar years(5) ou:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="dv">5</span>, <span class="at">unit =</span> <span class="st">"years"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "5y 0m 0d 0H 0M 0S"</code></pre>
</div>
</div>
</section>
<section id="as.period" class="level4" data-number="5.8.2.2">
<h4 data-number="5.8.2.2" class="anchored" data-anchor-id="as.period"><span class="header-section-number">5.8.2.2</span> as.period</h4>
<p>Use para transformar objetos de duração, intervalos e números para obejtos do tipo período:</p>
<p>Por exemplos, temos um número 5 e queremos criar um período de 5 dias, podemos fazer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.period</span>(<span class="dv">5</span>, <span class="at">unit=</span><span class="st">"days"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "5d 0H 0M 0S"</code></pre>
</div>
</div>
</section>
<section id="period_to_seconds" class="level4" data-number="5.8.2.3">
<h4 data-number="5.8.2.3" class="anchored" data-anchor-id="period_to_seconds"><span class="header-section-number">5.8.2.3</span> period_to_seconds</h4>
<p>Use para transformar um objeto do tipo período no total de número de segundos do período:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">period_to_seconds</span>(p)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8926200</code></pre>
</div>
</div>
</section>
</section>
<section id="duração" class="level3" data-number="5.8.3">
<h3 data-number="5.8.3" class="anchored" data-anchor-id="duração"><span class="header-section-number">5.8.3</span> <strong>Duração</strong></h3>
<p>Diferentes dos objetos períodos, os objetos do tipo duração (<em>duration</em>), Acompanham a passagem do “tempo físico”, o que diverge do horário do relógio quando irregularidades na “linha do tempo” acontecem.</p>
<p>Por exemplo, digamos que temos nosso “dia normal” na linha do tempo e adicionarmos 90 minutos de duração:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>nor <span class="sc">+</span> <span class="fu">dminutes</span>(<span class="dv">90</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-01-01 03:00:00 EST"</code></pre>
</div>
</div>
<p><img src="images/duration01.png" class="img-fluid"></p>
<p>Até aqui, o resultado foi similar à adicionarmos um objeto do tipo período de 90 minutes.</p>
<p>Porém, veja o que acontece quando temos uma inconsistência na linha do tempo, como por exemplo nosso início de horário de verão em nosso objeto gap.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>gap <span class="sc">+</span> <span class="fu">dminutes</span>(<span class="dv">90</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-03-11 04:00:00 EDT"</code></pre>
</div>
</div>
<p><img src="images/duration02.png" class="img-fluid"></p>
<p>O mesmo acontece com nosso término de horário de verão em nosso objeto lap:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>lap <span class="sc">+</span> <span class="fu">dminutes</span>(<span class="dv">90</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-11-04 01:00:00 EST"</code></pre>
</div>
</div>
<p><img src="images/duration03.png" class="img-fluid"></p>
<p>Ou mesmo com nosso ano bi-sexto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>leap</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2019-03-01"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>leap <span class="sc">+</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2020-02-29 06:00:00 UTC"</code></pre>
</div>
</div>
<p><img src="images/duration04.png" class="img-fluid"></p>
<p>Podemos pensar em objetos de duração como um modelo físico, como uma vida útil de uma bateria. As durações são armazenados como segundos, que é a única unidade distância consistente.</p>
<p>Por exemplo, se criarmos um objeto duração equivalente à 14 dias, ele irá armazenar 1209600s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>dd <span class="ot">&lt;-</span> <span class="fu">ddays</span>(<span class="dv">14</span>)</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>dd</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1209600s (~2 weeks)"</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Dica
</div>
</div>
<div class="callout-body-container callout-body">
<p>Há também uma classe chamada “<strong>difftime</strong>”, que se encontra no R base, ou seja, fora do pacote lubridate, usada para lidar com durações de tempo.</p>
</div>
</div>
<p>As funções para criar objetos de duração, são similares às dos objetos períodos, porém se iniciam com a letra “d”, veja:</p>
<table class="table">
<caption>Podemos também usar as funções abaixo para criar objetos duração:</caption>
<thead>
<tr class="header">
<th>Função</th>
<th>Objeto Duração</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dyears(x = 1)</td>
<td>31536000x anos</td>
</tr>
<tr class="even">
<td>dmonths(x)</td>
<td>2629800x meses</td>
</tr>
<tr class="odd">
<td>dweeks(x = 1)</td>
<td>604800x semanas</td>
</tr>
<tr class="even">
<td>ddays(x = 1)</td>
<td>x86400x dias</td>
</tr>
<tr class="odd">
<td>dhours(x = 1)</td>
<td>3600x horas</td>
</tr>
<tr class="even">
<td>dminutes(x = 1)</td>
<td>60x minutos</td>
</tr>
<tr class="odd">
<td>dseconds(x = 1)</td>
<td>x segundos</td>
</tr>
<tr class="even">
<td>dmilliseconds(x = 1)</td>
<td>x X <span class="math inline">\(10^3\)</span> milisegundos</td>
</tr>
<tr class="odd">
<td>dmicroseconds(x = 1)</td>
<td>x X <span class="math inline">\(10^6\)</span> microsegundos</td>
</tr>
<tr class="even">
<td>dnanoseconds(x = 1)</td>
<td>x X <span class="math inline">\(10^9\)</span> nanosegundos</td>
</tr>
<tr class="odd">
<td>dpicoseconds(x = 1)</td>
<td>x X <span class="math inline">\(10 ^{12}\)</span>picosegundos</td>
</tr>
</tbody>
</table>
<section id="duration" class="level4" data-number="5.8.3.1">
<h4 data-number="5.8.3.1" class="anchored" data-anchor-id="duration"><span class="header-section-number">5.8.3.1</span> duration</h4>
<p>Use para automatizar a criação de durações.</p>
<p>Por exemplo, para criar um objeto com duração de 5 anos, podemos usar dyears(5) ou:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">duration</span>(<span class="dv">5</span>, <span class="at">unit =</span> <span class="st">"years"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "157788000s (~5 years)"</code></pre>
</div>
</div>
</section>
<section id="as.duration" class="level4" data-number="5.8.3.2">
<h4 data-number="5.8.3.2" class="anchored" data-anchor-id="as.duration"><span class="header-section-number">5.8.3.2</span> as.duration</h4>
<p>Use para transformar objetos de períodos, intervalos e números para objetos do tipo duração:</p>
<p>Por exemplos, temos um número 10 e queremos criar um período de 10 segundos, podemos fazer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.duration</span>(<span class="dv">10</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "10s"</code></pre>
</div>
</div>
</section>
<section id="make_difftime" class="level4" data-number="5.8.3.3">
<h4 data-number="5.8.3.3" class="anchored" data-anchor-id="make_difftime"><span class="header-section-number">5.8.3.3</span> make_difftime</h4>
<p>Use para criar um objeto difftime (R base) com um número específico de unidades.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_difftime</span>(<span class="dv">3600</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 1 hours</code></pre>
</div>
</div>
</section>
</section>
<section id="intervalo" class="level3" data-number="5.8.4">
<h3 data-number="5.8.4" class="anchored" data-anchor-id="intervalo"><span class="header-section-number">5.8.4</span> <strong>Intervalo</strong></h3>
<p>Objeto do tipo intervalo, representam um intervalo específico da “linha do tempo”, limitado pelo início e fim da data e hora. Se dividirmor o intervalo, pela pela duração teremos a distância física do tempo. Se dividirmos o intervalo pelo período, termeos a distância relativa ao relógio.</p>
<p>Podemos criar um objeto de intervalo, usando a função interval() ou o símbolo %--%.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">interval</span>(<span class="fu">ymd</span>(<span class="st">"2017-01-01"</span>), d)</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>j <span class="ot">&lt;-</span> d <span class="sc">%--%</span> <span class="fu">ymd</span>(<span class="st">"2017-12-31"</span>)</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>i; j</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2017-01-01 UTC--2017-11-01 UTC</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2017-11-01 UTC--2017-12-31 UTC</code></pre>
</div>
</div>
<p>Observe pelo resultado acima, temos duas data para cada objeto, a da esquerda representa o início do intervalo e a da direito o fim.</p>
<p>Por exemplo, vamos pegar um dia normal na linha do tempo, representado pelo objeto nor e definirmos como o início do intervalo, e para o fim do intervalo usaremos nor mais um período de 90 minutos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interval</span>(nor, nor <span class="sc">+</span> <span class="fu">minutes</span>(<span class="dv">90</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2018-01-01 01:30:00 EST--2018-01-01 03:00:00 EST</code></pre>
</div>
</div>
<p><img src="images/interval01.png" class="img-fluid"></p>
<p>Agora, em uma linha do tempo inconsistente, o intervalo se mantém alinhado com o relógio. Veja como fica quando adicionamos um intervalo de 90 minutos quando temos o início de um horário de verão:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interval</span>(gap, gap<span class="sc">+</span><span class="fu">minutes</span>(<span class="dv">90</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2018-03-11 01:30:00 EST--2018-03-11 03:00:00 EDT</code></pre>
</div>
</div>
<p><img src="images/interval02.png" class="img-fluid"></p>
<p>De forma similar, ocorre quando temos um intervalo quando há o término de um horário de verão:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interval</span>(lap, lap<span class="sc">+</span><span class="fu">minutes</span>(<span class="dv">90</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2018-11-04 00:30:00 EDT--2018-11-04 02:00:00 EST</code></pre>
</div>
</div>
<p><img src="images/interval03.png" class="img-fluid"></p>
<p>Ou mesmo quando temos um intervalo em um ano bi-sexto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interval</span>(leap, leap <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2019-03-01 UTC--2020-03-01 UTC</code></pre>
</div>
</div>
<p><img src="images/interval04.png" class="img-fluid"></p>
<p>O pacote lubridate possui diversas funções para lidar com intervalo.</p>
<section id="within" class="level4" data-number="5.8.4.1">
<h4 data-number="5.8.4.1" class="anchored" data-anchor-id="within"><span class="header-section-number">5.8.4.1</span> %within%</h4>
<p>Use para identificar se um objeto do tipo intervalo ou data e hora “a” cai dentro de um interválo “b”</p>
<p>Por exemplo, se quisermos se a data e hora atual está dentro do intervalo “i”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span> () <span class="sc">%within%</span> i</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="int_start" class="level4" data-number="5.8.4.2">
<h4 data-number="5.8.4.2" class="anchored" data-anchor-id="int_start"><span class="header-section-number">5.8.4.2</span> int_start</h4>
<p>Use para obter ou definir o <strong>início</strong> de um <strong>intervalo</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">int_start</span>(i)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-01-01 UTC"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">int_start</span>(i) <span class="ot">&lt;-</span> <span class="fu">now</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>A função int_end() faz o oposto, ou seja, obtem ou define o <strong>fim</strong> de um intervalo.</p>
</div>
</div>
<p>int_aligns</p>
<p>Use para identificar se dois objetos do tipo intervalo estão alinhados, ou seja, compartilham de uma mesma data e hora.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">int_aligns</span>(i,j)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>No exemplo acima, temos “2017-11-28” como início de um objeto e fim de outro, por isso dizemos que eles estão alinhados.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Se quisermos saber se estes objetos estão <strong>sobrepostos</strong>, ou seja, tem partes de uma intervá-lo que também fazem parte de outro, utilizamos a função <strong>int_overlaps</strong>().</p>
</div>
</div>
</section>
<section id="int_diff" class="level4" data-number="5.8.4.3">
<h4 data-number="5.8.4.3" class="anchored" data-anchor-id="int_diff"><span class="header-section-number">5.8.4.3</span> int_diff</h4>
<p>Use para transformar em intervalos, os valores que estão em um vetor de data e hora.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(dt, dt<span class="sc">+</span><span class="dv">100</span>, dt<span class="sc">+</span><span class="dv">1000</span>); <span class="fu">int_diff</span>(v)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2017-11-28 12:00:00 UTC--2017-11-28 12:01:40 UTC
[2] 2017-11-28 12:01:40 UTC--2017-11-28 12:16:40 UTC</code></pre>
</div>
</div>
<p>int_flip</p>
<p>Use para colocar em ordem reversa a direção de um intervalo, ou seja, a dat e hora do fim vai para o início do intervalo e a data e hora do início vai para o final.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">int_flip</span>(i)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2017-11-01 UTC--2022-09-01 14:14:38 UTC</code></pre>
</div>
</div>
<p>Para colocar em ordem padrão um intervalo de acordo com a linha do tempo, podemos usar a função <strong>int_standardize</strong>().</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">int_standardize</span>(i)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2017-11-01 UTC--2022-09-01 14:14:38 UTC</code></pre>
</div>
</div>
</section>
<section id="int_length" class="level4" data-number="5.8.4.4">
<h4 data-number="5.8.4.4" class="anchored" data-anchor-id="int_length"><span class="header-section-number">5.8.4.4</span> int_length</h4>
<p>Use para obter, em segundos, o tempo total de um intervalo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">int_length</span>(i)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -152547279</code></pre>
</div>
</div>
</section>
<section id="int_shift" class="level4" data-number="5.8.4.5">
<h4 data-number="5.8.4.5" class="anchored" data-anchor-id="int_shift"><span class="header-section-number">5.8.4.5</span> int_shift</h4>
<p>Use para mover um intervalo para mais ou para menos na linha do tempo.</p>
<p>Por exemplo, se mover todo o intervalo (início e fim) em um dia antes da linha do tempo, podemos fazer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">int_shift</span>(i, <span class="fu">days</span>(<span class="sc">-</span><span class="dv">1</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2022-08-31 11:14:38 -03--2017-10-30 22:00:00 -02</code></pre>
</div>
</div>
</section>
<section id="as.interval" class="level4" data-number="5.8.4.6">
<h4 data-number="5.8.4.6" class="anchored" data-anchor-id="as.interval"><span class="header-section-number">5.8.4.6</span> as.interval</h4>
<p>Use para criar um objeto intervalo com determinado periodo definindo uma dat e hora de início.</p>
<p>Por exemplo, para criarmos um intervalo de 1 dia, iniciando na data atual, podemos fazer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.interval</span>(<span class="fu">days</span>(<span class="dv">1</span>), <span class="at">start =</span> <span class="fu">now</span>())</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2022-09-01 11:14:38 -03--2022-09-02 11:14:38 -03</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Podemos usar a função <strong>is.interval</strong>() para saber se um objeto é um intervalo válido ou não.</p>
</div>
</div>
</section>
</section>
</section>
<section id="datas-imaginárias" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="datas-imaginárias"><span class="header-section-number">5.9</span> Datas Imaginárias</h2>
<p>É importante observar que nem todos os anos tem 365 dias (ex: ano bi-sexto) e nem todos os minutos tem 60 segundos (ex: fim de horário de verão).</p>
<p>Isso é importante de ser observado, pois em alguns casos tentamos criar data imaginárias, como por exemplo “Fev 31”, adicionando um mês à “Jan 31”. As funções do pacote lubridate são inteligentes o suficiente e neste caso retornaria um valor NA:<br>
</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>jan31 <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="dv">20180131</span>)</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>jan31 <span class="sc">+</span> <span class="fu">months</span>(<span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<section id="aritmética-dos-meses" class="level3" data-number="5.9.1">
<h3 data-number="5.9.1" class="anchored" data-anchor-id="aritmética-dos-meses"><span class="header-section-number">5.9.1</span> Aritmética dos meses</h3>
<p>Porém, as vezes, intuitivamente, é isto que desejamos fazer, ou seja, adicionar “um mês” a “Jan 31”, mas que a função seja inteligente o suficiente para <strong>rolar</strong> para o <strong>último</strong> <strong>dia</strong> <strong>do</strong> <strong>mês</strong>.</p>
<p>Adicionar ou subtrair <strong>meses</strong> as vezes é uma tarefa difícil, pois temos meses de diferentes tamanhos (ex: 30, 31, 28 dias ou até 29). Por isso, em alguns casos é útil termos a possibildade de fazermos um ajustes automáticos.</p>
<p>Para isso usamos, ao invés do sinal de adição “<strong>+</strong>”, utilizamos o símbolo %<strong>m+</strong>% para adicionar meses (ou %<strong>m-</strong>% para subtrair). Veja:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>jan31 <span class="sc">%m+%</span> <span class="fu">months</span>(<span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-02-28"</code></pre>
</div>
</div>
<p>A função <strong>add_with_rollback</strong>() nos permite rolar a data da soma para o primeiro dia do mês seguinte (e não o último dia do mês anterior) usando o argumento <strong>roll_to_first.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add_with_rollback</span>(jan31, <span class="fu">months</span>(<span class="dv">1</span>), <span class="at">roll_to_first =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-03-01"</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../Manipulacao_Strings/Manipulacao de strings com stringr.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Manipulacao de Strings com STRINGR</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../Visualizacao/Visualizacao_de_dados_com_ggplot2.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Visualização de Dados com GGPLOT2</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>